"use strict";var e=require("react"),t=require("../../ui-react/with-schemas/index.cjs");const l=e=>typeof e,n="",s=l(n),r=l(!0),a=l(0),o=l(l),i="type",u="default",d="Has",c="Ids",h="Table",m=h+"s",p=h+c,b="Row",g=b+"Count",v=b+c,f="Cell",I=f+c,y="Value",w=y+"s",C=y+c,k="currentTarget",x="value",S=e=>n+e,T=globalThis.window,V=Math,O=V.min,R=V.floor,q=isFinite,M=e=>null==e,P=(e,t,l)=>M(e)?null==l?void 0:l():t(e),N=e=>e==s||e==r,L=e=>l(e)==o,E=e=>Array.isArray(e),j=(e,t,l)=>e.slice(t,l),z=e=>e.length,$=e=>{throw Error(e)},{PureComponent:A,Fragment:J,createContext:D,createElement:B,useCallback:F,useContext:Q,useEffect:H,useLayoutEffect:W,useMemo:G,useRef:K,useState:U,useSyncExternalStore:X}=e,Y=(e,...t)=>M(e)?{}:e(...t),Z=(e,t)=>e.sort(t),_=(e,t)=>e.forEach(t),ee=(e,t)=>e.map(t),te=e=>0==z(e),le=(e,...t)=>e.push(...t),ne=e=>e.shift(),se=Object,re=e=>se.getPrototypeOf(e),ae=se.entries,oe=se.isFrozen,ie=e=>!M(e)&&P(re(e),(e=>e==se.prototype||M(re(e))),(()=>!0)),ue=se.keys,de=se.freeze,ce=(e=[])=>se.fromEntries(e),he=(e,t)=>t in e,me=(e,t)=>(delete e[t],e),pe=(e,t)=>ee(ae(e),(([e,l])=>t(l,e))),be=(e,t)=>ce(pe(e,((e,l)=>[l,t(e,l)]))),ge=e=>ie(e)&&0==(e=>z(ue(e)))(e),ve=(e,t,l,n=0)=>M(e)||!ie(e)||!n&&ge(e)||oe(e)?(null==l||l(),!1):(((e,t)=>{_(ae(e),(([e,l])=>t(l,e)))})(e,((l,n)=>{t(l,n)||me(e,n)})),!!n||!ge(e)),fe=JSON.stringify,Ie=JSON.parse,ye=e=>fe(e,((e,t)=>t instanceof Map?se.fromEntries([...t]):t)),we="tinybaseInspector",Ce="TinyBase Inspector",ke=["left","top","bottom","right","full"],xe="state",Se="sort",Te="open",Ve="position",Oe=Te,Re="editable",qe=(...e)=>ye(e),Me=(e,t)=>ee(Z([...e]),t),Pe=(e,l)=>[!!t.useCell(xe,e,Re,l),F((t=>{l.setCell(xe,e,Re,(e=>!e)),t.preventDefault()}),[l,e])],Ne="M20 80l5-15l40-40l10 10l-40 40l-15 5m5-15l10 10",Le='content:url("',Ee=Le+"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' stroke-width='4' stroke='white' fill='none'>",je='</svg>")',ze=Le+"data:image/svg+xml,%3csvg viewBox='0 0 680 680' xmlns='http://www.w3.org/2000/svg' style='width:680px%3bheight:680px'%3e %3cpath stroke='white' stroke-width='80' fill='none' d='M340 617a84 241 90 11.01 0zM131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124zm-12-127a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e %3cpath fill='%23d81b60' d='M131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124z' /%3e %3cpath d='M249 619a94 240 90 00308-128 114 289 70 01-308 128zM119 208a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e%3c/svg%3e\")",$e=ee([[20,20,20,60],[20,20,60,20],[20,60,60,20],[60,20,20,60],[30,30,40,40]],(([e,t,l,n])=>Ee+`<rect x='20' y='20' width='60' height='60' fill='grey'/><rect x='${e}' y='${t}' width='${l}' height='${n}' fill='white'/>`+je)),Ae=Ee+"<path d='M20 20l60 60M20 80l60-60' />"+je,Je=Ee+`<path d='${Ne}' />`+je,De=Ee+`<path d='${Ne}M20 20l60 60' />`+je;var Be=Object.defineProperty,Fe=Object.defineProperties,Qe=Object.getOwnPropertyDescriptors,He=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,Ke=(e,t,l)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Ue=(e,t)=>{for(var l in t||(t={}))We.call(t,l)&&Ke(e,l,t[l]);if(He)for(var l of He(t))Ge.call(t,l)&&Ke(e,l,t[l]);return e},Xe=(e,t)=>Fe(e,Qe(t));const Ye="*::-webkit-scrollbar",Ze=((e,t="")=>e.join(t))(pe(Xe(Ue(Xe(Ue(Xe(Ue({"":"all:initial;font-family:sans-serif;font-size:0.75rem;position:fixed;z-index:999999","*":"all:revert","*::before":"all:revert","*::after":"all:revert",[Ye]:"width:0.5rem;height:0.5rem;",[Ye+"-track"]:"background:#111",[Ye+"-thumb"]:"background:#999;border:1px solid #111",[Ye+"-thumb:hover"]:"background:#fff",[Ye+"-corner"]:"background:#111",img:"width:1rem;height:1rem;background:#111;border:0;vertical-align:text-bottom",">img":"padding:0.25rem;bottom:0;right:0;position:fixed;"+ze},ce(ee(["bottom:0;left:0","top:0;right:0"],((e,t)=>[`>img[data-position='${t}']`,e])))),{main:"display:flex;flex-direction:column;background:#111d;color:#fff;position:fixed;"}),ce(ee(["bottom:0;left:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:30vh","bottom:0;left:0;width:100vw;height:30vh","top:0;right:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:100vh"],((e,t)=>[`main[data-position='${t}']`,e])))),{header:"display:flex;padding:0.25rem;background:#000;align-items:center","header>img:nth-of-type(1)":ze,"header>img:nth-of-type(6)":Ae}),ce(ee($e,((e,t)=>[`header>img[data-id='${t}']`,e])))),{"header>span":"flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-left:0.25rem",article:"padding:0.25rem 0.25rem 0.25rem 0.5rem;overflow:auto;flex:1",details:"margin-left:0.75rem;width:fit-content;","details img":"display:none","details[open]>summary img":"display:unset;background:none;margin-left:0.25rem","details[open]>summary img.edit":Je,"details[open]>summary img.done":De,summary:"margin-left:-0.75rem;line-height:1.25rem;user-select:none;width:fit-content",table:"border-collapse:collapse;table-layout:fixed;margin-bottom:0.5rem","table input":"background:#111;color:unset;padding:0 0.25rem;border:0;font-size:unset;vertical-align:top;margin:0",'table input[type="number"]':"width:4rem","table tbody button":"font-size:0;background:#fff;border-radius:50%;margin:0 0.125rem 0 0;width:0.85rem;color:#111","table button:first-letter":"font-size:0.75rem",thead:"background:#222","th:nth-of-type(1)":"min-width:2rem;","th.sorted":"background:#000","table caption":"text-align:left;white-space:nowrap;line-height:1.25rem",button:"width:1.5rem;border:none;background:none;color:#fff;padding:0","button[disabled]":"color:#777","button.next":"margin-right:0.5rem",[`th,#${we} td`]:"overflow:hidden;text-overflow:ellipsis;padding:0.25rem 0.5rem;max-width:12rem;white-space:nowrap;border-width:1px 0;border-style:solid;border-color:#777;text-align:left","span.warn":"margin:0.25rem;color:#d81b60"}),((e,t)=>e?`#${we} ${t}{${e}}`:""))),_e=({s:e})=>{var l;const n=null!=(l=t.useValue(Ve,e))?l:1,s=t.useSetValueCallback(Oe,(()=>!0),[],e);return t.useValue(Oe,e)?null:B("img",{onClick:s,title:Ce,"data-position":n})},et=({uniqueId:e,summary:l,editable:n,handleEditable:s,children:r,s:a})=>{const o=!!t.useCell(xe,e,Te,a),i=t.useSetCellCallback(xe,e,Te,(e=>e[k].open),[],a);return B("details",{open:o,onToggle:i},B("summary",null,l,s?B("img",{onClick:s,className:n?"done":"edit"}):null),r)},tt=e=>{const t=l(e);return N(t)||t==a&&q(e)?t:void 0},lt=(e,t,l,n,s)=>M(s)?e.delCell(t,l,n,!0):e.setCell(t,l,n,s),nt=(e,t,l)=>M(l)?e.delValue(t):e.setValue(t,l),st=(e,t,l,n)=>e==s?t:e==a?l:n;var rt=Object.defineProperty,at=Object.defineProperties,ot=Object.getOwnPropertyDescriptors,it=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,dt=Object.prototype.propertyIsEnumerable,ct=(e,t,l)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,ht=(e,t)=>{for(var l in t||(t={}))ut.call(t,l)&&ct(e,l,t[l]);if(it)for(var l of it(t))dt.call(t,l)&&ct(e,l,t[l]);return e},mt=(e,t)=>at(e,ot(t)),pt=(e,t)=>{var l={};for(var n in e)ut.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&it)for(var n of it(e))t.indexOf(n)<0&&dt.call(e,n)&&(l[n]=e[n]);return l};const bt="editable",gt=(e,l)=>ee(t.useTableCellIds(e,l),(t=>e+"."+t)),vt=(e,t,l)=>{const n=F(e,t);return l?n:void 0},ft=(...e)=>G((()=>e),e),It=(e,t)=>G((()=>({store:e,tableId:t})),[e,t]),yt=(e,t)=>G((()=>({queries:e,queryId:t})),[e,t]),wt=(e,t=!1,l,n=0,s,r,a,o)=>{const[[i,u,d],c]=U([e,t,n]),h=F((e=>{c(e),null==o||o(e)}),[o]),m=vt((e=>h([e,e==i&&!u,d])),[h,i,u,d],l),p=F((e=>h([i,u,e])),[h,i,u]),b=!0===a?Lt:a;return[[i,u,d],m,G((()=>!1===a?null:B(b,{offset:d,limit:s,total:r,onChange:p})),[a,b,d,s,r,p])]},Ct=(e,t,n)=>G((()=>{const r=null!=t?t:e;return be(E(r)?ce(ee(r,(e=>[e,e]))):r,((e,t)=>ht(ht({},{label:t,component:n}),l(e)==s?{label:e}:e)))}),[t,n,e]),kt=({className:e,headerRow:t,idColumn:l,params:[n,s,r,a,o,i]})=>B("table",{className:e},i?B("caption",null,i):null,!1===t?null:B("thead",null,B("tr",null,!1===l?null:B(xt,{sort:null!=a?a:[],label:"Id",onClick:o}),pe(n,(({label:e},t)=>B(xt,{key:t,cellId:t,label:e,sort:null!=a?a:[],onClick:o}))))),B("tbody",null,ee(r,(e=>B("tr",{key:e},!1===l?null:B("th",null,e),pe(n,(({component:t,getComponentProps:l},n)=>B("td",{key:n},B(t,mt(ht(ht({},Y(l,e,n)),s),{rowId:e,cellId:n})))))))))),xt=({cellId:e,sort:[t,l],label:s=(null!=e?e:n),onClick:r})=>B("th",{onClick:vt((()=>null==r?void 0:r(e)),[r,e],r),className:M(l)||t!=e?void 0:`sorted ${l?"de":"a"}scending`},M(l)||t!=e?null:(l?"↓":"↑")+" ",s),St=({localRowId:e,params:[l,n,s,r,a,o,i]})=>{const u=t.useRemoteRowId(a,e,o);return B("tr",null,!1===l?null:B(J,null,B("th",null,e),B("th",null,u)),pe(n,(({component:t,getComponentProps:l},n)=>{const[a,o]=((e,t="",l)=>e.split(t,l))(n,".",2),d=a===s?e:a===r?u:null;return M(d)?null:B("td",{key:n},B(t,mt(ht({},Y(l,d,o)),{store:i,tableId:a,rowId:d,cellId:o})))})))},Tt=({thing:e,onThingChange:t,className:l,hasSchema:n,showType:o=!0})=>{const[i,u]=U(),[d,c]=U(),[h,m]=U(),[p,b]=U(),[g,v]=U();d!==e&&(u(tt(e)),c(e),m(e+""),b(Number(e)||0),v(!!e));const f=F(((e,l)=>{l(e),c(e),t(e)}),[t]),I=F((()=>{if(!(null==n?void 0:n())){const e=st(i,a,r,s),l=st(e,h,p,g);u(e),c(l),t(l)}}),[n,t,h,p,g,i]);return B("div",{className:l},o?B("button",{className:i,onClick:I},i):null,st(i,B("input",{key:i,value:h,onChange:F((e=>f(e[k][x]+"",m)),[f])}),B("input",{key:i,type:"number",value:p,onChange:F((e=>f(Number(e[k][x]||0),b)),[f])}),B("input",{key:i,type:"checkbox",checked:g,onChange:F((e=>f(!!e[k].checked,v)),[f])})))},Vt=e=>{var l=e,{tableId:n,cellId:s,descending:r,offset:a,limit:o,store:i,editable:u,sortOnClick:d,paginator:c=!1,onChange:h,customCells:m}=l,p=pt(l,["tableId","cellId","descending","offset","limit","store","editable","sortOnClick","paginator","onChange","customCells"]);const[b,g,v]=wt(s,r,d,a,o,t.useRowCount(n,i),c,h);return B(kt,mt(ht({},p),{params:ft(Ct(t.useTableCellIds(n,i),m,u?Pt:t.CellView),It(i,n),t.useSortedRowIds(n,...b,o,i),b,g,v)}))},Ot=({store:e,editable:l=!1,valueComponent:n=(l?Nt:t.ValueView),getValueComponentProps:s,className:r,headerRow:a,idColumn:o})=>B("table",{className:r},!1===a?null:B("thead",null,B("tr",null,!1===o?null:B("th",null,"Id"),B("th",null,y))),B("tbody",null,ee(t.useValueIds(e),(t=>B("tr",{key:t},!1===o?null:B("th",null,t),B("td",null,B(n,mt(ht({},Y(s,t)),{valueId:t,store:e})))))))),Rt=e=>{var l=e,{indexId:n,sliceId:s,indexes:r,editable:a,customCells:o}=l,i=pt(l,["indexId","sliceId","indexes","editable","customCells"]);const[u,d,c]=((e,t)=>[e,null==e?void 0:e.getStore(),null==e?void 0:e.getTableId(t)])(t.useIndexesOrIndexesById(r),n);return B(kt,mt(ht({},i),{params:ft(Ct(t.useTableCellIds(c,d),o,a?Pt:t.CellView),It(d,c),t.useSliceRowIds(n,s,u))}))},qt=({relationshipId:e,relationships:l,editable:n,customCells:s,className:r,headerRow:a,idColumn:o=!0})=>{const[i,u,d,c]=((e,t)=>[e,null==e?void 0:e.getStore(),null==e?void 0:e.getLocalTableId(t),null==e?void 0:e.getRemoteTableId(t)])(t.useRelationshipsOrRelationshipsById(l),e),h=Ct([...gt(d,u),...gt(c,u)],s,n?Pt:t.CellView),m=ft(o,h,d,c,e,i,u);return B("table",{className:r},!1===a?null:B("thead",null,B("tr",null,!1===o?null:B(J,null,B("th",null,d,".Id"),B("th",null,c,".Id")),pe(h,(({label:e},t)=>B("th",{key:t},e))))),B("tbody",null,ee(t.useRowIds(d,u),(e=>B(St,{key:e,localRowId:e,params:m})))))},Mt=e=>{var l=e,{queryId:n,cellId:s,descending:r,offset:a,limit:o,queries:i,sortOnClick:u,paginator:d=!1,customCells:c,onChange:h}=l,m=pt(l,["queryId","cellId","descending","offset","limit","queries","sortOnClick","paginator","customCells","onChange"]);const[p,b,g]=wt(s,r,u,a,o,t.useResultRowCount(n,i),d,h);return B(kt,mt(ht({},m),{params:ft(Ct(t.useResultTableCellIds(n,i),c,t.ResultCellView),yt(i,n),t.useResultSortedRowIds(n,...p,o,i),p,b,g)}))},Pt=({tableId:e,rowId:l,cellId:n,store:s,className:r,showType:a})=>{var o;return B(Tt,{thing:t.useCell(e,l,n,s),onThingChange:t.useSetCellCallback(e,l,n,(e=>e),[],s),className:null!=r?r:bt+f,showType:a,hasSchema:null==(o=t.useStoreOrStoreById(s))?void 0:o.hasTablesSchema})},Nt=({valueId:e,store:l,className:n,showType:s})=>{var r;return B(Tt,{thing:t.useValue(e,l),onThingChange:t.useSetValueCallback(e,(e=>e),[],l),className:null!=n?n:bt+y,showType:s,hasSchema:null==(r=t.useStoreOrStoreById(l))?void 0:r.hasValuesSchema})},Lt=({onChange:e,total:t,offset:l=0,limit:n=t,singular:s="row",plural:r=s+"s"})=>{(l>t||l<0)&&(l=0,e(0));const a=vt((()=>e(l-n)),[e,l,n],l>0),o=vt((()=>e(l+n)),[e,l,n],l+n<t);return B(J,null,t>n&&B(J,null,B("button",{className:"previous",disabled:0==l,onClick:a},"←"),B("button",{className:"next",disabled:l+n>=t,onClick:o},"→"),l+1," to ",O(t,l+n)," of "),t," ",1!=t?r:s)},Et=({indexes:e,indexesId:l,indexId:n,s:s})=>B(et,{uniqueId:qe("i",l,n),summary:"Index: "+n,s:s},ee(t.useSliceIds(n,e),(t=>B(jt,{indexes:e,indexesId:l,indexId:n,sliceId:t,s:s,key:t})))),jt=({indexes:e,indexesId:t,indexId:l,sliceId:n,s:s})=>{const r=qe("i",t,l,n),[a,o]=Pe(r,s);return B(et,{uniqueId:r,summary:"Slice: "+n,editable:a,handleEditable:o,s:s},B(Rt,{sliceId:n,indexId:l,indexes:e,editable:a}))},zt=({indexesId:e,s:l})=>{const n=t.useIndexes(e),s=t.useIndexIds(n);return M(n)?null:B(et,{uniqueId:qe("i",e),summary:"Indexes: "+(null!=e?e:u),s:l},te(s)?"No indexes defined":Me(s,(t=>B(Et,{indexes:n,indexesId:e,indexId:t,s:l,key:t}))))},$t=({metrics:e,metricId:l})=>B("tr",null,B("th",null,l),B("td",null,null==e?void 0:e.getTableId(l)),B("td",null,t.useMetric(l,e))),At=({metricsId:e,s:l})=>{const n=t.useMetrics(e),s=t.useMetricIds(n);return M(n)?null:B(et,{uniqueId:qe("m",e),summary:"Metrics: "+(null!=e?e:u),s:l},te(s)?"No metrics defined":B("table",null,B("thead",null,B("th",null,"Metric Id"),B("th",null,"Table Id"),B("th",null,"Metric")),B("tbody",null,ee(s,(e=>B($t,{metrics:n,metricId:e,key:e}))))))},Jt=({queries:e,queriesId:l,queryId:n,s:s})=>{var r;const a=qe("q",l,n),[o,i,u]=Ie(null!=(r=t.useCell(xe,a,Se,s))?r:"[]"),d=t.useSetCellCallback(xe,a,Se,ye,[],s);return B(et,{uniqueId:a,summary:"Query: "+n,s:s},B(Mt,{queryId:n,queries:e,cellId:o,descending:i,offset:u,limit:10,paginator:!0,sortOnClick:!0,onChange:d}))},Dt=({queriesId:e,s:l})=>{const n=t.useQueries(e),s=t.useQueryIds(n);return M(n)?null:B(et,{uniqueId:qe("q",e),summary:"Queries: "+(null!=e?e:u),s:l},te(s)?"No queries defined":Me(s,(t=>B(Jt,{queries:n,queriesId:e,queryId:t,s:l,key:t}))))},Bt=({relationships:e,relationshipsId:t,relationshipId:l,s:n})=>{const s=qe("r",t,l),[r,a]=Pe(s,n);return B(et,{uniqueId:s,summary:"Relationship: "+l,editable:r,handleEditable:a,s:n},B(qt,{relationshipId:l,relationships:e,editable:r}))},Ft=({relationshipsId:e,s:l})=>{const n=t.useRelationships(e),s=t.useRelationshipIds(n);return M(n)?null:B(et,{uniqueId:qe("r",e),summary:"Relationships: "+(null!=e?e:u),s:l},te(s)?"No relationships defined":Me(s,(t=>B(Bt,{relationships:n,relationshipsId:e,relationshipId:t,s:l,key:t}))))},Qt=({tableId:e,store:l,storeId:n,s:s})=>{var r;const a=qe("t",n,e),[o,i,u]=Ie(null!=(r=t.useCell(xe,a,Se,s))?r:"[]"),d=t.useSetCellCallback(xe,a,Se,ye,[],s),[c,m]=Pe(a,s);return B(et,{uniqueId:a,summary:h+": "+e,editable:c,handleEditable:m,s:s},B(Vt,{tableId:e,store:l,cellId:o,descending:i,offset:u,limit:10,paginator:!0,sortOnClick:!0,onChange:d,editable:c}))},Ht=({store:e,storeId:l,s:n})=>{const s=qe("v",l),[r,a]=Pe(s,n);return te(t.useValueIds(e))?null:B(et,{uniqueId:s,summary:w,editable:r,handleEditable:a,s:n},B(Ot,{store:e,editable:r}))},Wt=({storeId:e,s:l})=>{const n=t.useStore(e),s=t.useTableIds(n);return M(n)?null:B(et,{uniqueId:qe("s",e),summary:(n.isMergeable()?"Mergeable":"")+"Store: "+(null!=e?e:u),s:l},B(Ht,{storeId:e,store:n,s:l}),Me(s,(t=>B(Qt,{store:n,storeId:e,tableId:t,s:l,key:t}))))},Gt=({s:e})=>{const l=K(null),n=K(0),[s,r]=U(!1),{scrollLeft:a,scrollTop:o}=t.useValues(e);W((()=>{const e=l.current;if(e&&!s){const t=new MutationObserver((()=>{e.scrollWidth>=R(a)+e.clientWidth&&e.scrollHeight>=R(o)+e.clientHeight&&e.scrollTo(a,o)}));return t.observe(e,{childList:!0,subtree:!0}),()=>t.disconnect()}}),[s,a,o]);const i=F((t=>{const{scrollLeft:l,scrollTop:s}=t[k];cancelIdleCallback(n.current),n.current=requestIdleCallback((()=>{r(!0),e.setPartialValues({scrollLeft:l,scrollTop:s})}))}),[e]),u=t.useStore(),d=t.useStoreIds(),c=t.useMetrics(),h=t.useMetricsIds(),m=t.useIndexes(),p=t.useIndexesIds(),b=t.useRelationships(),g=t.useRelationshipsIds(),v=t.useQueries(),f=t.useQueriesIds();return M(u)&&te(d)&&M(c)&&te(h)&&M(m)&&te(p)&&M(b)&&te(g)&&M(v)&&te(f)?B("span",{className:"warn"},"There are no Stores or other objects to inspect. Make sure you placed the Inspector inside a Provider component."):B("article",{ref:l,onScroll:i},B(Wt,{s:e}),ee(d,(t=>B(Wt,{storeId:t,s:e,key:t}))),B(At,{s:e}),ee(h,(t=>B(At,{metricsId:t,s:e,key:t}))),B(zt,{s:e}),ee(p,(t=>B(zt,{indexesId:t,s:e,key:t}))),B(Ft,{s:e}),ee(g,(t=>B(Ft,{relationshipsId:t,s:e,key:t}))),B(Dt,{s:e}),ee(f,(t=>B(Dt,{queriesId:t,s:e,key:t}))))};var Kt=Object.defineProperty;class Ut extends A{constructor(e){var t,l,n;super(e),n=(e,t)=>console.error(e,t.componentStack),(l="componentDidCatch")in(t=this)?Kt(t,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[l]=n,this.state={e:0}}static getDerivedStateFromError(){return{e:1}}render(){return this.state.e?B("span",{className:"warn"},"Inspector error: please see console for details."):this.props.children}}const Xt=({s:e})=>{var l;const n=null!=(l=t.useValue(Ve,e))?l:1,s=t.useSetValueCallback(Oe,(()=>!1),[],e),r=t.useSetValueCallback(Ve,(e=>Number(e[k].dataset.id)),[],e);return B("header",null,B("img",{title:Ce}),B("span",null,Ce),ee(ke,((e,t)=>t==n?null:B("img",{onClick:r,"data-id":t,title:"Dock to "+e,key:t}))),B("img",{onClick:s,title:"Close"}))},Yt=({s:e})=>{var l;const n=null!=(l=t.useValue(Ve,e))?l:1;return t.useValue(Oe,e)?B("main",{"data-position":n},B(Xt,{s:e}),B(Ut,null,B(Gt,{s:e}))):null},Zt=e=>t=>{return l=(t,l)=>t+e(l),rl(t).reduce(l,0);var l},_t=e=>{var t;return null!=(t=null==e?void 0:e.size)?t:0},el=Zt(_t),tl=Zt(el),ll=Zt(tl),nl=(e,t)=>{var l;return null!=(l=null==e?void 0:e.has(t))&&l},sl=e=>M(e)||0==_t(e),rl=e=>{var t;return[...null!=(t=null==e?void 0:e.values())?t:[]]},al=e=>e.clear(),ol=(e,t)=>null==e?void 0:e.forEach(t),il=(e,t)=>null==e?void 0:e.delete(t),ul=e=>new Map(e),dl=e=>{var t;return[...null!=(t=null==e?void 0:e.keys())?t:[]]},cl=(e,t)=>null==e?void 0:e.get(t),hl=(e,t)=>ol(e,((e,l)=>t(l,e))),ml=(e,t,l)=>M(l)?(il(e,t),e):null==e?void 0:e.set(t,l),pl=(e,t,l,n)=>(nl(e,t)?null==n||n(cl(e,t)):ml(e,t,l()),cl(e,t)),bl=(e,t,l,n=ml)=>(be(t,((t,n)=>l(e,n,t))),hl(e,(l=>he(t,l)?0:n(e,l))),e),gl=(e,t,l,n)=>{const s={};return ol(e,((e,r)=>{if(!(null==l?void 0:l(e,r))){const l=t?t(e,r):e;(null==n?void 0:n(l))||(s[r]=l)}})),s},vl=(e,t,l)=>gl(e,(e=>gl(e,t,l)),sl,ge),fl=(e,t,l)=>gl(e,(e=>vl(e,t,l)),sl,ge),Il=(e,t)=>{const l=ul();return ol(e,((e,n)=>{var s;return l.set(n,null!=(s=null==t?void 0:t(e))?s:e)})),l},yl=e=>Il(e,Il),wl=e=>Il(e,yl),Cl=(e,t,l,n,s=0)=>P((l?pl:cl)(e,t[s],s>z(t)-2?l:ul),(r=>{if(s>z(t)-2)return(null==n?void 0:n(r))&&ml(e,t[s]),r;const a=Cl(r,t,l,n,s+1);return sl(r)&&ml(e,t[s]),a})),kl=e=>new Set(E(e)||M(e)?e:[e]),xl=(e,t)=>null==e?void 0:e.add(t),Sl=/^\d+$/,Tl=()=>{const e=[];let t=0;return[l=>{var s;return null!=(s=l?ne(e):null)?s:n+t++},t=>{Sl.test(t)&&z(e)<1e3&&le(e,t)}]},Vl=e=>{let t;const[l,s]=Tl(),r=ul();return[(s,a,o,i=[],u=()=>[])=>{null!=t||(t=e());const d=l(1);return ml(r,d,[s,a,o,i,u]),xl(Cl(a,null!=o?o:[n],kl),d),d},(e,l,...s)=>_(((e,t=[n])=>{const l=[],s=(e,n)=>n==z(t)?le(l,e):null===t[n]?ol(e,(e=>s(e,n+1))):_([t[n],null],(t=>s(cl(e,t),n+1)));return s(e,0),l})(e,l),(e=>ol(e,(e=>cl(r,e)[0](t,...null!=l?l:[],...s))))),e=>P(cl(r,e),(([,t,l])=>(Cl(t,null!=l?l:[n],void 0,(t=>(il(t,e),sl(t)?1:0))),ml(r,e),s(e),l))),e=>P(cl(r,e),(([e,,l=[],n,s])=>{const r=(...a)=>{var o,i;const u=z(a);u==z(l)?e(t,...a,...s(a)):M(l[u])?_(null!=(i=null==(o=n[u])?void 0:o.call(n,...a))?i:[],(e=>r(...a,e))):r(...a,l[u])};r()}))]};var Ol=Object.defineProperty,Rl=Object.getOwnPropertySymbols,ql=Object.prototype.hasOwnProperty,Ml=Object.prototype.propertyIsEnumerable,Pl=(e,t,l)=>t in e?Ol(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Nl=(e,t,l)=>new Promise(((n,s)=>{var r=e=>{try{o(l.next(e))}catch(e){s(e)}},a=e=>{try{o(l.throw(e))}catch(e){s(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(r,a);o((l=l.apply(e,t)).next())}));const Ll=ul(),El=ul();var jl=(e,t,l)=>new Promise(((n,s)=>{var r=e=>{try{o(l.next(e))}catch(e){s(e)}},a=e=>{try{o(l.throw(e))}catch(e){s(e)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(r,a);o((l=l.apply(e,t)).next())}));const zl="storage",$l=e=>[e,e],Al=(e,t=el)=>t(e[0])+t(e[1]),Jl=()=>[ul(),ul()],Dl=e=>[...e],Bl=([e,t])=>e===t,Fl=(e,t,l)=>ml(e,t,cl(e,t)==-l?void 0:l),Ql=()=>{let e,t,l=!1,n=!1,s=0,r=[];const o=ul(),c=ul(),k=ul(),x=ul(),T=ul(),V=ul(),O=ul(),R=ul(),q=ul(),$=ul(),A=ul(),J=ul(),D=ul(),B=ul(),F=kl(),Q=ul(),H=ul(),W=ul(),G=ul(),K=Jl(),U=Jl(),X=Jl(),Y=Jl(),te=Jl(),ne=Jl(),se=Jl(),re=Jl(),ae=Jl(),oe=Jl(),ie=Jl(),ue=Jl(),ce=Jl(),pe=Jl(),fe=Jl(),we=Jl(),Ce=Jl(),ke=Jl(),xe=Jl(),Se=Jl(),Te=Jl(),Ve=Jl(),Oe=ul(),Re=Jl(),[qe,Me,Pe,Ne]=Vl((()=>Ol)),Le=e=>{if(!ve(e,((e,t)=>[i,u].includes(t))))return!1;const t=e[i];return!(!N(t)&&t!=a||(tt(e[u])!=t&&me(e,u),0))},Ee=E,je=(t,l)=>(!e||nl(A,l)||pt(l))&&ve(t,((e,t)=>ze(l,t,e)),(()=>pt(l))),ze=(e,t,l,n)=>ve(n?l:De(l,e,t),((n,s)=>P($e(e,t,s,n),(e=>(l[s]=e,!0)),(()=>!1))),(()=>pt(e,t))),$e=(t,l,n,s)=>e?P(cl(cl(A,t),n),(e=>tt(s)!=e[i]?pt(t,l,n,s,e[u]):s),(()=>pt(t,l,n,s))):M(tt(s))?pt(t,l,n,s):s,Ae=(e,t)=>ve(t?e:Be(e),((t,l)=>P(Je(l,t),(t=>(e[l]=t,!0)),(()=>!1))),(()=>bt())),Je=(e,l)=>t?P(cl(D,e),(t=>tt(l)!=t[i]?bt(e,l,t[u]):l),(()=>bt(e,l))):M(tt(l))?bt(e,l):l,De=(e,t,l)=>(P(cl(J,t),(([n,s])=>{ol(n,((t,l)=>{he(e,l)||(e[l]=t)})),ol(s,(n=>{he(e,n)||pt(t,l,n)}))})),e),Be=e=>(t&&(ol(B,((t,l)=>{he(e,l)||(e[l]=t)})),ol(F,(t=>{he(e,t)||bt(t)}))),e),Fe=e=>bl(A,e,((e,t,l)=>{const n=ul(),s=kl();bl(pl(A,t,ul),l,((e,t,l)=>{ml(e,t,l),P(l[u],(e=>ml(n,t,e)),(()=>xl(s,t)))})),ml(J,t,[n,s])}),((e,t)=>{ml(A,t),ml(J,t)})),Qe=e=>bl(D,e,((e,t,l)=>{ml(D,t,l),P(l[u],(e=>ml(B,t,e)),(()=>xl(F,t)))}),((e,t)=>{ml(D,t),ml(B,t),il(F,t)})),He=e=>ge(e)?Gt():Bt(e),We=e=>bl(W,e,((e,t,l)=>Ge(t,l)),((e,t)=>st(t))),Ge=(e,t)=>bl(pl(W,e,(()=>(it(e,1),ml(Q,e,Tl()),ml(H,e,ul()),ul()))),t,((t,l,n)=>Ke(e,t,l,n)),((t,l)=>rt(e,t,l))),Ke=(e,t,l,n,s)=>bl(pl(t,l,(()=>(ut(e,l,1),ul()))),n,((t,n,s)=>Ue(e,l,t,n,s)),((n,r)=>at(e,t,l,n,r,s))),Ue=(e,t,l,n,s)=>{nl(l,n)||dt(e,t,n,1);const r=cl(l,n);s!==r&&(ct(e,t,n,r,s),ml(l,n,s))},Xe=(e,t,l,n,s)=>P(cl(t,l),(t=>Ue(e,l,t,n,s)),(()=>Ke(e,t,l,De({[n]:s},e,l)))),Ye=e=>ge(e)?Xt():Ft(e),Ze=e=>bl(G,e,((e,t,l)=>_e(t,l)),((e,t)=>ot(t))),_e=(e,t)=>{nl(G,e)||ht(e,1);const l=cl(G,e);t!==l&&(mt(e,l,t),ml(G,e,t))},et=e=>{var t;return null!=(t=cl(W,e))?t:Ge(e,{})},st=e=>Ge(e,{}),rt=(e,t,l)=>{const[,n]=cl(Q,e);n(l),Ke(e,t,l,{},!0)},at=(e,t,l,n,s,r)=>{var a;const o=cl(null==(a=cl(J,e))?void 0:a[0],s);if(!M(o)&&!r)return Ue(e,l,n,s,o);const i=t=>{ct(e,l,t,cl(n,t)),dt(e,l,t,-1),ml(n,t)};M(o)?i(s):hl(n,i),sl(n)&&(ut(e,l,-1),sl(ml(t,l))&&(it(e,-1),ml(W,e),ml(Q,e),ml(H,e)))},ot=e=>{const t=cl(B,e);if(!M(t))return _e(e,t);mt(e,cl(G,e)),ht(e,-1),ml(G,e)},it=(e,t)=>Fl(o,e,t),ut=(e,t,l)=>Fl(pl(x,e,ul),t,l)&&ml(k,e,pl(k,e,(()=>0))+l),dt=(e,t,l,n)=>{var s;const r=cl(H,e),a=null!=(s=cl(r,l))?s:0;(0==a&&1==n||1==a&&-1==n)&&Fl(pl(c,e,ul),l,n),ml(r,l,a!=-n?a+n:null),Fl(pl(pl(T,e,ul),t,ul),l,n)},ct=(e,t,l,n,s)=>{var a;pl(pl(pl(V,e,ul),t,ul),l,(()=>[n,0]))[1]=s,null==(a=r[3])||a.call(r,e,t,l,s)},ht=(e,t)=>Fl(O,e,t),mt=(e,t,l)=>{var n;pl(R,e,(()=>[t,0]))[1]=l,null==(n=r[4])||n.call(r,e,l)},pt=(e,t,l,n,s)=>(le(pl(pl(pl(q,e,ul),t,ul),l,(()=>[])),n),s),bt=(e,t,l)=>(le(pl($,e,(()=>[])),t),l),gt=(e,t,l)=>P(cl(cl(cl(V,e),t),l),(([e,t])=>[!0,e,t]),(()=>[!1,...$l(Mt(e,t,l))])),vt=e=>P(cl(R,e),(([e,t])=>[!0,e,t]),(()=>[!1,...$l(Lt(e))])),ft=e=>sl(q)||sl(we[e])?0:ol(e?wl(q):q,((t,l)=>ol(t,((t,n)=>ol(t,((t,s)=>Me(we[e],[l,n,s],t))))))),It=e=>sl($)||sl(Ce[e])?0:ol(e?Il($):$,((t,l)=>Me(Ce[e],[l],t))),yt=(e,t,l,n)=>{if(!sl(e))return Me(t,n,(()=>gl(e))),hl(e,((e,t)=>Me(l,[...null!=n?n:[],e],1==t))),1},wt=e=>{const t=Et();t!=l&&Me(K[e],void 0,t);const n=sl(oe[e]),s=sl(ce[e])&&sl(pe[e])&&sl(ae[e])&&sl(ie[e])&&sl(ne[e])&&sl(se[e])&&sl(re[e])&&n&&sl(X[e])&&sl(Y[e]),r=sl(fe[e])&&sl(ue[e])&&sl(te[e])&&sl(U[e]);if(!s||!r){const t=e?[Il(o),yl(c),Il(k),yl(x),wl(T),wl(V)]:[o,c,k,x,T,V];if(!s){yt(t[0],X[e],Y[e]),ol(t[1],((t,l)=>yt(t,ne[e],se[e],[l]))),ol(t[2],((t,l)=>{0!=t&&Me(re[e],[l],Vt(l))}));const l=kl();ol(t[3],((t,s)=>{yt(t,ae[e],ie[e],[s])&&!n&&(Me(oe[e],[s,null]),xl(l,s))})),n||ol(t[5],((t,n)=>{if(!nl(l,n)){const l=kl();ol(t,(e=>ol(e,(([t,n],s)=>n!==t?xl(l,s):il(e,s))))),ol(l,(t=>Me(oe[e],[n,t])))}})),ol(t[4],((t,l)=>ol(t,((t,n)=>yt(t,ce[e],pe[e],[l,n])))))}if(!r){let l;ol(t[5],((t,n)=>{let s;ol(t,((t,r)=>{let a;ol(t,(([t,o],i)=>{o!==t&&(Me(fe[e],[n,r,i],o,t,gt),l=s=a=1)})),a&&Me(ue[e],[n,r],gt)})),s&&Me(te[e],[n],gt)})),l&&Me(U[e],void 0,gt)}}},Ct=e=>{const t=Jt();t!=n&&Me(ke[e],void 0,t);const l=sl(Se[e])&&sl(Te[e]),s=sl(Ve[e])&&sl(xe[e]);if(!l||!s){const t=e?[Il(O),Il(R)]:[O,R];if(l||yt(t[0],Se[e],Te[e]),!s){let l;ol(t[1],(([t,n],s)=>{n!==t&&(Me(Ve[e],[s],n,t,vt),l=1)})),l&&Me(xe[e],void 0,vt)}}},kt=(e,...t)=>(rl((()=>e(...ee(t,S)))),Ol),xt=()=>fl(W),St=()=>dl(W),Tt=e=>dl(cl(H,S(e))),Vt=e=>_t(cl(W,S(e))),Ot=e=>dl(cl(W,S(e))),Rt=(e,t,l,n=0,s)=>{return ee(j(Z((r=cl(W,S(e)),a=(e,l)=>[M(t)?l:cl(e,S(t)),l],ee([...null!=(o=null==r?void 0:r.entries())?o:[]],(([e,t])=>a(t,e)))),(([e],[t])=>{return((null!=(n=e)?n:0)<(null!=(s=t)?s:0)?-1:1)*(l?-1:1);var n,s})),n,M(s)?s:n+s),(([,e])=>e));var r,a,o},qt=(e,t)=>dl(cl(cl(W,S(e)),S(t))),Mt=(e,t,l)=>cl(cl(cl(W,S(e)),S(t)),S(l)),Pt=()=>gl(G),Nt=()=>dl(G),Lt=e=>cl(G,S(e)),Et=()=>!sl(W),jt=e=>nl(W,S(e)),zt=(e,t)=>nl(cl(H,S(e)),S(t)),$t=(e,t)=>nl(cl(W,S(e)),S(t)),At=(e,t,l)=>nl(cl(cl(W,S(e)),S(t)),S(l)),Jt=()=>!sl(G),Dt=e=>nl(G,S(e)),Bt=e=>kt((()=>(e=>ve(e,je,pt))(e)?We(e):0)),Ft=e=>kt((()=>Ae(e)?Ze(e):0)),Qt=e=>{try{He(Ie(e))}catch(e){}return Ol},Ht=t=>kt((()=>{if((e=ve(t,(e=>ve(e,Le))))&&(Fe(t),!sl(W))){const e=xt();Gt(),Bt(e)}})),Wt=e=>kt((()=>{if(t=(e=>ve(e,Le))(e)){const l=Pt();Zt(),Xt(),t=!0,Qe(e),Ft(l)}})),Gt=()=>kt((()=>We({}))),Kt=e=>kt((e=>nl(W,e)?st(e):0),e),Ut=(e,t)=>kt(((e,t)=>P(cl(W,e),(l=>nl(l,t)?rt(e,l,t):0))),e,t),Xt=()=>kt((()=>Ze({}))),Yt=()=>kt((()=>{Fe({}),e=!1})),Zt=()=>kt((()=>{Qe({}),t=!1})),rl=(e,t)=>{if(-1!=s){Cl();const l=e();return Sl(t),l}},Cl=()=>{var e;return-1!=s&&s++,1==s&&(null==(e=r[0])||e.call(r),Me(Oe)),Ol},Sl=e=>{var t,a;return s>0&&(s--,0==s&&(s=1,ft(1),sl(V)||wt(1),It(1),sl(R)||Ct(1),(null==e?void 0:e(Ol))&&(ol(V,((e,t)=>ol(e,((e,l)=>ol(e,(([e],n)=>lt(Ol,t,l,n,e))))))),al(V),ol(R,(([e],t)=>nt(Ol,t,e))),al(R)),Me(Re[0],void 0),s=-1,ft(0),sl(V)||wt(0),It(0),sl(R)||Ct(0),null==(t=r[1])||t.call(r),Me(Re[1],void 0),null==(a=r[2])||a.call(r),s=0,l=Et(),n=Jt(),_([o,c,k,x,T,V,q,O,R,$],al))),Ol},Ol={getContent:()=>[xt(),Pt()],getTables:xt,getTableIds:St,getTable:e=>vl(cl(W,S(e))),getTableCellIds:Tt,getRowCount:Vt,getRowIds:Ot,getSortedRowIds:Rt,getRow:(e,t)=>gl(cl(cl(W,S(e)),S(t))),getCellIds:qt,getCell:Mt,getValues:Pt,getValueIds:Nt,getValue:Lt,hasTables:Et,hasTable:jt,hasTableCell:zt,hasRow:$t,hasCell:At,hasValues:Jt,hasValue:Dt,getTablesJson:()=>ye(W),getValuesJson:()=>ye(G),getJson:()=>ye([W,G]),getTablesSchemaJson:()=>ye(A),getValuesSchemaJson:()=>ye(D),getSchemaJson:()=>ye([A,D]),hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:e=>kt((()=>{const t=L(e)?e():e;Ee(t)&&(([e,t])=>{(ge(e)?Gt:Bt)(e),(ge(t)?Xt:Ft)(t)})(t)})),setTables:Bt,setTable:(e,t)=>kt((e=>je(t,e)?Ge(e,t):0),e),setRow:(e,t,l)=>kt(((e,t)=>ze(e,t,l)?Ke(e,et(e),t,l):0),e,t),addRow:(e,t,l=!0)=>rl((()=>{let n;return ze(e,n,t)&&(e=S(e),Ke(e,et(e),n=((e,t)=>{const[l]=cl(Q,e);let n;do{n=l(t)}while(nl(cl(W,e),n));return n})(e,l?1:0),t)),n})),setPartialRow:(e,t,l)=>kt(((e,t)=>{if(ze(e,t,l,1)){const n=et(e);be(l,((l,s)=>Xe(e,n,t,s,l)))}}),e,t),setCell:(e,t,l,n)=>kt(((e,t,l)=>P($e(e,t,l,L(n)?n(Mt(e,t,l)):n),(n=>Xe(e,et(e),t,l,n)))),e,t,l),setValues:Ft,setPartialValues:e=>kt((()=>Ae(e,1)?be(e,((e,t)=>_e(t,e))):0)),setValue:(e,t)=>kt((e=>P(Je(e,L(t)?t(Lt(e)):t),(t=>_e(e,t)))),e),applyChanges:e=>kt((()=>{be(e[0],((e,t)=>M(e)?Kt(t):be(e,((e,l)=>M(e)?Ut(t,l):be(e,((e,n)=>lt(Ol,t,l,n,e))))))),be(e[1],((e,t)=>nt(Ol,t,e)))})),setTablesJson:Qt,setValuesJson:e=>{try{Ye(Ie(e))}catch(e){}return Ol},setJson:e=>kt((()=>{try{const[t,l]=Ie(e);He(t),Ye(l)}catch(t){Qt(e)}})),setTablesSchema:Ht,setValuesSchema:Wt,setSchema:(e,t)=>kt((()=>{Ht(e),Wt(t)})),delTables:Gt,delTable:Kt,delRow:Ut,delCell:(e,t,l,n)=>kt(((e,t,l)=>P(cl(W,e),(s=>P(cl(s,t),(r=>nl(r,l)?at(e,s,t,r,l,n):0))))),e,t,l),delValues:Xt,delValue:e=>kt((e=>nl(G,e)?ot(e):0),e),delTablesSchema:Yt,delValuesSchema:Zt,delSchema:()=>kt((()=>{Yt(),Zt()})),transaction:rl,startTransaction:Cl,getTransactionChanges:()=>[gl(V,((e,t)=>-1===cl(o,t)?void 0:gl(e,((e,l)=>-1===cl(cl(x,t),l)?void 0:gl(e,(([,e])=>e),(e=>Bl(e)))),sl,ge)),sl,ge),gl(R,(([,e])=>e),(e=>Bl(e))),1],getTransactionLog:()=>[!sl(V),!sl(R),fl(V,Dl,Bl),fl(q),gl(R,Dl,Bl),gl($),gl(o),vl(x),fl(T),gl(O)],finishTransaction:Sl,forEachTable:e=>ol(W,((t,l)=>e(l,(e=>ol(t,((t,l)=>e(l,(e=>hl(t,e))))))))),forEachTableCell:(e,t)=>hl(cl(H,S(e)),t),forEachRow:(e,t)=>ol(cl(W,S(e)),((e,l)=>t(l,(t=>hl(e,t))))),forEachCell:(e,t,l)=>hl(cl(cl(W,S(e)),S(t)),l),forEachValue:e=>hl(G,e),addSortedRowIdsListener:(e,t,l,n,s,r,a)=>{let o=Rt(e,t,l,n,s);return qe((()=>{const a=Rt(e,t,l,n,s);var i,u,d;u=o,z(i=a)===z(u)&&(d=(e,t)=>u[t]===e,i.every(d))||(o=a,r(Ol,e,t,l,n,s,o))}),oe[a?1:0],[e,t],[St])},addStartTransactionListener:e=>qe(e,Oe),addWillFinishTransactionListener:e=>qe(e,Re[0]),addDidFinishTransactionListener:e=>qe(e,Re[1]),callListener:e=>(Ne(e),Ol),delListener:e=>(Pe(e),Ol),getListenerStats:()=>({hasTables:Al(K),tables:Al(U),tableIds:Al(X),hasTable:Al(Y),table:Al(te),tableCellIds:Al(ne),hasTableCell:Al(se,tl),rowCount:Al(re),rowIds:Al(ae),sortedRowIds:Al(oe),hasRow:Al(ie,tl),row:Al(ue,tl),cellIds:Al(ce,tl),hasCell:Al(pe,ll),cell:Al(fe,ll),invalidCell:Al(we,ll),hasValues:Al(ke),values:Al(xe),valueIds:Al(Se),hasValue:Al(Te),value:Al(Ve),invalidValue:Al(Ce),transaction:el(Oe)+Al(Re)}),isMergeable:()=>!1,createStore:Ql,addListener:qe,callListeners:Me,setInternalListeners:(e,t,l,n,s)=>r=[e,t,l,n,s]};return be({[d+m]:[0,K,[],()=>[Et()]],[m]:[0,U],[p]:[0,X],[d+h]:[1,Y,[St],e=>[jt(...e)]],[h]:[1,te,[St]],[h+I]:[1,ne,[St]],[d+h+f]:[2,se,[St,Tt],e=>[zt(...e)]],[g]:[1,re,[St]],[v]:[1,ae,[St]],[d+b]:[2,ie,[St,Ot],e=>[$t(...e)]],[b]:[2,ue,[St,Ot]],[I]:[2,ce,[St,Ot]],[d+f]:[3,pe,[St,Ot,qt],e=>[At(...e)]],[f]:[3,fe,[St,Ot,qt],e=>$l(Mt(...e))],InvalidCell:[3,we],[d+w]:[0,ke,[],()=>[Jt()]],[w]:[0,xe],[C]:[0,Se],[d+y]:[1,Te,[Nt],e=>[Dt(...e)]],[y]:[1,Ve,[Nt],e=>$l(Lt(e[0]))],InvalidValue:[1,Ce]},(([e,t,l,n],s)=>{Ol["add"+s+"Listener"]=(...s)=>qe(s[e],t[s[e+1]?1:0],e>0?j(s,0,e):void 0,l,n)})),de(Ol)};exports.Inspector=({position:e="right",open:l=!1})=>{const n=t.useCreateStore(Ql),s=ke.indexOf(e);return t.useCreatePersister(n,(e=>{return t=we,l=sessionStorage,((e,t,l,n,s,r,a,o={},i=0,u=[])=>{let d,c,h,m=0,p=0,b=0;pl(Ll,u,(()=>0)),pl(El,u,(()=>[]));const g=ul(),[v,f,I,y,w]=((e=1,t,l)=>1!=e&&t.isMergeable()?[1,t.getMergeableContent,()=>t.getTransactionMergeableChanges(!l),([[e],[t]])=>!ge(e)||!ge(t),t.setDefaultContent]:2!=e?[0,t.getContent,t.getTransactionChanges,([e,t])=>!ge(e)||!ge(t),t.setContent]:$("Store type not supported by this Persister"))(a,e,i),[C,k,x]=Vl((()=>N)),S=e=>{e!=m&&(m=e,k(g,void 0,m))},T=t=>{(v&&E(null==t?void 0:t[0])?1===(null==t?void 0:t[2])?e.applyMergeableChanges:e.setMergeableContent:1===(null==t?void 0:t[2])?e.applyChanges:e.setContent)(t)},V=e=>Nl(void 0,null,(function*(){return 2!=m&&(S(1),p++,yield P((()=>Nl(void 0,null,(function*(){try{const l=yield t();E(l)?T(l):e?w(e):$("Content is not an array: "+l)}catch(t){e&&w(e)}S(0)}))))),N})),O=()=>(c&&(s(c),c=void 0),N),R=e=>Nl(void 0,null,(function*(){return 1!=m&&(S(2),b++,yield P((()=>Nl(void 0,null,(function*(){try{yield l(f,e)}catch(e){}S(0)}))))),N})),q=()=>(h&&(e.delListener(h),h=void 0),N),P=(...e)=>Nl(void 0,null,(function*(){return le(cl(El,u),...e),yield Nl(void 0,null,(function*(){if(!cl(Ll,u)){for(ml(Ll,u,1);!M(d=ne(cl(El,u)));)try{yield d()}catch(e){}ml(Ll,u,0)}})),N})),N=((e,t)=>{for(var l in t||(t={}))ql.call(t,l)&&Pl(e,l,t[l]);if(Rl)for(var l of Rl(t))Ml.call(t,l)&&Pl(e,l,t[l]);return e})({load:V,startAutoLoad:e=>Nl(void 0,null,(function*(){O(),yield V(e);try{c=yield n(((e,t)=>Nl(void 0,null,(function*(){t||e?2!=m&&(S(1),p++,T(null!=t?t:e),S(0)):yield V()}))))}catch(e){}return N})),stopAutoLoad:O,isAutoLoading:()=>!M(c),save:R,startAutoSave:()=>Nl(void 0,null,(function*(){return q(),yield R(),h=e.addDidFinishTransactionListener((()=>{const e=I();y(e)&&R(e)})),N})),stopAutoSave:q,isAutoSaving:()=>!M(h),getStatus:()=>m,addStatusListener:e=>C(e,g),delListener:t=>(x(t),e),schedule:P,getStore:()=>e,destroy:()=>(cl(El,u).splice(0,void 0),O().stopAutoSave()),getStats:()=>({loads:p,saves:b})},o);return de(N)})(e,(()=>jl(void 0,null,(function*(){return e=l.getItem(t),Ie(e,((e,t)=>"￼"===t?void 0:t));var e}))),(e=>jl(void 0,null,(function*(){return l.setItem(t,(n=e(),fe(n,((e,t)=>void 0===t?"￼":t))));var n}))),(e=>{const n=n=>{if(n.storageArea===l&&n.key===t)try{e(Ie(n.newValue))}catch(t){e()}};return T.addEventListener(zl,n),n}),(e=>T.removeEventListener(zl,e)),0,3,{getStorageName:()=>t});var t,l}),void 0,(e=>{return t=function*(){yield e.load([{},{position:-1==s?1:s,open:!!l}]),yield e.startAutoSave()},new Promise(((e,l)=>{var n=e=>{try{r(t.next(e))}catch(e){l(e)}},s=e=>{try{r(t.throw(e))}catch(e){l(e)}},r=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,s);r((t=t.apply(void 0,null)).next())}));var t})),B(J,null,B("aside",{id:we},B(_e,{s:n}),B(Yt,{s:n})),B("style",null,Ze))};
