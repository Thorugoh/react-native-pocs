const e=e=>typeof e,l="tinybase",t="",a=",",n=e(t),o=e(!0),d=e(0),r="type",s="default",I="Listener",u="get",$="add",c="Has",i="Ids",b="Table",p=b+"s",C=b+i,h="Row",m=h+i,g="Sorted"+h+i,f="Cell",w=f+i,y="Value",v=y+"s",T=y+i,x="Transaction",V="Partial",R=(e,l=t,a)=>e.split(l,a);var P=(e,l,t)=>new Promise(((a,n)=>{var o=e=>{try{r(t.next(e))}catch(e){n(e)}},d=e=>{try{r(t.throw(e))}catch(e){n(e)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,d);r((t=t.apply(e,l)).next())}));const A=Promise,k=isFinite,S=e=>null==e,O=(e,l,t)=>S(e)?null==t?void 0:t():l(e),E=e=>e==n||e==o,D=l=>e(l)==n,N=e=>Array.isArray(e),L=(e,l,t)=>e.slice(l,t),j=e=>e.length,G=e=>P(void 0,null,(function*(){return A.all(e)})),H=l=>{const t=e(l);return E(t)||t==d&&k(l)?t:void 0},M=(e,l)=>e.every(l),J=(e,l)=>e.sort(l),z=(e,l)=>e.forEach(l),W=(e,l=t)=>e.join(l),B=(e,l)=>e.map(l),F=(e,l)=>e.filter(l),U=(e,...l)=>e.push(...l),_=e=>e.pop(),Z=(e,...l)=>e.unshift(...l),Q=e=>e.shift(),q=Object,K=e=>q.getPrototypeOf(e),X=q.entries,Y=e=>!S(e)&&O(K(e),(e=>e==q.prototype||S(K(e))),(()=>!0)),ee=q.keys,le=q.freeze,te=(e,l)=>B(X(e),(([e,t])=>l(t,e))),ae=e=>j(ee(e)),ne=e=>Y(e)&&0==ae(e),oe=(e,l)=>{var t;return null!=(t=null==e?void 0:e.has(l))&&t},de=e=>{var l;return[...null!=(l=null==e?void 0:e.values())?l:[]]},re=(e,l)=>null==e?void 0:e.forEach(l),se=(e,l)=>null==e?void 0:e.delete(l),Ie=e=>new Map(e),ue=(e,l)=>null==e?void 0:e.get(l),$e=(e,l)=>re(e,((e,t)=>l(t,e))),ce=(e,l)=>{var t;return B([...null!=(t=null==e?void 0:e.entries())?t:[]],(([e,t])=>l(t,e)))},ie=(e,l,t)=>S(t)?(se(e,l),e):null==e?void 0:e.set(l,t),be=(e,l,t,a)=>(oe(e,l)||ie(e,l,t()),ue(e,l)),pe=e=>e.toUpperCase(),Ce=e=>e.toLowerCase(),he="a ",me="A function for",ge=", and registers a listener so that any changes to that result will cause a re-render",fe="Callback",we="Changes",ye="Count",ve="Del",Te="Deps",xe=Te+"?: React.DependencyList",Ve="doRollback?: DoRollback",Re="actions: () => Return, "+Ve,Pe="export",Ae="Id",ke="Invalid",Se="Json",Oe=Ce(I),Ee="?: ",De=" | undefined",Ne="NonNullable",Le="Props",je="Provider",Ge=`Registers a ${Oe} that will be called`,He="Represents",Me="rowId: "+Ae,Je="Schema",ze="Set",We=", descending?: boolean, offset?: number, limit?: number",Be="[]",Fe="the Store",Ue=Ce(x),_e="Execute a "+Ue+" to make multiple mutations",Ze="Explicitly starts a "+Ue,Qe="Explicitly finishes a "+Ue,qe="the end of the "+Ue,Ke="void",Xe=" => "+Ke,Ye="WhenSet",el=" when setting it",ll=he+"string serialization of",tl=" ",al="Gets a callback that can ",nl="the ",ol=" the schema for",dl=(e=0)=>e?"the existence of ":"",rl=(e=0,l=0,a=0)=>dl(a)+`the ${xl[e]}content of`+(l?tl+Fe:t),sl=(e=0,l,a=0,n=0)=>yl[l]+tl+dl(n)+rl(e,1)+(a?" when setting it":t),Il=(e,l=0)=>He+` a Row when ${l?"s":"g"}etting ${rl()} the '${e}' `+b,ul=(e,l,t=0)=>`Gets ${t?"sorted, paginated":"the"} Ids of the ${e}s in `+l,$l=(e,l)=>`Calls a function for each ${e} in `+l,cl=e=>"The props passed to a component that renders "+e,il=e=>"A function that takes "+e,bl=(e,l=0,t=0)=>me+" listening to changes to "+dl(t)+Tl[e]+" in "+Tl[l],pl=(e,l,a=0,n=0)=>Ge+" whenever "+dl(n)+Tl[e]+" in "+Tl[l]+" change"+(a?t:"s"),Cl=e=>`the '${e}' `+b,hl=e=>"the specified Row in "+Cl(e),ml=(e,l=0,t=0)=>yl[l]+tl+rl(0,0,t)+tl+Cl(e),gl=(e,l=0,t=0)=>yl[l]+` ${rl(0,0,t)} `+hl(e),fl=(e,l,t=0,a=0)=>yl[t]+tl+dl(a)+`the '${l}' Cell for `+hl(e),wl=(e,l=0,t=0)=>yl[l]+tl+dl(t)+`the '${e}' Value`,yl=["Gets","Checks existence of","Sets","Deletes","Sets part of",He,"Gets "+ll,"Sets "+ll,Ge+" whenever",al+"set",al+"add",al+"set part of",al+"delete","Renders","Gets "+ll+ol,"Sets"+ol,"Deletes"+ol],vl=[u,"has","set","del","set","forEach",$,t],Tl=[Fe,p,nl+b+tl+i,he+b,nl+h+tl+i,he+h,nl+f+tl+i,he+f,"invalid Cell changes",v,nl+y+tl+i,he+y,"invalid Value changes",nl+"sorted "+h+tl+i,nl+f+tl+i+" anywhere",nl+"number of Rows",he+f+" anywhere"],xl=[t,"tabular ","keyed value "],Vl=e=>new Set(N(e)||S(e)?e:[e]),Rl=(e,l)=>null==e?void 0:e.add(l),Pl=/[^A-Za-z]+/,Al=/[^A-Za-z0-9]+/,kl=/^( *)\/\*\* *(.*?) *\*\/$/gm,Sl=e=>e.includes(a),Ol=(e,l,t,a=1)=>{const n=`${l}${1==a?"":a}`;return oe(e,n)?Ol(e,l,t,a+1):(ie(e,n,t),n)},El=e=>e.replace(kl,((e,l,t)=>{const a=77-j(l);return`${l}/**\n${t.replace(RegExp(`([^\\n]{1,${a}})(\\s|$)`,"g"),l+" * $1\n")}${l} */`})),Dl=e=>e.flat(1e3),Nl=(e,l=0)=>W(B(R(e,Al),((e,t)=>(t>0||l?pe:Ce)(L(e,0,1))+L(e,1)))),Ll=e=>pe(W(R(e&&!Pl.test(e[0])?e:" "+e,Al),"_")),jl=e=>`/** ${e}. */`,Gl=(...e)=>W(F(e,(e=>e)),", "),Hl=(...e)=>"{"+W(e,"; ")+"}",Ml=(...e)=>Hl(...B(e,(e=>"readonly "+e))),Jl=()=>{const e=[Ie(),Ie(),Ie(),Ie()],l=Ie(),a=Ie(),n=e=>{const l=e.indexOf(" as ");return-1!=l?L(e,l+4):e};return[(...e)=>W(Dl(e),"\n"),(l,t,...a)=>z(a,(a=>z([0,1],(n=>(null!=l?l:n)==n?Rl(be(e[n],t,Vl),a):0)))),(e,a,n,o=t,d=1)=>Ol(l,e,[a,n,o,d]),(e,l,t)=>Ol(a,e,N(t)?[`(${l}) => {`,t,"}"]:[`(${l}) => ${t}`]),(e,l)=>ue(a,e)===l?e:Ol(a,e,l),(l=0)=>B([...J(ce(e[l],((e,l)=>`import {${W(J(de(e),((e,l)=>n(e)>n(l)?1:-1)),", ")}} from '${l}';`)),((e,l)=>Sl(e)!=Sl(l)?Sl(e)?-1:1:e>l?1:-1)),t],(e=>e.replace("{React}","React"))),()=>ce(l,(([e,l,a,n],o)=>[jl(l),`${n?Pe+" ":t}type ${o}${a} = ${e};`,t])),()=>ce(a,((e,l)=>(e=N(e)?e:[e],U(e,_(e)+";"),[`const ${l} = ${Q(e)}`,e,t])))]},zl=(e,l)=>{const t=new WeakMap;return l=>(t.has(l)||t.set(l,e(l)),t.get(l))},Wl=(e,l,t)=>[l=>te(e,((e,a)=>l(a,Nl(a,1),t(Ll(a),`'${a}'`)))),(l,a)=>te(e[l],((e,l)=>a(l,e[r],e[s],t(Ll(l),`'${l}'`),Nl(l,1)))),e=>te(l,((l,a)=>e(a,l[r],l[s],t(Ll(a),`'${a}'`),Nl(a,1))))],Bl=(e,l,a,n)=>[(n,o)=>{const d=n+": "+o,r=e(p,Hl(...l((e=>`'${e}'?: {[rowId: Id]: `+Hl(...a(e,((e,l,a)=>`'${e}'${S(a)?"?":t}: ${l}`)))+"}"))),sl(1,5)),s=e(p+Ye,Hl(...l((e=>`'${e}'?: {[rowId: Id]: `+Hl(...a(e,((e,l)=>`'${e}'?: ${l}`)))+"}"))),sl(1,5,1)),u=e(b+Ae,"keyof "+r,"A "+b+" Id in "+Fe),$=`<TId extends ${u}>`,i=e(b,Ne+`<${r}[TId]>`,"A "+b+" in "+Fe,$),y=e(b+Ye,Ne+`<${s}[TId]>`,"A "+b+" in "+Fe+el,$),v=e(h,i+"<TId>[Id]","A "+h+" in a "+b,$),T=e(h+Ye,y+"<TId>[Id]","A "+h+" in a "+b+el,$),x=e(f+Ae,`Extract<keyof ${v}<TId>, Id>`,"A "+f+" Id in a "+h,$),V=e(f,Ne+`<${r}[TId]>[Id][CId]`,"A "+f+" in a "+h,`<TId extends ${u}, CId extends ${x}<TId>>`),R=e("CellIdCellArray",`CId extends ${x}<TId> ? [cellId: CId, cell: ${V}<TId, CId>] : never`,f+" Ids and types in a "+h,`<TId extends ${u}, CId = ${x}<TId>>`,0),P=e(f+fe,`(...[cellId, cell]: ${R}<TId>)`+Xe,il(he+f+" Id, and "+f),$),A=e(h+fe,"(rowId: Id, forEachCell: (cellCallback: CellCallback<TId>) "+Xe+") "+Xe,il(he+h+" Id, and a "+f+" iterator"),$),k=e(b+f+fe,`(cellId: ${x}<TId>, count: number) `+Xe,il(he+f+" Id, and count of how many times it appears"),$),O=e("TableIdForEachRowArray",`TId extends ${u} ? [tableId: TId, forEachRow: (rowCallback: ${A}<TId>)${Xe}] : never`,b+" Ids and callback types",`<TId = ${u}>`,0),E=e(b+fe,`(...[tableId, forEachRow]: ${O})`+Xe,il(he+b+" Id, and a "+h+" iterator"),t),D=e("TableIdRowIdCellIdArray",`TId extends ${u} ? [tableId: TId, rowId: Id, cellId: ${x}<TId>] : never`,"Ids for GetCellChange",`<TId = ${u}>`,0),N=e("GetCellChange",`(...[tableId, rowId, cellId]: ${D}) => CellChange`,me+" returning information about any Cell's changes during a "+Ue),L=e(c+p+I,`(${d}, hasTables: boolean)`+Xe,bl(1,0,1)),j=e(p+I,`(${d}, getCellChange: ${N}${De})`+Xe,bl(1)),G=e(C+I,`(${d})`+Xe,bl(2)),H=e(c+b+I,`(${d}, tableId: ${u}, hasTable: boolean)`+Xe,bl(3,0,1)),M=e(b+I,`(${d}, tableId: ${u}, getCellChange: ${N}${De})`+Xe,bl(3)),J=e(b+w+I,`(${d}, tableId: ${u})`+Xe,bl(14,3)),z=e("HasTableCellListenerArgsArrayInner",`CId extends ${x}<TId> ? [${d}, tableId: TId, cellId: CId, hasTableCell: boolean] : never`,"Cell args for HasTableCellListener",`<TId extends ${u}, CId = ${x}<TId>>`,0),W=e("HasTableCellListenerArgsArrayOuter",`TId extends ${u} ? `+z+"<TId> : never","Table args for HasTableCellListener",`<TId = ${u}>`,0),B=e(c+b+f+I,`(...[${n}, tableId, cellId, hasTableCell]: `+W+")"+Xe,bl(16,3,1)),F=e(h+"Count"+I,`(${d}, tableId: ${u})`+Xe,bl(15,3)),U=e(m+I,`(${d}, tableId: ${u})`+Xe,bl(4,3)),_=e(g+I,"("+Gl(d,"tableId: "+u,"cellId: Id"+De,"descending: boolean","offset: number","limit: number"+De,"sortedRowIds: Ids")+")"+Xe,bl(13,3)),Z=e(c+h+I,"("+Gl(""+d,"tableId: "+u,Me,"hasRow: boolean")+")"+Xe,bl(5,3,1)),Q=e(h+I,"("+Gl(""+d,"tableId: "+u,Me,`getCellChange: ${N}${De}`)+")"+Xe,bl(5,3)),q=e(w+I,"("+Gl(""+d,"tableId: "+u,Me)+")"+Xe,bl(6,5)),K=e("HasCellListenerArgsArrayInner",`CId extends ${x}<TId> ? [${d}, tableId: TId, ${Me}, cellId: CId, hasCell: boolean] : never`,"Cell args for HasCellListener",`<TId extends ${u}, CId = ${x}<TId>>`,0),X=e("HasCellListenerArgsArrayOuter",`TId extends ${u} ? `+K+"<TId> : never","Table args for HasCellListener",`<TId = ${u}>`,0),Y=e(c+f+I,`(...[${n}, tableId, rowId, cellId, hasCell]: `+X+")"+Xe,bl(7,5,1)),ee=e("CellListenerArgsArrayInner",`CId extends ${x}<TId> ? [${d}, tableId: TId, ${Me}, cellId: CId, newCell: ${V}<TId, CId> ${De}, oldCell: ${V}<TId, CId> ${De}, getCellChange: ${N} ${De}] : never`,"Cell args for CellListener",`<TId extends ${u}, CId = ${x}<TId>>`,0),le=e("CellListenerArgsArrayOuter",`TId extends ${u} ? `+ee+"<TId> : never","Table args for CellListener",`<TId = ${u}>`,0);return[r,s,u,i,y,v,T,x,V,P,A,k,E,L,j,G,H,M,J,B,F,U,_,Z,Q,q,Y,e(f+I,`(...[${n}, tableId, rowId, cellId, newCell, oldCell, getCellChange]: ${le})`+Xe,bl(7,5)),e(ke+f+I,`(${d}, tableId: Id, ${Me}, cellId: Id, invalidCells: any[])`+Xe,bl(8))]},(l,a)=>{const o=l+": "+a,d=e(v,Hl(...n(((e,l,a)=>`'${e}'${S(a)?"?":t}: ${l}`))),sl(2,5)),r=e(v+Ye,Hl(...n(((e,l)=>`'${e}'?: ${l}`))),sl(2,5,1)),s=e(y+Ae,"keyof "+d,"A "+y+" Id in "+Fe),u=e(y,Ne+`<${d}[VId]>`,"A "+y+" Id in "+Fe,`<VId extends ${s}>`),$=e("ValueIdValueArray",`VId extends ${s} ? [valueId: VId, value: ${u}<VId>] : never`,y+" Ids and types in "+Fe,`<VId = ${s}>`,0),i=e(y+fe,`(...[valueId, value]: ${$})`+Xe,il(he+y+" Id, and "+y)),b=e("GetValueChange",`(valueId: ${s}) => ValueChange`,me+" returning information about any Value's changes during a "+Ue),p=e(c+v+I,`(${o}, hasValues: boolean)`+Xe,bl(9,0,1)),C=e(v+I,`(${o}, getValueChange: ${b}${De})`+Xe,bl(9)),h=e(T+I,`(${o})`+Xe,bl(10)),m=e(c+y+I,`(${o}, valueId: ValueId, hasValue: boolean)`+Xe,bl(11,0,1)),g=e("ValueListenerArgsArray",`VId extends ${s} ? [${o}, valueId: VId, newValue: ${u}<VId> ${De}, oldValue: ${u}<VId> ${De}, getValueChange: ${b} ${De}] : never`,"Value args for ValueListener",`<VId = ${s}>`,0);return[d,r,s,u,i,p,C,h,m,e(y+I,`(...[${l}, valueId, newValue, oldValue, getValueChange]: `+g+")"+Xe,bl(11)),e(ke+y+I,`(${o}, valueId: Id, invalidValues: any[])`+Xe,bl(12))]},(l,t)=>e(x+I,`(${l}: ${t})`+Xe,me+" listening to the completion of a "+Ue)],Fl=(e,l=t,a=t)=>`store.${e}(${l})`+(a?" as "+a:t),Ul=(e,l=t)=>`fluent(() => ${Fl(e,l)})`,_l=(e,l=t,a=t)=>`store.${e}(${l?l+", ":t}proxy(listener)${a?", "+a:t})`,Zl=(e,a,n)=>{const[d,u,R,P,A,k,O,E]=Jl(),[N,L,j]=Wl(e,a,A),[G,H,M]=Bl(R,N,L,j),J=Ie(),B=(e=0)=>ce(J,(([l,a,n,o,d],r)=>{const s=e?[r+`: ${d}(${l}): ${a} => ${n},`]:[r+d+`(${l}): ${a};`];return e||Z(s,jl(o)),U(s,t),s})),F=(e,l,a,n,o,d=t)=>Ol(J,e,[l,a,n,o,d]),_=(e,l,a,n,o,d=t,r=t,s=t)=>F(vl[e]+l+(4==e?V:t)+a,d,n,(n==K?Ul:Fl)(vl[e]+(4==e?V:t)+a,r,e?void 0:n),o,s),Q=(e,l,a,n=t,o=t,d=1,r=t)=>F($+e+I,(n?n+", ":t)+Oe+": "+l+(d?", mutator?: boolean":t),Ae,_l($+e+I,o,d?"mutator":t),a,r),q=`./${Nl(n)}.d`,K=Nl(n,1),X=Nl(K),Y=[],ee=Ie();let le=[],te=[];if(u(1,q,K,`create${K} as create${K}Decl`),ne(e))u(null,l,p);else{u(0,l,"CellChange"),u(null,l,i);const[e,a,n,d,I,$,y,v,T,x,V,P,k,O,E,j,H,M,J,B,F,Z,te,ae,ne,oe,re,se,$e]=G(X,K),ce=Ie();N(((e,l)=>{const t=`<'${e}'>`,a=[R(l+b,d+t,He+` the '${e}' `+b),R(l+b+Ye,I+t,He+` the '${e}' `+b+el),R(l+h,$+t,Il(e)),R(l+h+Ye,y+t,Il(e,1)),R(l+f+Ae,v+t,`A Cell Id for the '${e}' `+b),R(l+f+fe,x+t,il(`a Cell Id and value from a Row in the '${e}' `+b)),R(l+h+fe,V+t,il(`a Row Id from the '${e}' Table, and a Cell iterator`)),R(l+b+f+fe,P+t,il(`a Cell Id from anywhere in the '${e}' Table, and a count of how many times it appears`))];ie(ce,e,a),u(1,q,...a)})),u(1,q,e,a,n,v,k,O,E,j,H,M,J,B,F,Z,te,ae,ne,oe,re,se,$e),le=[e,a,n,v,O,E,j,H,M,J,B,F,Z,te,ae,ne,oe,re,se,ce],z([[e],[o],[K,"tables: "+a,"tables"],[K]],(([e,l,a],n)=>_(n,t,p,e,sl(1,n),l,a))),_(0,t,C,n+Be,ul(b,Fe)),_(5,t,b,Ke,$l(b,Fe),"tableCallback: "+k,"tableCallback as any"),N(((e,l,a)=>{const[n,d,r,s,I,u,$,c]=ue(ce,e);z([[n],[o],[K,"table: "+d,", table"],[K]],(([n,o,d=t],r)=>_(r,l,b,n,ml(e,r),o,a+d))),_(0,l,b+w,i,ul(f,"the whole of "+Cl(e)),t,a),_(5,l,b+f,Ke,$l(b+f,"the whole of "+Cl(e)),"tableCellCallback: "+c,a+", tableCellCallback as any"),_(0,l,h+ye,"number","Gets the number of Rows in the "+Cl(e),t,a),_(0,l,m,i,ul(h,Cl(e)),t,a),_(0,l,g,i,ul(h,Cl(e),1),"cellId?: "+I+We,a+", cellId, descending, offset, limit"),_(5,l,h,Ke,$l(h,Cl(e)),"rowCallback: "+$,a+", rowCallback as any"),z([[r],[o],[K,", row: "+s,", row"],[K],[K,", partialRow: "+s,", partialRow"]],(([n,o=t,d=t],r)=>_(r,l,h,n,gl(e,r),Me+o,a+", rowId"+d))),_(6,l,h,Ae+De,"Add a new Row to "+Cl(e),"row: "+s+", reuseIds?: boolean",a+", row, reuseIds"),_(0,l,w,I+Be,ul(f,hl(e)),Me,a+", rowId"),_(5,l,f,Ke,$l(f,hl(e)),Me+", cellCallback: "+u,a+", rowId, cellCallback as any"),L(e,((n,d,r,s,I)=>{const u="Map"+Nl(d,1);ie(ee,d,u);const $=d+(S(r)?De:t);z([[$],[o],[K,`, cell: ${d} | `+u,", cell as any"],[K]],(([o,d=t,r=t],u)=>_(u,l+I,f,o,fl(e,n,u),Me+d,a+", rowId, "+s+r))),_(1,l+I,b+f,o,yl[1]+` the '${n}' Cell anywhere in `+Cl(e),t,a+", "+s)}))})),_(0,t,p+Se,Se,sl(1,6)),_(2,t,p+Se,K,sl(1,7),"tablesJson: "+Se,"tables"+Se),Q(c+p,O,sl(1,8,0,1)+" changes"),Q(p,E,sl(1,8)+" changes"),Q(C,j,pl(2,0,1)),Q(c+b,H,pl(3,0,0,1),`tableId: ${n} | null`,"tableId"),Q(b,M,pl(3,0),`tableId: ${n} | null`,"tableId"),Q(b+w,J,pl(14,3,1),`tableId: ${n} | null`,"tableId"),Q(c+b+f,B,pl(16,3,0,1),`tableId: ${n} | null, cellId: ${W(N((e=>{var l,a;return null!=(a=null==(l=ue(ce,e))?void 0:l[4])?a:t}))," | ")} | null`,"tableId,  cellId"),Q(h+ye,F,pl(15,3),`tableId: ${n} | null`,"tableId"),Q(m,Z,pl(4,3,1),`tableId: ${n} | null`,"tableId"),Q(g,te,pl(13,3,1),Gl("tableId: TId",`cellId: ${v}<TId>`+De,"descending: boolean","offset: number","limit: number"+De),Gl("tableId","cellId","descending","offset","limit"),1,"<TId extends TableId>"),Q(c+h,ae,pl(5,3,0,1),`tableId: ${n} | null, rowId: IdOrNull`,"tableId, rowId"),Q(h,ne,pl(5,3),`tableId: ${n} | null, rowId: IdOrNull`,"tableId, rowId"),Q(w,oe,pl(6,5,1),`tableId: ${n} | null, rowId: IdOrNull`,"tableId, rowId"),Q(c+f,re,pl(7,5,0,1),`tableId: ${n} | null, rowId: IdOrNull, cellId: ${W(N((e=>{var l,a;return null!=(a=null==(l=ue(ce,e))?void 0:l[4])?a:t}))," | ")} | null`,"tableId, rowId, cellId"),Q(f,se,pl(7,5),`tableId: ${n} | null, rowId: IdOrNull, cellId: ${W(N((e=>{var l,a;return null!=(a=null==(l=ue(ce,e))?void 0:l[4])?a:t}))," | ")} | null`,"tableId, rowId, cellId"),Q(ke+f,$e,Ge+" whenever an invalid Cell change was attempted","tableId: IdOrNull, rowId: IdOrNull, cellId: IdOrNull","tableId, rowId, cellId"),u(1,q,...de(ee)),U(Y,".set"+p+Je+"({",Dl(N(((e,l,a)=>[`[${a}]: {`,...L(e,((e,l,a,n)=>`[${n}]: {[${A(Ll(r),`'${r}'`)}]: ${A(Ll(l),`'${l}'`)}${S(a)?t:`, [${A(Ll(s),`'${s}'`)}]: `+(D(a)?A(Ll(a),`'${a}'`):a)}},`)),"},"]))),"})")}if(ne(a))u(null,l,v);else{const[e,a,n,d,I,$,i,b,p,C,h]=H(X,K);u(1,q,e,a,n,I,$,i,b,p,C,h),te=[e,a,n,$,i,b,p,C],z([[e],[o],[K,"values: "+a,"values"],[K],[K,"partialValues: "+a,"partialValues"]],(([e,l,a],n)=>_(n,t,v,e,sl(2,n),l,a))),_(0,t,T,n+Be,ul(y,Fe)),_(5,t,y,"void",$l(y,Fe),"valueCallback: "+I,"valueCallback as any"),j(((e,l,a,n,d)=>{const r="Map"+Nl(l,1);ie(ee,l,r),z([[l],[o],[K,`value: ${l} | `+r,", value as any"],[K]],(([l,a,o=t],r)=>_(r,d,y,l,wl(e,r),a,n+o)))})),_(0,t,v+Se,Se,sl(2,6)),_(2,t,v+Se,K,sl(2,7),"valuesJson: "+Se,"values"+Se),Q(c+v,$,sl(2,8,0,1)+" changes"),Q(v,i,sl(2,8)+" changes"),Q(T,b,pl(10,0,1)),Q(c+y,p,pl(11,0,0,1),`valueId: ${n} | null`,"valueId"),Q(y,C,pl(11,0),`valueId: ${n} | null`,"valueId"),Q(ke+y,h,Ge+" whenever an invalid Value change was attempted","valueId: IdOrNull","valueId"),u(1,q,...de(ee)),u(0,l,"ValueChange"),U(Y,".set"+v+Je+"({",j(((e,l,a,n)=>[`[${n}]: {[${A(Ll(r),`'${r}'`)}]: ${A(Ll(l),`'${l}'`)}${S(a)?t:`, [${A(Ll(s),`'${s}'`)}]: `+(D(a)?A(Ll(a),`'${a}'`):a)}},`])),"})")}_(0,t,"Content",`[${p}, ${v}]`,sl(0,0)),_(2,t,"Content",K,sl(0,2),`[tables, values]: [${p}, ${v}]`,"[tables, values]"),_(7,t,"applyChanges",K,`Applies a set of ${we} to the Store`,"changes: "+we,"changes"),$e(ee,((e,l)=>R(l,`(cell: ${e}${De}) => `+e,`Takes a ${e} Cell value and returns another`))),u(null,l,"DoRollback",Ae,"IdOrNull",Se,"Store",we),_(0,t,Se,Se,sl(0,6)),_(2,t,Se,K,sl(0,7),"tablesAndValuesJson: "+Se,"tablesAndValuesJson"),_(7,t,Ue,"Return",_e,Re,"actions, doRollback","<Return>"),_(7,t,"start"+x,K,Ze),_(7,t,"finish"+x,K,Qe,Ve,"doRollback");const ae=M(X,K);return Q("Start"+x,ae,Ge+" just before the start of the "+Ue,t,t,0),Q("WillFinish"+x,ae,Ge+" just before "+qe,t,t,0),Q("DidFinish"+x,ae,Ge+" just after "+qe,t,t,0),_(7,t,"call"+I,K,"Manually provoke a listener to be called","listenerId: Id","listenerId"),_(3,t,I,K,"Remove a listener that was previously added to "+Fe,"listenerId: Id","listenerId"),F("getStore",t,"Store","store",yl[0]+" the underlying Store object"),u(1,l,"createStore"),u(1,q,K,`create${K} as create${K}Decl`,ae),A("store",["createStore()",...Y]),P("fluent","actions: () => Store",["actions();",`return ${X};`]),P("proxy","listener: any",`(_: Store, ...params: any[]) => listener(${X}, ...params)`),A(X,["{",...B(1),"}"]),[d(...k(0),...O(),Pe+" interface "+K+" {",...B(0),"}",t,jl(`Creates a ${K} object`),Pe+" function create"+K+"(): "+K+";"),d(...k(1),Pe+" const create"+K+": typeof create"+K+"Decl = () => {",...E(),`return Object.freeze(${X});`,"};"),le,te]},Ql=e=>u+e,ql=e=>Gl(Ql(e),Ql(e)+Te),Kl="debugIds?: boolean",Xl="debugIds={debugIds}",Yl="then"+xe,et="Parameter",lt=": (parameter: "+et+", store: Store) => ",tt="const contextValue = useContext(Context);",at=", based on a parameter",nt=": ",ot="<"+et+",>",dt=et+"ized"+fe+"<"+et+">",rt="rowId",st="rowId={rowId}",It=", separator, debugIds",ut="separator?: ReactElement | string",$t="then?: (store: Store",ct=Gl($t+")"+Xe,Yl),it="then, then"+Te,bt=rt+nt+Ae,pt="View",Ct=(e,...l)=>Gl(...l,Oe+": "+e,Oe+xe,"mutator?: boolean"),ht=(...e)=>Gl(...e,Oe,Oe+Te,"mutator"),mt=(e,a,n,r,s)=>{const[u,$,x,R,P,A,k,O]=Jl(),[E,D,N]=Wl(e,a,P),L=`./${Nl(n)}.d`,j=`./${Nl(n)}-ui-react.d`,G="tinybase/ui-react",H=Nl(n,1),M=Nl(H),J=H+"Or"+H+Ae,z=M+"Or"+H+Ae,B=M+`={${M}}`,F=Ie(),_=(e,l,a,n,o,d=t)=>($(1,j,e+" as "+e+"Decl"),Ol(F,e,[l,a,n,o,d])),Q=(e,l,a,n,o,d=t)=>_("use"+e,l,a,n,o,d),q=(e,l,a,n,o=t,d=t,r=t,s=t,I=t)=>($(1,G,`use${l} as use${l}Core`),Q(e,Gl(o,le,s),a,ae+`(${z}, use${l}Core, [`+(d||t)+(I?"], ["+I:t)+"]);",n,r)),K=(e,l,t,a)=>_(e,l,1,t,a),X=(e=0)=>ce(F,(([l,a,n,o,d],r)=>{const s=e?[Pe+` const ${r}: typeof ${r}Decl = ${d}(${l}): ${1==a?"any":a} =>`,n]:[Pe+` function ${r}${d}(${l}): ${1==a?"ComponentReturnType":a};`];return e||Z(s,jl(o)),U(s,t),s}));$(null,l,Ae,"Store",fe,et+"ized"+fe),$(0,G,"ComponentReturnType"),$(1,G,"useCellIds"),$(null,G,"ExtraProps"),$(0,L,H);const Y=x(J,H+" | "+Ae,`Used when you need to refer to a ${H} in a React hook or component`),ee=x(je+Le,Ml(M+Ee+H,M+`ById?: {[${M}Id: Id]: ${H}}`),`Used with the ${je} component, so that a `+H+" can be passed into the context of an application");$(0,"react","ReactElement","ComponentType"),$(1,"react","React"),$(1,j,Y,ee);const le=z+Ee+Y;P("{createContext, useContext, useMemo}","React"),P("Context",`createContext<[${H}?, {[${M}Id: Id]: ${H}}?]>([])`),Q("Create"+H,`create: () => ${H}, create`+xe,H,"\n// eslint-disable-next-line react-hooks/exhaustive-deps\nuseMemo(create, createDeps)",`Create a ${H} within a React application with convenient memoization`);const te=Q(H,"id?: Id",H+De,["{",tt,"return id == null ? contextValue[0] : contextValue[1]?.[id];","}"],`Get a reference to a ${H} from within a ${je} component context`),ae=R("useHook",z+`: ${Y} | undefined, hook: (...params: any[]) => any, preParams: any[], postParams: any[] = []`,[`const ${M} = ${te}(${z} as Id);`,`return hook(...preParams, ((${z} == null || typeof ${z} == 'string')`,`? ${M} : ${z})?.getStore(), ...postParams)`]),oe=R("getProps","getProps: ((id: any) => ExtraProps) | undefined, id: Id","(getProps == null) ? ({} as ExtraProps) : getProps(id)"),de=R("wrap",Gl("children: any","separator?: any","encloseWithId?: boolean","id?: Id"),["const separated = separator==null || !Array.isArray(children)"," ? children"," : children.map((child, c) => (c > 0 ? [separator, child] : child));","return encloseWithId ? [id, ':{', separated, '}'] : separated;"]),re=R("useCustomOrDefaultCellIds",Gl("customCellIds: Ids | undefined","tableId: Id","rowId: Id",`${z}?: ${Y} | undefined`),[`const defaultCellIds = ${ae}(${z}, useCellIds, [tableId, rowId]);`,"return customCellIds ?? defaultCellIds;"]),se=P("NullComponent","() => null");if(!ne(e)){const[e,a,n,s,u,y,v,T,P,A,k,O,N,G,J,z,F,U,_,Z]=r;$(null,L,e,a,n,u,y,v,T,P,A,k,O,N,G,J,z,F,_,U),$(0,L,s),$(1,L,H),$(null,l,i,"IdOrNull");const Q=R("tableView",`{${M}, rowComponent, getRowComponentProps, customCellIds`+It+"}: any, rowIds: Ids, tableId: Id, defaultRowComponent: React.ComponentType<any>",["const Row = rowComponent ?? defaultRowComponent;",`return ${de}(rowIds.map((rowId) => (`,"<Row","{..."+oe+"(getRowComponentProps, rowId)}","key={rowId}","tableId={tableId}",st,"customCellIds={customCellIds}",B,Xl,"/>","))",It,", tableId,",");"]),X=R("getDefaultTableComponent","tableId: Id",W(E(((e,l,t)=>`tableId == ${t} ? ${l}TableView : `)))+se),Y=R("getDefaultCellComponent","tableId: Id, cellId: Id",W(E(((e,l,t)=>`tableId == ${t} ? ${W(D(e,((e,t,a,n,o)=>`cellId == ${n} ? `+l+o+"CellView : ")))+se} : `)))+se);q(c+p,c+p,o,sl(1,0,0,1)+ge),q(p,p,e,sl(1,0)+ge);const ee=q(C,C,n+Be,ul(b,Fe)+ge);q(ze+p+fe,ze+p+fe,dt,sl(1,9)+at,Gl(Ql(p)+lt+a,Ql(p)+xe),ql(p),ot,Gl($t,`tables: ${a})`+Xe,Yl),it),q(ve+p+fe,ve+p+fe,fe,sl(1,12),t,t,t,ct,it);const le=x(f+Le,Ml("tableId?: TId","rowId: Id","cellId?: CId",M+Ee+H,Kl),cl(he+f),`<TId extends ${n}, CId extends ${s}<TId>>`),te=x(h+Le,Ml("tableId?: TId","rowId: Id",M+Ee+H,"cellComponents?: {readonly [CId in "+s+`<TId>]?: ComponentType<${le}<TId, CId>>;}`,`getCellComponentProps?: (cellId: ${s}<TId>) => ExtraProps`,`customCellIds?: ${s}<TId>[]`,ut,Kl),cl(he+h),`<TId extends ${n}>`),ae=x(b+Le,Ml("tableId?: TId",M+Ee+H,`rowComponent?: ComponentType<${te}<TId>>`,"getRowComponentProps?: (rowId: Id) => ExtraProps","customCellIds?: CellId<TId>[]",ut,Kl),cl(he+b),`<TId extends ${n}>`),ne=x("Sorted"+b+Le,Ml("tableId?: TId","cellId?: "+s+"<TId>","descending?: boolean","offset?: number","limit?: number",M+Ee+H,`rowComponent?: ComponentType<${te}<TId>>`,"getRowComponentProps?: (rowId: Id) => ExtraProps","customCellIds?: CellId<TId>[]",ut,Kl),cl(he+"sorted "+b),`<TId extends ${n}>`),Ie=x(p+Le,Ml(M+Ee+H,"tableComponents?: {readonly [TId in "+n+`]?: ComponentType<${ae}<TId>>;}`,`getTableComponentProps?: (tableId: ${n}) => ExtraProps`,ut,Kl),cl(rl(1,1)));$(1,j,Ie,ae,ne,te,le),K(p+pt,"{"+M+", tableComponents, getTableComponentProps"+It+"}: "+Ie,[de+`(${ee}(${M}).map((tableId) => {`,"const Table = (tableComponents?.[tableId] ?? "+X+"(tableId)) as React.ComponentType<TableProps<typeof tableId>>;","return <Table",`{...${oe}(getTableComponentProps, tableId)}`,"tableId={tableId}","key={tableId}",B,Xl,"/>;","}), separator)"],sl(1,13)+ge),E(((e,l,a)=>{const[n,r,s,I,u]=ue(Z,e);$(null,L,n,r,s,I,u),q(c+l+b,c+b,o,ml(e,0,1)+ge,t,a),q(l+b,b,n,ml(e)+ge,t,a),q(l+b+w,b+w,i,ul(f,"the whole of "+Cl(e))+ge,t,a),q(l+h+ye,h+ye,d,"Gets the number of Rows in "+Cl(e)+ge,t,a);const p=q(l+m,m,i,ul(h,Cl(e))+ge,t,a),C=q(l+g,g,i,ul(h,Cl(e),1)+ge,"cellId?: "+u+", descending?: boolean, offset?: number, limit?: number",a+", cellId, descending, offset, limit");q(c+l+h,c+h,o,gl(e,0,1)+ge,bt,Gl(a,rt)),q(l+h,h,s,gl(e)+ge,bt,Gl(a,rt)),q(l+w,w,u+Be,ul(f,hl(e))+ge,bt,Gl(a,rt)),q(ze+l+b+fe,ze+b+fe,dt,ml(e,9)+at,Gl(Ql(b)+lt+r,Ql(b)+xe),Gl(a,ql(b)),ot,Gl($t,`table: ${r})`+Xe,Yl),it),q(ve+l+b+fe,ve+b+fe,fe,ml(e,12),t,a,t,ct,it),q(ze+l+h+fe,ze+h+fe,dt,gl(e,9)+at,Gl(bt,Ql(h)+lt+I,Ql(h)+xe),Gl(a,rt,ql(h)),ot,Gl($t,`row: ${I})`+Xe,Yl),it),q("Add"+l+h+fe,"Add"+h+fe,dt,gl(e,10)+at,Gl(Ql(h)+lt+I,Ql(h)+xe),Gl(a,ql(h)),ot,"then?: ("+Gl(bt+De,"store: Store","row: "+I+")"+Xe,"then"+xe)+", reuseRowIds?: boolean",it+", reuseRowIds"),q(ze+l+V+h+fe,ze+V+h+fe,dt,gl(e,11)+at,Gl(bt,Ql(V+h)+lt+I,Ql(V+h)+xe),Gl(a,rt,ql(V+h)),ot,Gl($t,`partialRow: ${I})`+Xe,Yl),it),q(ve+l+h+fe,ve+h+fe,fe,gl(e,12),bt,Gl(a,rt),t,ct,it);const y=K(l+h+pt,"{rowId, "+M+", cellComponents, getCellComponentProps, customCellIds"+It+`}: ${te}<'${e}'>`,[de+`(${re}(customCellIds, `+a+`, rowId, ${M}).map((cellId: ${u}) => {`,"const Cell = (cellComponents?.[cellId] ?? "+Y+`(${a}, cellId)) as React.ComponentType<CellProps<typeof `+a+", typeof cellId>>;","return <Cell",`{...${oe}(getCellComponentProps, cellId)} `,"key={cellId}",`tableId={${a}}`,st,"cellId={cellId}",B,Xl,"/>;","})"+It+", rowId)"],gl(e,13)+ge);K(l+"Sorted"+b+pt,"{cellId, descending, offset, limit, ...props}: "+ne+`<'${e}'>`,Q+"(props, "+C+`(cellId, descending, offset, limit, props.${M}), ${a}, ${y});`,ml(e,13)+", sorted"+ge),K(l+b+pt,`props: ${ae}<'${e}'>`,Q+"(props, "+p+`(props.${M}), ${a}, ${y});`,ml(e,13)+ge),D(e,((n,d,r,s,I)=>{const u="Map"+Nl(d,1);$(0,L,u),$(1,L,u),q(c+l+I+b+f,c+b+f,o,`Gets ${dl(1)}the '${n}' Cell anywhere in `+Cl(e)+ge,t,Gl(a,s)),q(c+l+I+f,c+f,o,fl(e,n,0,1)+ge,bt,Gl(a,rt,s));const i=q(l+I+f,f,d+(S(r)?De:t),fl(e,n)+ge,bt,Gl(a,rt,s));q(ze+l+I+f+fe,ze+f+fe,dt,fl(e,n,9)+at,Gl(bt,Ql(f)+lt+d+" | "+u,Ql(f)+xe),Gl(a,rt,s,ql(f)),ot,Gl($t,`cell: ${d} | ${u})`+Xe,Yl),it),q(ve+l+I+f+fe,ve+f+fe,fe,fl(e,n,12),Gl(bt,"forceDel?: boolean"),Gl(a,rt,s,"forceDel"),t,ct,it),K(l+I+f+pt,`{rowId, ${M}, debugIds}: `+le+`<'${e}', '${n}'>`,[de+`('' + ${i}(rowId, `+M+`) ?? '', undefined, debugIds, ${s})`],fl(e,n,13)+ge)}))}));const $e=W(E((e=>{var l,a;return null!=(a=null==(l=ue(Z,e))?void 0:l[4])?a:t}))," | ");q(c+p+I,c+p+I,Ke,sl(1,8,0,1)+" changes",Ct(u),ht()),q(p+I,p+I,Ke,sl(1,8)+" changes",Ct(y),ht()),q(C+I,C+I,Ke,pl(2,0,1),Ct(v),ht()),q(c+b+I,c+b+I,Ke,pl(3,0,0,1),Ct(T,`tableId: ${n} | null`),ht("tableId")),q(b+I,b+I,Ke,pl(3,0),Ct(P,`tableId: ${n} | null`),ht("tableId")),q(b+w+I,b+w+I,Ke,pl(14,3,1),Ct(A,`tableId: ${n} | null`),ht("tableId")),q(c+b+f+I,c+b+f+I,Ke,pl(16,3,0,1),Ct(k,`tableId: ${n} | null`,`cellId: ${$e} | null`),ht("tableId","cellId")),q(h+ye+I,h+ye+I,Ke,pl(15,3),Ct(O,`tableId: ${n} | null`),ht("tableId")),q(m+I,m+I,Ke,pl(4,3,1),Ct(N,`tableId: ${n} | null`),ht("tableId")),q(g+I,g+I,Ke,pl(13,3,1),Ct(G,`tableId: ${n} | null`,"cellId: "+$e+De,"descending: boolean","offset: number","limit: number"+De),ht("tableId","cellId","descending","offset","limit")),q(c+h+I,c+h+I,Ke,pl(5,3,0,1),Ct(J,`tableId: ${n} | null`,rt+": IdOrNull"),ht("tableId",rt)),q(h+I,h+I,Ke,pl(5,3),Ct(z,`tableId: ${n} | null`,rt+": IdOrNull"),ht("tableId",rt)),q(w+I,w+I,Ke,pl(6,5,1),Ct(F,`tableId: ${n} | null`,rt+": IdOrNull"),ht("tableId",rt)),q(c+f+I,c+f+I,Ke,pl(7,5,0,1),Ct(U,`tableId: ${n} | null`,rt+": IdOrNull",`cellId: ${$e} | null`),ht("tableId",rt,"cellId")),q(f+I,f+I,Ke,pl(7,5),Ct(_,`tableId: ${n} | null`,rt+": IdOrNull",`cellId: ${$e} | null`),ht("tableId",rt,"cellId"))}if(!ne(a)){const[e,l,a,n,d,r,u,i]=s;$(null,L,...s),$(1,L,H);const b=R("getDefaultValueComponent","valueId: Id",W(N(((e,l,t,a,n)=>`valueId == ${a} ? `+n+"ValueView : ")))+se);q(c+v,c+v,o,sl(2,0,0,1)+ge),q(v,v,e,sl(2,0)+ge);const p=q(T,T,a+Be,ul(y,Fe)+ge);q(ze+v+fe,ze+v+fe,dt,sl(2,9)+at,Gl(Ql(v)+lt+l,Ql(v)+xe),ql(v),ot,Gl($t,`values: ${l})`+Xe,Yl),it),q(ze+V+v+fe,ze+V+v+fe,dt,sl(2,11)+at,Gl(Ql(V+v)+lt+l,Ql(V+v)+xe),ql(V+v),ot,Gl($t,`partialValues: ${l})`+Xe,Yl),it),q(ve+v+fe,ve+v+fe,fe,sl(2,12),t,t,t,ct,it);const C=x(y+Le,Ml("valueId?: VId",M+Ee+H,Kl),cl("a Value"),`<VId extends ${a}>`),h=x(v+Le,Ml(M+Ee+H,"valueComponents?: {readonly [VId in "+a+`]?: ComponentType<${C}<VId>>;}`,`getValueComponentProps?: (valueId: ${a}) => ExtraProps`,ut,Kl),cl(rl(2,1)));$(1,j,h,C),K(v+pt,"{"+M+", valueComponents, getValueComponentProps"+It+"}: "+h,[de+`(${p}(${M}).map((valueId) => {`,"const Value = valueComponents?.[valueId] ?? "+b+"(valueId);","return <Value",`{...${oe}(getValueComponentProps, valueId)}`,"key={valueId}",B,Xl,"/>;","}), separator)"],sl(2,13)+ge),N(((e,l,a,n,d)=>{const r="Map"+Nl(l,1);$(0,L,r),$(1,L,r),q(c+d+y,c+y,o,wl(e,0,1)+ge,t,n);const s=q(d+y,y,l,wl(e)+ge,t,n);q(ze+d+y+fe,ze+y+fe,dt,wl(e,9)+at,Gl(Ql(y)+lt+l+" | "+r,Ql(y)+xe),Gl(n,ql(y)),ot,Gl($t,`value: ${l} | ${r})`+Xe,Yl),it),q(ve+d+y+fe,ve+y+fe,fe,wl(e,12),t,n,t,ct,it),K(d+y+pt,`{${M}, debugIds}: ${C}<'${e}'>`,[de+`('' + ${s}(`+M+`) ?? '', undefined, debugIds, ${n})`],wl(e,13)+ge)})),q(c+v+I,c+v+I,Ke,sl(2,8,0,1)+" changes",Ct(n),ht()),q(v+I,v+I,Ke,sl(2,8)+" changes",Ct(d),ht()),q(T+I,T+I,Ke,pl(10,0,1),Ct(r),ht()),q(c+y+I,c+y+I,Ke,pl(11,0,0,1),Ct(u,`valueId: ${a} | null`),ht("valueId")),q(y+I,y+I,Ke,pl(11,0),Ct(i,`valueId: ${a} | null`),ht("valueId"))}return K(je,`{${M}, ${M}ById, children}: `+ee+" & {readonly children: React.ReactNode}",["{",tt,"return (","<Context."+je,"value={useMemo(",`() => [${M} ?? contextValue[0], {...contextValue[1], ...${M}ById}],`,`[${M}, ${M}ById, contextValue],`,")}>","{children}",`</Context.${je}>`,");","}"],"Wraps part of an application in a context that provides default objects to be used by hooks and components within"),[u(...A(0),...k(),...X(0)),u(...A(1),...O(),...X(1))]},gt=(e,l,a)=>{if(ne(e)&&ne(l))return[t,t,t,t];const[n,o,d,r]=Zl(e,l,a);return[n,o,...mt(e,l,a,d,r)]},ft=JSON.parse;var wt=Object.defineProperty,yt=Object.defineProperties,vt=Object.getOwnPropertyDescriptors,Tt=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable,Rt=(e,l,t)=>l in e?wt(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,Pt=(e,l)=>{for(var t in l||(l={}))xt.call(l,t)&&Rt(e,t,l[t]);if(Tt)for(var t of Tt(l))Vt.call(l,t)&&Rt(e,t,l[t]);return e},At=(e,l)=>yt(e,vt(l)),kt=(e,l,t)=>new Promise(((a,n)=>{var o=e=>{try{r(t.next(e))}catch(e){n(e)}},d=e=>{try{r(t.throw(e))}catch(e){n(e)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,d);r((t=t.apply(e,l)).next())}));const St="prettier/",Ot=St+"plugins/",Et={parser:"typescript",singleQuote:!0,trailingComma:"all",bracketSpacing:!1,jsdocSingleLineComment:!1},Dt=zl((e=>{const l=()=>{const l=ft(e.getTablesSchemaJson());return!ne(l)||M(e.getTableIds(),(t=>{const a=e.getRowIds(t),n=Ie();if(M(a,(l=>M(e.getCellIds(t,l),(a=>{const o=e.getCell(t,l,a),d=be(n,a,(()=>[H(o),Ie(),[0],0])),[r,s,[I]]=d,u=be(s,o,(()=>0))+1;return u>I&&(d[2]=[u,o]),ie(s,o,u),d[3]++,r==H(o)})))))return l[t]={},re(n,(([e,,[,n],o],d)=>{l[t][d]=Pt({[r]:e},o==j(a)?{[s]:n}:{})})),1}))?l:{}},t=()=>{const l=ft(e.getValuesSchemaJson());return ne(l)&&e.forEachValue(((e,t)=>{l[e]={[r]:H(t)}})),l},a=e=>gt(l(),t(),e),n=e=>kt(void 0,null,(function*(){const l=["d.ts","ts","d.ts","tsx"],t=[];let n;try{n=(yield import(St+"standalone")).format,U(t,yield import(Ot+"estree"),yield import(Ot+"typescript"))}catch(e){n=e=>kt(void 0,null,(function*(){return e}))}return yield G(B(a(e),((e,a)=>kt(void 0,null,(function*(){return El(yield n(e,At(Pt({},Et),{plugins:t,filepath:"_."+l[a]})))})))))}));return le({getStoreStats:l=>{let t=0,a=0,n=0;const o={};return e.forEachTable(((e,d)=>{t++;let r=0,s=0;const I={};d(((e,t)=>{r++;let a=0;t((()=>a++)),s+=a,l&&(I[e]={rowCells:a})})),a+=r,n+=s,l&&(o[e]={tableRows:r,tableCells:s,rows:I})})),Pt({totalTables:t,totalRows:a,totalCells:n,totalValues:j(e.getValueIds()),jsonLength:j(e.getJson())},l?{detail:{tables:o}}:{})},getStoreTablesSchema:l,getStoreValuesSchema:t,getStoreApi:a,getPrettyStoreApi:n,getStore:()=>e})}));export{Dt as createTools};
