import e from"react";import{useCell as t,useValue as l,useSetValueCallback as n,useSetCellCallback as r,ValueView as o,useValueIds as s,useStoreOrStoreById as a,useIndexesOrIndexesById as i,useSliceRowIds as d,useTableCellIds as u,useResultRowCount as c,useResultSortedRowIds as h,ResultCellView as m,useResultTableCellIds as p,useRelationshipsOrRelationshipsById as g,CellView as b,useRowIds as v,useRemoteRowId as f,useRowCount as y,useSortedRowIds as I,useIndexes as w,useIndexIds as C,useSliceIds as k,useMetrics as x,useMetricIds as T,useMetric as S,useQueries as O,useQueryIds as q,useRelationships as P,useRelationshipIds as N,useStore as V,useTableIds as L,useValues as M,useStoreIds as E,useMetricsIds as R,useIndexesIds as j,useRelationshipsIds as z,useQueriesIds as $,useCreateStore as A,useCreatePersister as J}from"../../ui-react/with-schemas/index.js";const D=e=>typeof e,F="",B=D(F),H=D(!0),W=D(0),Q=D(D),G="type",K="default",U="Has",X="Ids",Y="Table",Z=Y+"s",_=Y+X,ee="Row",te=ee+"Count",le=ee+X,ne="Cell",re=ne+X,oe="Value",se=oe+"s",ae=oe+X,ie="currentTarget",de="value",ue=e=>F+e,ce=globalThis.window,he=Math,me=he.min,pe=he.floor,ge=isFinite,be=e=>null==e,ve=(e,t,l)=>be(e)?null==l?void 0:l():t(e),fe=e=>e==B||e==H,ye=e=>D(e)==Q,Ie=e=>Array.isArray(e),we=(e,t,l)=>e.slice(t,l),Ce=e=>e.length,ke=e=>{throw Error(e)},{PureComponent:xe,Fragment:Te,createContext:Se,createElement:Oe,useCallback:qe,useContext:Pe,useEffect:Ne,useLayoutEffect:Ve,useMemo:Le,useRef:Me,useState:Ee,useSyncExternalStore:Re}=e,je=(e,...t)=>be(e)?{}:e(...t),ze=(e,t)=>e.sort(t),$e=(e,t)=>e.forEach(t),Ae=(e,t)=>e.map(t),Je=e=>0==Ce(e),De=(e,...t)=>e.push(...t),Fe=e=>e.shift(),Be=Object,He=e=>Be.getPrototypeOf(e),We=Be.entries,Qe=Be.isFrozen,Ge=e=>!be(e)&&ve(He(e),(e=>e==Be.prototype||be(He(e))),(()=>!0)),Ke=Be.keys,Ue=Be.freeze,Xe=(e=[])=>Be.fromEntries(e),Ye=(e,t)=>t in e,Ze=(e,t)=>(delete e[t],e),_e=(e,t)=>Ae(We(e),(([e,l])=>t(l,e))),et=(e,t)=>Xe(_e(e,((e,l)=>[l,t(e,l)]))),tt=e=>Ge(e)&&0==(e=>Ce(Ke(e)))(e),lt=(e,t,l,n=0)=>be(e)||!Ge(e)||!n&&tt(e)||Qe(e)?(null==l||l(),!1):(((e,t)=>{$e(We(e),(([e,l])=>t(l,e)))})(e,((l,n)=>{t(l,n)||Ze(e,n)})),!!n||!tt(e)),nt=JSON.stringify,rt=JSON.parse,ot=e=>nt(e,((e,t)=>t instanceof Map?Be.fromEntries([...t]):t)),st="tinybaseInspector",at="TinyBase Inspector",it=["left","top","bottom","right","full"],dt="state",ut="sort",ct="open",ht="position",mt=ct,pt="editable",gt=(...e)=>ot(e),bt=(e,t)=>Ae(ze([...e]),t),vt=(e,l)=>[!!t(dt,e,pt,l),qe((t=>{l.setCell(dt,e,pt,(e=>!e)),t.preventDefault()}),[l,e])],ft="M20 80l5-15l40-40l10 10l-40 40l-15 5m5-15l10 10",yt='content:url("',It=yt+"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' stroke-width='4' stroke='white' fill='none'>",wt='</svg>")',Ct=yt+"data:image/svg+xml,%3csvg viewBox='0 0 680 680' xmlns='http://www.w3.org/2000/svg' style='width:680px%3bheight:680px'%3e %3cpath stroke='white' stroke-width='80' fill='none' d='M340 617a84 241 90 11.01 0zM131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124zm-12-127a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e %3cpath fill='%23d81b60' d='M131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124z' /%3e %3cpath d='M249 619a94 240 90 00308-128 114 289 70 01-308 128zM119 208a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e%3c/svg%3e\")",kt=Ae([[20,20,20,60],[20,20,60,20],[20,60,60,20],[60,20,20,60],[30,30,40,40]],(([e,t,l,n])=>It+`<rect x='20' y='20' width='60' height='60' fill='grey'/><rect x='${e}' y='${t}' width='${l}' height='${n}' fill='white'/>`+wt)),xt=It+"<path d='M20 20l60 60M20 80l60-60' />"+wt,Tt=It+`<path d='${ft}' />`+wt,St=It+`<path d='${ft}M20 20l60 60' />`+wt;var Ot=Object.defineProperty,qt=Object.defineProperties,Pt=Object.getOwnPropertyDescriptors,Nt=Object.getOwnPropertySymbols,Vt=Object.prototype.hasOwnProperty,Lt=Object.prototype.propertyIsEnumerable,Mt=(e,t,l)=>t in e?Ot(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Et=(e,t)=>{for(var l in t||(t={}))Vt.call(t,l)&&Mt(e,l,t[l]);if(Nt)for(var l of Nt(t))Lt.call(t,l)&&Mt(e,l,t[l]);return e},Rt=(e,t)=>qt(e,Pt(t));const jt="*::-webkit-scrollbar",zt=((e,t="")=>e.join(t))(_e(Rt(Et(Rt(Et(Rt(Et({"":"all:initial;font-family:sans-serif;font-size:0.75rem;position:fixed;z-index:999999","*":"all:revert","*::before":"all:revert","*::after":"all:revert",[jt]:"width:0.5rem;height:0.5rem;",[jt+"-track"]:"background:#111",[jt+"-thumb"]:"background:#999;border:1px solid #111",[jt+"-thumb:hover"]:"background:#fff",[jt+"-corner"]:"background:#111",img:"width:1rem;height:1rem;background:#111;border:0;vertical-align:text-bottom",">img":"padding:0.25rem;bottom:0;right:0;position:fixed;"+Ct},Xe(Ae(["bottom:0;left:0","top:0;right:0"],((e,t)=>[`>img[data-position='${t}']`,e])))),{main:"display:flex;flex-direction:column;background:#111d;color:#fff;position:fixed;"}),Xe(Ae(["bottom:0;left:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:30vh","bottom:0;left:0;width:100vw;height:30vh","top:0;right:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:100vh"],((e,t)=>[`main[data-position='${t}']`,e])))),{header:"display:flex;padding:0.25rem;background:#000;align-items:center","header>img:nth-of-type(1)":Ct,"header>img:nth-of-type(6)":xt}),Xe(Ae(kt,((e,t)=>[`header>img[data-id='${t}']`,e])))),{"header>span":"flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-left:0.25rem",article:"padding:0.25rem 0.25rem 0.25rem 0.5rem;overflow:auto;flex:1",details:"margin-left:0.75rem;width:fit-content;","details img":"display:none","details[open]>summary img":"display:unset;background:none;margin-left:0.25rem","details[open]>summary img.edit":Tt,"details[open]>summary img.done":St,summary:"margin-left:-0.75rem;line-height:1.25rem;user-select:none;width:fit-content",table:"border-collapse:collapse;table-layout:fixed;margin-bottom:0.5rem","table input":"background:#111;color:unset;padding:0 0.25rem;border:0;font-size:unset;vertical-align:top;margin:0",'table input[type="number"]':"width:4rem","table tbody button":"font-size:0;background:#fff;border-radius:50%;margin:0 0.125rem 0 0;width:0.85rem;color:#111","table button:first-letter":"font-size:0.75rem",thead:"background:#222","th:nth-of-type(1)":"min-width:2rem;","th.sorted":"background:#000","table caption":"text-align:left;white-space:nowrap;line-height:1.25rem",button:"width:1.5rem;border:none;background:none;color:#fff;padding:0","button[disabled]":"color:#777","button.next":"margin-right:0.5rem",[`th,#${st} td`]:"overflow:hidden;text-overflow:ellipsis;padding:0.25rem 0.5rem;max-width:12rem;white-space:nowrap;border-width:1px 0;border-style:solid;border-color:#777;text-align:left","span.warn":"margin:0.25rem;color:#d81b60"}),((e,t)=>e?`#${st} ${t}{${e}}`:""))),$t=({s:e})=>{var t;const r=null!=(t=l(ht,e))?t:1,o=n(mt,(()=>!0),[],e);return l(mt,e)?null:Oe("img",{onClick:o,title:at,"data-position":r})},At=({uniqueId:e,summary:l,editable:n,handleEditable:o,children:s,s:a})=>{const i=!!t(dt,e,ct,a),d=r(dt,e,ct,(e=>e[ie].open),[],a);return Oe("details",{open:i,onToggle:d},Oe("summary",null,l,o?Oe("img",{onClick:o,className:n?"done":"edit"}):null),s)},Jt=e=>{const t=D(e);return fe(t)||t==W&&ge(e)?t:void 0},Dt=(e,t,l,n,r)=>be(r)?e.delCell(t,l,n,!0):e.setCell(t,l,n,r),Ft=(e,t,l)=>be(l)?e.delValue(t):e.setValue(t,l),Bt=(e,t,l,n)=>e==B?t:e==W?l:n;var Ht=Object.defineProperty,Wt=Object.defineProperties,Qt=Object.getOwnPropertyDescriptors,Gt=Object.getOwnPropertySymbols,Kt=Object.prototype.hasOwnProperty,Ut=Object.prototype.propertyIsEnumerable,Xt=(e,t,l)=>t in e?Ht(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,Yt=(e,t)=>{for(var l in t||(t={}))Kt.call(t,l)&&Xt(e,l,t[l]);if(Gt)for(var l of Gt(t))Ut.call(t,l)&&Xt(e,l,t[l]);return e},Zt=(e,t)=>Wt(e,Qt(t)),_t=(e,t)=>{var l={};for(var n in e)Kt.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&Gt)for(var n of Gt(e))t.indexOf(n)<0&&Ut.call(e,n)&&(l[n]=e[n]);return l};const el="editable",tl=(e,t)=>Ae(u(e,t),(t=>e+"."+t)),ll=(e,t,l)=>{const n=qe(e,t);return l?n:void 0},nl=(...e)=>Le((()=>e),e),rl=(e,t)=>Le((()=>({store:e,tableId:t})),[e,t]),ol=(e,t)=>Le((()=>({queries:e,queryId:t})),[e,t]),sl=(e,t=!1,l,n=0,r,o,s,a)=>{const[[i,d,u],c]=Ee([e,t,n]),h=qe((e=>{c(e),null==a||a(e)}),[a]),m=ll((e=>h([e,e==i&&!d,u])),[h,i,d,u],l),p=qe((e=>h([i,d,e])),[h,i,d]),g=!0===s?yl:s;return[[i,d,u],m,Le((()=>!1===s?null:Oe(g,{offset:u,limit:r,total:o,onChange:p})),[s,g,u,r,o,p])]},al=(e,t,l)=>Le((()=>{const n=null!=t?t:e;return et(Ie(n)?Xe(Ae(n,(e=>[e,e]))):n,((e,t)=>Yt(Yt({},{label:t,component:l}),D(e)==B?{label:e}:e)))}),[t,l,e]),il=({className:e,headerRow:t,idColumn:l,params:[n,r,o,s,a,i]})=>Oe("table",{className:e},i?Oe("caption",null,i):null,!1===t?null:Oe("thead",null,Oe("tr",null,!1===l?null:Oe(dl,{sort:null!=s?s:[],label:"Id",onClick:a}),_e(n,(({label:e},t)=>Oe(dl,{key:t,cellId:t,label:e,sort:null!=s?s:[],onClick:a}))))),Oe("tbody",null,Ae(o,(e=>Oe("tr",{key:e},!1===l?null:Oe("th",null,e),_e(n,(({component:t,getComponentProps:l},n)=>Oe("td",{key:n},Oe(t,Zt(Yt(Yt({},je(l,e,n)),r),{rowId:e,cellId:n})))))))))),dl=({cellId:e,sort:[t,l],label:n=(null!=e?e:F),onClick:r})=>Oe("th",{onClick:ll((()=>null==r?void 0:r(e)),[r,e],r),className:be(l)||t!=e?void 0:`sorted ${l?"de":"a"}scending`},be(l)||t!=e?null:(l?"↓":"↑")+" ",n),ul=({localRowId:e,params:[t,l,n,r,o,s,a]})=>{const i=f(o,e,s);return Oe("tr",null,!1===t?null:Oe(Te,null,Oe("th",null,e),Oe("th",null,i)),_e(l,(({component:t,getComponentProps:l},o)=>{const[s,d]=((e,t="",l)=>e.split(t,l))(o,".",2),u=s===n?e:s===r?i:null;return be(u)?null:Oe("td",{key:o},Oe(t,Zt(Yt({},je(l,u,d)),{store:a,tableId:s,rowId:u,cellId:d})))})))},cl=({thing:e,onThingChange:t,className:l,hasSchema:n,showType:r=!0})=>{const[o,s]=Ee(),[a,i]=Ee(),[d,u]=Ee(),[c,h]=Ee(),[m,p]=Ee();a!==e&&(s(Jt(e)),i(e),u(e+""),h(Number(e)||0),p(!!e));const g=qe(((e,l)=>{l(e),i(e),t(e)}),[t]),b=qe((()=>{if(!(null==n?void 0:n())){const e=Bt(o,W,H,B),l=Bt(e,d,c,m);s(e),i(l),t(l)}}),[n,t,d,c,m,o]);return Oe("div",{className:l},r?Oe("button",{className:o,onClick:b},o):null,Bt(o,Oe("input",{key:o,value:d,onChange:qe((e=>g(e[ie][de]+"",u)),[g])}),Oe("input",{key:o,type:"number",value:c,onChange:qe((e=>g(Number(e[ie][de]||0),h)),[g])}),Oe("input",{key:o,type:"checkbox",checked:m,onChange:qe((e=>g(!!e[ie].checked,p)),[g])})))},hl=e=>{var t=e,{tableId:l,cellId:n,descending:r,offset:o,limit:s,store:a,editable:i,sortOnClick:d,paginator:c=!1,onChange:h,customCells:m}=t,p=_t(t,["tableId","cellId","descending","offset","limit","store","editable","sortOnClick","paginator","onChange","customCells"]);const[g,v,f]=sl(n,r,d,o,s,y(l,a),c,h);return Oe(il,Zt(Yt({},p),{params:nl(al(u(l,a),m,i?vl:b),rl(a,l),I(l,...g,s,a),g,v,f)}))},ml=({store:e,editable:t=!1,valueComponent:l=(t?fl:o),getValueComponentProps:n,className:r,headerRow:a,idColumn:i})=>Oe("table",{className:r},!1===a?null:Oe("thead",null,Oe("tr",null,!1===i?null:Oe("th",null,"Id"),Oe("th",null,oe))),Oe("tbody",null,Ae(s(e),(t=>Oe("tr",{key:t},!1===i?null:Oe("th",null,t),Oe("td",null,Oe(l,Zt(Yt({},je(n,t)),{valueId:t,store:e})))))))),pl=e=>{var t=e,{indexId:l,sliceId:n,indexes:r,editable:o,customCells:s}=t,a=_t(t,["indexId","sliceId","indexes","editable","customCells"]);const[c,h,m]=((e,t)=>[e,null==e?void 0:e.getStore(),null==e?void 0:e.getTableId(t)])(i(r),l);return Oe(il,Zt(Yt({},a),{params:nl(al(u(m,h),s,o?vl:b),rl(h,m),d(l,n,c))}))},gl=({relationshipId:e,relationships:t,editable:l,customCells:n,className:r,headerRow:o,idColumn:s=!0})=>{const[a,i,d,u]=((e,t)=>[e,null==e?void 0:e.getStore(),null==e?void 0:e.getLocalTableId(t),null==e?void 0:e.getRemoteTableId(t)])(g(t),e),c=al([...tl(d,i),...tl(u,i)],n,l?vl:b),h=nl(s,c,d,u,e,a,i);return Oe("table",{className:r},!1===o?null:Oe("thead",null,Oe("tr",null,!1===s?null:Oe(Te,null,Oe("th",null,d,".Id"),Oe("th",null,u,".Id")),_e(c,(({label:e},t)=>Oe("th",{key:t},e))))),Oe("tbody",null,Ae(v(d,i),(e=>Oe(ul,{key:e,localRowId:e,params:h})))))},bl=e=>{var t=e,{queryId:l,cellId:n,descending:r,offset:o,limit:s,queries:a,sortOnClick:i,paginator:d=!1,customCells:u,onChange:g}=t,b=_t(t,["queryId","cellId","descending","offset","limit","queries","sortOnClick","paginator","customCells","onChange"]);const[v,f,y]=sl(n,r,i,o,s,c(l,a),d,g);return Oe(il,Zt(Yt({},b),{params:nl(al(p(l,a),u,m),ol(a,l),h(l,...v,s,a),v,f,y)}))},vl=({tableId:e,rowId:l,cellId:n,store:o,className:s,showType:i})=>{var d;return Oe(cl,{thing:t(e,l,n,o),onThingChange:r(e,l,n,(e=>e),[],o),className:null!=s?s:el+ne,showType:i,hasSchema:null==(d=a(o))?void 0:d.hasTablesSchema})},fl=({valueId:e,store:t,className:r,showType:o})=>{var s;return Oe(cl,{thing:l(e,t),onThingChange:n(e,(e=>e),[],t),className:null!=r?r:el+oe,showType:o,hasSchema:null==(s=a(t))?void 0:s.hasValuesSchema})},yl=({onChange:e,total:t,offset:l=0,limit:n=t,singular:r="row",plural:o=r+"s"})=>{(l>t||l<0)&&(l=0,e(0));const s=ll((()=>e(l-n)),[e,l,n],l>0),a=ll((()=>e(l+n)),[e,l,n],l+n<t);return Oe(Te,null,t>n&&Oe(Te,null,Oe("button",{className:"previous",disabled:0==l,onClick:s},"←"),Oe("button",{className:"next",disabled:l+n>=t,onClick:a},"→"),l+1," to ",me(t,l+n)," of "),t," ",1!=t?o:r)},Il=({indexes:e,indexesId:t,indexId:l,s:n})=>Oe(At,{uniqueId:gt("i",t,l),summary:"Index: "+l,s:n},Ae(k(l,e),(r=>Oe(wl,{indexes:e,indexesId:t,indexId:l,sliceId:r,s:n,key:r})))),wl=({indexes:e,indexesId:t,indexId:l,sliceId:n,s:r})=>{const o=gt("i",t,l,n),[s,a]=vt(o,r);return Oe(At,{uniqueId:o,summary:"Slice: "+n,editable:s,handleEditable:a,s:r},Oe(pl,{sliceId:n,indexId:l,indexes:e,editable:s}))},Cl=({indexesId:e,s:t})=>{const l=w(e),n=C(l);return be(l)?null:Oe(At,{uniqueId:gt("i",e),summary:"Indexes: "+(null!=e?e:K),s:t},Je(n)?"No indexes defined":bt(n,(n=>Oe(Il,{indexes:l,indexesId:e,indexId:n,s:t,key:n}))))},kl=({metrics:e,metricId:t})=>Oe("tr",null,Oe("th",null,t),Oe("td",null,null==e?void 0:e.getTableId(t)),Oe("td",null,S(t,e))),xl=({metricsId:e,s:t})=>{const l=x(e),n=T(l);return be(l)?null:Oe(At,{uniqueId:gt("m",e),summary:"Metrics: "+(null!=e?e:K),s:t},Je(n)?"No metrics defined":Oe("table",null,Oe("thead",null,Oe("th",null,"Metric Id"),Oe("th",null,"Table Id"),Oe("th",null,"Metric")),Oe("tbody",null,Ae(n,(e=>Oe(kl,{metrics:l,metricId:e,key:e}))))))},Tl=({queries:e,queriesId:l,queryId:n,s:o})=>{var s;const a=gt("q",l,n),[i,d,u]=rt(null!=(s=t(dt,a,ut,o))?s:"[]"),c=r(dt,a,ut,ot,[],o);return Oe(At,{uniqueId:a,summary:"Query: "+n,s:o},Oe(bl,{queryId:n,queries:e,cellId:i,descending:d,offset:u,limit:10,paginator:!0,sortOnClick:!0,onChange:c}))},Sl=({queriesId:e,s:t})=>{const l=O(e),n=q(l);return be(l)?null:Oe(At,{uniqueId:gt("q",e),summary:"Queries: "+(null!=e?e:K),s:t},Je(n)?"No queries defined":bt(n,(n=>Oe(Tl,{queries:l,queriesId:e,queryId:n,s:t,key:n}))))},Ol=({relationships:e,relationshipsId:t,relationshipId:l,s:n})=>{const r=gt("r",t,l),[o,s]=vt(r,n);return Oe(At,{uniqueId:r,summary:"Relationship: "+l,editable:o,handleEditable:s,s:n},Oe(gl,{relationshipId:l,relationships:e,editable:o}))},ql=({relationshipsId:e,s:t})=>{const l=P(e),n=N(l);return be(l)?null:Oe(At,{uniqueId:gt("r",e),summary:"Relationships: "+(null!=e?e:K),s:t},Je(n)?"No relationships defined":bt(n,(n=>Oe(Ol,{relationships:l,relationshipsId:e,relationshipId:n,s:t,key:n}))))},Pl=({tableId:e,store:l,storeId:n,s:o})=>{var s;const a=gt("t",n,e),[i,d,u]=rt(null!=(s=t(dt,a,ut,o))?s:"[]"),c=r(dt,a,ut,ot,[],o),[h,m]=vt(a,o);return Oe(At,{uniqueId:a,summary:Y+": "+e,editable:h,handleEditable:m,s:o},Oe(hl,{tableId:e,store:l,cellId:i,descending:d,offset:u,limit:10,paginator:!0,sortOnClick:!0,onChange:c,editable:h}))},Nl=({store:e,storeId:t,s:l})=>{const n=gt("v",t),[r,o]=vt(n,l);return Je(s(e))?null:Oe(At,{uniqueId:n,summary:se,editable:r,handleEditable:o,s:l},Oe(ml,{store:e,editable:r}))},Vl=({storeId:e,s:t})=>{const l=V(e),n=L(l);return be(l)?null:Oe(At,{uniqueId:gt("s",e),summary:(l.isMergeable()?"Mergeable":"")+"Store: "+(null!=e?e:K),s:t},Oe(Nl,{storeId:e,store:l,s:t}),bt(n,(n=>Oe(Pl,{store:l,storeId:e,tableId:n,s:t,key:n}))))},Ll=({s:e})=>{const t=Me(null),l=Me(0),[n,r]=Ee(!1),{scrollLeft:o,scrollTop:s}=M(e);Ve((()=>{const e=t.current;if(e&&!n){const t=new MutationObserver((()=>{e.scrollWidth>=pe(o)+e.clientWidth&&e.scrollHeight>=pe(s)+e.clientHeight&&e.scrollTo(o,s)}));return t.observe(e,{childList:!0,subtree:!0}),()=>t.disconnect()}}),[n,o,s]);const a=qe((t=>{const{scrollLeft:n,scrollTop:o}=t[ie];cancelIdleCallback(l.current),l.current=requestIdleCallback((()=>{r(!0),e.setPartialValues({scrollLeft:n,scrollTop:o})}))}),[e]),i=V(),d=E(),u=x(),c=R(),h=w(),m=j(),p=P(),g=z(),b=O(),v=$();return be(i)&&Je(d)&&be(u)&&Je(c)&&be(h)&&Je(m)&&be(p)&&Je(g)&&be(b)&&Je(v)?Oe("span",{className:"warn"},"There are no Stores or other objects to inspect. Make sure you placed the Inspector inside a Provider component."):Oe("article",{ref:t,onScroll:a},Oe(Vl,{s:e}),Ae(d,(t=>Oe(Vl,{storeId:t,s:e,key:t}))),Oe(xl,{s:e}),Ae(c,(t=>Oe(xl,{metricsId:t,s:e,key:t}))),Oe(Cl,{s:e}),Ae(m,(t=>Oe(Cl,{indexesId:t,s:e,key:t}))),Oe(ql,{s:e}),Ae(g,(t=>Oe(ql,{relationshipsId:t,s:e,key:t}))),Oe(Sl,{s:e}),Ae(v,(t=>Oe(Sl,{queriesId:t,s:e,key:t}))))};var Ml=Object.defineProperty;class El extends xe{constructor(e){var t,l,n;super(e),n=(e,t)=>console.error(e,t.componentStack),(l="componentDidCatch")in(t=this)?Ml(t,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[l]=n,this.state={e:0}}static getDerivedStateFromError(){return{e:1}}render(){return this.state.e?Oe("span",{className:"warn"},"Inspector error: please see console for details."):this.props.children}}const Rl=({s:e})=>{var t;const r=null!=(t=l(ht,e))?t:1,o=n(mt,(()=>!1),[],e),s=n(ht,(e=>Number(e[ie].dataset.id)),[],e);return Oe("header",null,Oe("img",{title:at}),Oe("span",null,at),Ae(it,((e,t)=>t==r?null:Oe("img",{onClick:s,"data-id":t,title:"Dock to "+e,key:t}))),Oe("img",{onClick:o,title:"Close"}))},jl=({s:e})=>{var t;const n=null!=(t=l(ht,e))?t:1;return l(mt,e)?Oe("main",{"data-position":n},Oe(Rl,{s:e}),Oe(El,null,Oe(Ll,{s:e}))):null},zl=e=>t=>{return l=(t,l)=>t+e(l),Hl(t).reduce(l,0);var l},$l=e=>{var t;return null!=(t=null==e?void 0:e.size)?t:0},Al=zl($l),Jl=zl(Al),Dl=zl(Jl),Fl=(e,t)=>{var l;return null!=(l=null==e?void 0:e.has(t))&&l},Bl=e=>be(e)||0==$l(e),Hl=e=>{var t;return[...null!=(t=null==e?void 0:e.values())?t:[]]},Wl=e=>e.clear(),Ql=(e,t)=>null==e?void 0:e.forEach(t),Gl=(e,t)=>null==e?void 0:e.delete(t),Kl=e=>new Map(e),Ul=e=>{var t;return[...null!=(t=null==e?void 0:e.keys())?t:[]]},Xl=(e,t)=>null==e?void 0:e.get(t),Yl=(e,t)=>Ql(e,((e,l)=>t(l,e))),Zl=(e,t,l)=>be(l)?(Gl(e,t),e):null==e?void 0:e.set(t,l),_l=(e,t,l,n)=>(Fl(e,t)?null==n||n(Xl(e,t)):Zl(e,t,l()),Xl(e,t)),en=(e,t,l,n=Zl)=>(et(t,((t,n)=>l(e,n,t))),Yl(e,(l=>Ye(t,l)?0:n(e,l))),e),tn=(e,t,l,n)=>{const r={};return Ql(e,((e,o)=>{if(!(null==l?void 0:l(e,o))){const l=t?t(e,o):e;(null==n?void 0:n(l))||(r[o]=l)}})),r},ln=(e,t,l)=>tn(e,(e=>tn(e,t,l)),Bl,tt),nn=(e,t,l)=>tn(e,(e=>ln(e,t,l)),Bl,tt),rn=(e,t)=>{const l=Kl();return Ql(e,((e,n)=>{var r;return l.set(n,null!=(r=null==t?void 0:t(e))?r:e)})),l},on=e=>rn(e,rn),sn=e=>rn(e,on),an=(e,t,l,n,r=0)=>ve((l?_l:Xl)(e,t[r],r>Ce(t)-2?l:Kl),(o=>{if(r>Ce(t)-2)return(null==n?void 0:n(o))&&Zl(e,t[r]),o;const s=an(o,t,l,n,r+1);return Bl(o)&&Zl(e,t[r]),s})),dn=e=>new Set(Ie(e)||be(e)?e:[e]),un=(e,t)=>null==e?void 0:e.add(t),cn=/^\d+$/,hn=()=>{const e=[];let t=0;return[l=>{var n;return null!=(n=l?Fe(e):null)?n:F+t++},t=>{cn.test(t)&&Ce(e)<1e3&&De(e,t)}]},mn=e=>{let t;const[l,n]=hn(),r=Kl();return[(n,o,s,a=[],i=()=>[])=>{null!=t||(t=e());const d=l(1);return Zl(r,d,[n,o,s,a,i]),un(an(o,null!=s?s:[F],dn),d),d},(e,l,...n)=>$e(((e,t=[F])=>{const l=[],n=(e,r)=>r==Ce(t)?De(l,e):null===t[r]?Ql(e,(e=>n(e,r+1))):$e([t[r],null],(t=>n(Xl(e,t),r+1)));return n(e,0),l})(e,l),(e=>Ql(e,(e=>Xl(r,e)[0](t,...null!=l?l:[],...n))))),e=>ve(Xl(r,e),(([,t,l])=>(an(t,null!=l?l:[F],void 0,(t=>(Gl(t,e),Bl(t)?1:0))),Zl(r,e),n(e),l))),e=>ve(Xl(r,e),(([e,,l=[],n,r])=>{const o=(...s)=>{var a,i;const d=Ce(s);d==Ce(l)?e(t,...s,...r(s)):be(l[d])?$e(null!=(i=null==(a=n[d])?void 0:a.call(n,...s))?i:[],(e=>o(...s,e))):o(...s,l[d])};o()}))]};var pn=Object.defineProperty,gn=Object.getOwnPropertySymbols,bn=Object.prototype.hasOwnProperty,vn=Object.prototype.propertyIsEnumerable,fn=(e,t,l)=>t in e?pn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,yn=(e,t,l)=>new Promise(((n,r)=>{var o=e=>{try{a(l.next(e))}catch(e){r(e)}},s=e=>{try{a(l.throw(e))}catch(e){r(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,s);a((l=l.apply(e,t)).next())}));const In=Kl(),wn=Kl();var Cn=(e,t,l)=>new Promise(((n,r)=>{var o=e=>{try{a(l.next(e))}catch(e){r(e)}},s=e=>{try{a(l.throw(e))}catch(e){r(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(o,s);a((l=l.apply(e,t)).next())}));const kn="storage",xn=e=>[e,e],Tn=(e,t=Al)=>t(e[0])+t(e[1]),Sn=()=>[Kl(),Kl()],On=e=>[...e],qn=([e,t])=>e===t,Pn=(e,t,l)=>Zl(e,t,Xl(e,t)==-l?void 0:l),Nn=()=>{let e,t,l=!1,n=!1,r=0,o=[];const s=Kl(),a=Kl(),i=Kl(),d=Kl(),u=Kl(),c=Kl(),h=Kl(),m=Kl(),p=Kl(),g=Kl(),b=Kl(),v=Kl(),f=Kl(),y=Kl(),I=dn(),w=Kl(),C=Kl(),k=Kl(),x=Kl(),T=Sn(),S=Sn(),O=Sn(),q=Sn(),P=Sn(),N=Sn(),V=Sn(),L=Sn(),M=Sn(),E=Sn(),R=Sn(),j=Sn(),z=Sn(),$=Sn(),A=Sn(),J=Sn(),D=Sn(),F=Sn(),B=Sn(),H=Sn(),Q=Sn(),X=Sn(),ie=Kl(),de=Sn(),[ce,he,me,pe]=mn((()=>ll)),ge=e=>{if(!lt(e,((e,t)=>[G,K].includes(t))))return!1;const t=e[G];return!(!fe(t)&&t!=W||(Jt(e[K])!=t&&Ze(e,K),0))},ke=Ie,xe=(t,l)=>(!e||Fl(b,l)||ct(l))&&lt(t,((e,t)=>Te(l,t,e)),(()=>ct(l))),Te=(e,t,l,n)=>lt(n?l:Pe(l,e,t),((n,r)=>ve(Se(e,t,r,n),(e=>(l[r]=e,!0)),(()=>!1))),(()=>ct(e,t))),Se=(t,l,n,r)=>e?ve(Xl(Xl(b,t),n),(e=>Jt(r)!=e[G]?ct(t,l,n,r,e[K]):r),(()=>ct(t,l,n,r))):be(Jt(r))?ct(t,l,n,r):r,Oe=(e,t)=>lt(t?e:Ne(e),((t,l)=>ve(qe(l,t),(t=>(e[l]=t,!0)),(()=>!1))),(()=>ht())),qe=(e,l)=>t?ve(Xl(f,e),(t=>Jt(l)!=t[G]?ht(e,l,t[K]):l),(()=>ht(e,l))):be(Jt(l))?ht(e,l):l,Pe=(e,t,l)=>(ve(Xl(v,t),(([n,r])=>{Ql(n,((t,l)=>{Ye(e,l)||(e[l]=t)})),Ql(r,(n=>{Ye(e,n)||ct(t,l,n)}))})),e),Ne=e=>(t&&(Ql(y,((t,l)=>{Ye(e,l)||(e[l]=t)})),Ql(I,(t=>{Ye(e,t)||ht(t)}))),e),Ve=e=>en(b,e,((e,t,l)=>{const n=Kl(),r=dn();en(_l(b,t,Kl),l,((e,t,l)=>{Zl(e,t,l),ve(l[K],(e=>Zl(n,t,e)),(()=>un(r,t)))})),Zl(v,t,[n,r])}),((e,t)=>{Zl(b,t),Zl(v,t)})),Le=e=>en(f,e,((e,t,l)=>{Zl(f,t,l),ve(l[K],(e=>Zl(y,t,e)),(()=>un(I,t)))}),((e,t)=>{Zl(f,t),Zl(y,t),Gl(I,t)})),Me=e=>tt(e)?Gt():At(e),Ee=e=>en(k,e,((e,t,l)=>Re(t,l)),((e,t)=>Ge(t))),Re=(e,t)=>en(_l(k,e,(()=>(nt(e,1),Zl(w,e,hn()),Zl(C,e,Kl()),Kl()))),t,((t,l,n)=>je(e,t,l,n)),((t,l)=>Ke(e,t,l))),je=(e,t,l,n,r)=>en(_l(t,l,(()=>(st(e,l,1),Kl()))),n,((t,n,r)=>Je(e,l,t,n,r)),((n,o)=>Xe(e,t,l,n,o,r))),Je=(e,t,l,n,r)=>{Fl(l,n)||at(e,t,n,1);const o=Xl(l,n);r!==o&&(it(e,t,n,o,r),Zl(l,n,r))},Fe=(e,t,l,n,r)=>ve(Xl(t,l),(t=>Je(e,l,t,n,r)),(()=>je(e,t,l,Pe({[n]:r},e,l)))),Be=e=>tt(e)?Xt():Bt(e),He=e=>en(x,e,((e,t,l)=>We(t,l)),((e,t)=>_e(t))),We=(e,t)=>{Fl(x,e)||dt(e,1);const l=Xl(x,e);t!==l&&(ut(e,l,t),Zl(x,e,t))},Qe=e=>{var t;return null!=(t=Xl(k,e))?t:Re(e,{})},Ge=e=>Re(e,{}),Ke=(e,t,l)=>{const[,n]=Xl(w,e);n(l),je(e,t,l,{},!0)},Xe=(e,t,l,n,r,o)=>{var s;const a=Xl(null==(s=Xl(v,e))?void 0:s[0],r);if(!be(a)&&!o)return Je(e,l,n,r,a);const i=t=>{it(e,l,t,Xl(n,t)),at(e,l,t,-1),Zl(n,t)};be(a)?i(r):Yl(n,i),Bl(n)&&(st(e,l,-1),Bl(Zl(t,l))&&(nt(e,-1),Zl(k,e),Zl(w,e),Zl(C,e)))},_e=e=>{const t=Xl(y,e);if(!be(t))return We(e,t);ut(e,Xl(x,e)),dt(e,-1),Zl(x,e)},nt=(e,t)=>Pn(s,e,t),st=(e,t,l)=>Pn(_l(d,e,Kl),t,l)&&Zl(i,e,_l(i,e,(()=>0))+l),at=(e,t,l,n)=>{var r;const o=Xl(C,e),s=null!=(r=Xl(o,l))?r:0;(0==s&&1==n||1==s&&-1==n)&&Pn(_l(a,e,Kl),l,n),Zl(o,l,s!=-n?s+n:null),Pn(_l(_l(u,e,Kl),t,Kl),l,n)},it=(e,t,l,n,r)=>{var s;_l(_l(_l(c,e,Kl),t,Kl),l,(()=>[n,0]))[1]=r,null==(s=o[3])||s.call(o,e,t,l,r)},dt=(e,t)=>Pn(h,e,t),ut=(e,t,l)=>{var n;_l(m,e,(()=>[t,0]))[1]=l,null==(n=o[4])||n.call(o,e,l)},ct=(e,t,l,n,r)=>(De(_l(_l(_l(p,e,Kl),t,Kl),l,(()=>[])),n),r),ht=(e,t,l)=>(De(_l(g,e,(()=>[])),t),l),mt=(e,t,l)=>ve(Xl(Xl(Xl(c,e),t),l),(([e,t])=>[!0,e,t]),(()=>[!1,...xn(qt(e,t,l))])),pt=e=>ve(Xl(m,e),(([e,t])=>[!0,e,t]),(()=>[!1,...xn(Vt(e))])),gt=e=>Bl(p)||Bl(J[e])?0:Ql(e?sn(p):p,((t,l)=>Ql(t,((t,n)=>Ql(t,((t,r)=>he(J[e],[l,n,r],t))))))),bt=e=>Bl(g)||Bl(D[e])?0:Ql(e?rn(g):g,((t,l)=>he(D[e],[l],t))),vt=(e,t,l,n)=>{if(!Bl(e))return he(t,n,(()=>tn(e))),Yl(e,((e,t)=>he(l,[...null!=n?n:[],e],1==t))),1},ft=e=>{const t=Lt();t!=l&&he(T[e],void 0,t);const n=Bl(E[e]),r=Bl(z[e])&&Bl($[e])&&Bl(M[e])&&Bl(R[e])&&Bl(N[e])&&Bl(V[e])&&Bl(L[e])&&n&&Bl(O[e])&&Bl(q[e]),o=Bl(A[e])&&Bl(j[e])&&Bl(P[e])&&Bl(S[e]);if(!r||!o){const t=e?[rn(s),on(a),rn(i),on(d),sn(u),sn(c)]:[s,a,i,d,u,c];if(!r){vt(t[0],O[e],q[e]),Ql(t[1],((t,l)=>vt(t,N[e],V[e],[l]))),Ql(t[2],((t,l)=>{0!=t&&he(L[e],[l],xt(l))}));const l=dn();Ql(t[3],((t,r)=>{vt(t,M[e],R[e],[r])&&!n&&(he(E[e],[r,null]),un(l,r))})),n||Ql(t[5],((t,n)=>{if(!Fl(l,n)){const l=dn();Ql(t,(e=>Ql(e,(([t,n],r)=>n!==t?un(l,r):Gl(e,r))))),Ql(l,(t=>he(E[e],[n,t])))}})),Ql(t[4],((t,l)=>Ql(t,((t,n)=>vt(t,z[e],$[e],[l,n])))))}if(!o){let l;Ql(t[5],((t,n)=>{let r;Ql(t,((t,o)=>{let s;Ql(t,(([t,a],i)=>{a!==t&&(he(A[e],[n,o,i],a,t,mt),l=r=s=1)})),s&&he(j[e],[n,o],mt)})),r&&he(P[e],[n],mt)})),l&&he(S[e],void 0,mt)}}},yt=e=>{const t=zt();t!=n&&he(F[e],void 0,t);const l=Bl(H[e])&&Bl(Q[e]),r=Bl(X[e])&&Bl(B[e]);if(!l||!r){const t=e?[rn(h),rn(m)]:[h,m];if(l||vt(t[0],H[e],Q[e]),!r){let l;Ql(t[1],(([t,n],r)=>{n!==t&&(he(X[e],[r],n,t,pt),l=1)})),l&&he(B[e],void 0,pt)}}},It=(e,...t)=>(_t((()=>e(...Ae(t,ue)))),ll),wt=()=>nn(k),Ct=()=>Ul(k),kt=e=>Ul(Xl(C,ue(e))),xt=e=>$l(Xl(k,ue(e))),Tt=e=>Ul(Xl(k,ue(e))),St=(e,t,l,n=0,r)=>{return Ae(we(ze((o=Xl(k,ue(e)),s=(e,l)=>[be(t)?l:Xl(e,ue(t)),l],Ae([...null!=(a=null==o?void 0:o.entries())?a:[]],(([e,t])=>s(t,e)))),(([e],[t])=>{return((null!=(n=e)?n:0)<(null!=(r=t)?r:0)?-1:1)*(l?-1:1);var n,r})),n,be(r)?r:n+r),(([,e])=>e));var o,s,a},Ot=(e,t)=>Ul(Xl(Xl(k,ue(e)),ue(t))),qt=(e,t,l)=>Xl(Xl(Xl(k,ue(e)),ue(t)),ue(l)),Pt=()=>tn(x),Nt=()=>Ul(x),Vt=e=>Xl(x,ue(e)),Lt=()=>!Bl(k),Mt=e=>Fl(k,ue(e)),Et=(e,t)=>Fl(Xl(C,ue(e)),ue(t)),Rt=(e,t)=>Fl(Xl(k,ue(e)),ue(t)),jt=(e,t,l)=>Fl(Xl(Xl(k,ue(e)),ue(t)),ue(l)),zt=()=>!Bl(x),$t=e=>Fl(x,ue(e)),At=e=>It((()=>(e=>lt(e,xe,ct))(e)?Ee(e):0)),Bt=e=>It((()=>Oe(e)?He(e):0)),Ht=e=>{try{Me(rt(e))}catch(e){}return ll},Wt=t=>It((()=>{if((e=lt(t,(e=>lt(e,ge))))&&(Ve(t),!Bl(k))){const e=wt();Gt(),At(e)}})),Qt=e=>It((()=>{if(t=(e=>lt(e,ge))(e)){const l=Pt();Zt(),Xt(),t=!0,Le(e),Bt(l)}})),Gt=()=>It((()=>Ee({}))),Kt=e=>It((e=>Fl(k,e)?Ge(e):0),e),Ut=(e,t)=>It(((e,t)=>ve(Xl(k,e),(l=>Fl(l,t)?Ke(e,l,t):0))),e,t),Xt=()=>It((()=>He({}))),Yt=()=>It((()=>{Ve({}),e=!1})),Zt=()=>It((()=>{Le({}),t=!1})),_t=(e,t)=>{if(-1!=r){el();const l=e();return tl(t),l}},el=()=>{var e;return-1!=r&&r++,1==r&&(null==(e=o[0])||e.call(o),he(ie)),ll},tl=e=>{var t,b;return r>0&&(r--,0==r&&(r=1,gt(1),Bl(c)||ft(1),bt(1),Bl(m)||yt(1),(null==e?void 0:e(ll))&&(Ql(c,((e,t)=>Ql(e,((e,l)=>Ql(e,(([e],n)=>Dt(ll,t,l,n,e))))))),Wl(c),Ql(m,(([e],t)=>Ft(ll,t,e))),Wl(m)),he(de[0],void 0),r=-1,gt(0),Bl(c)||ft(0),bt(0),Bl(m)||yt(0),null==(t=o[1])||t.call(o),he(de[1],void 0),null==(b=o[2])||b.call(o),r=0,l=Lt(),n=zt(),$e([s,a,i,d,u,c,p,h,m,g],Wl))),ll},ll={getContent:()=>[wt(),Pt()],getTables:wt,getTableIds:Ct,getTable:e=>ln(Xl(k,ue(e))),getTableCellIds:kt,getRowCount:xt,getRowIds:Tt,getSortedRowIds:St,getRow:(e,t)=>tn(Xl(Xl(k,ue(e)),ue(t))),getCellIds:Ot,getCell:qt,getValues:Pt,getValueIds:Nt,getValue:Vt,hasTables:Lt,hasTable:Mt,hasTableCell:Et,hasRow:Rt,hasCell:jt,hasValues:zt,hasValue:$t,getTablesJson:()=>ot(k),getValuesJson:()=>ot(x),getJson:()=>ot([k,x]),getTablesSchemaJson:()=>ot(b),getValuesSchemaJson:()=>ot(f),getSchemaJson:()=>ot([b,f]),hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:e=>It((()=>{const t=ye(e)?e():e;ke(t)&&(([e,t])=>{(tt(e)?Gt:At)(e),(tt(t)?Xt:Bt)(t)})(t)})),setTables:At,setTable:(e,t)=>It((e=>xe(t,e)?Re(e,t):0),e),setRow:(e,t,l)=>It(((e,t)=>Te(e,t,l)?je(e,Qe(e),t,l):0),e,t),addRow:(e,t,l=!0)=>_t((()=>{let n;return Te(e,n,t)&&(e=ue(e),je(e,Qe(e),n=((e,t)=>{const[l]=Xl(w,e);let n;do{n=l(t)}while(Fl(Xl(k,e),n));return n})(e,l?1:0),t)),n})),setPartialRow:(e,t,l)=>It(((e,t)=>{if(Te(e,t,l,1)){const n=Qe(e);et(l,((l,r)=>Fe(e,n,t,r,l)))}}),e,t),setCell:(e,t,l,n)=>It(((e,t,l)=>ve(Se(e,t,l,ye(n)?n(qt(e,t,l)):n),(n=>Fe(e,Qe(e),t,l,n)))),e,t,l),setValues:Bt,setPartialValues:e=>It((()=>Oe(e,1)?et(e,((e,t)=>We(t,e))):0)),setValue:(e,t)=>It((e=>ve(qe(e,ye(t)?t(Vt(e)):t),(t=>We(e,t)))),e),applyChanges:e=>It((()=>{et(e[0],((e,t)=>be(e)?Kt(t):et(e,((e,l)=>be(e)?Ut(t,l):et(e,((e,n)=>Dt(ll,t,l,n,e))))))),et(e[1],((e,t)=>Ft(ll,t,e)))})),setTablesJson:Ht,setValuesJson:e=>{try{Be(rt(e))}catch(e){}return ll},setJson:e=>It((()=>{try{const[t,l]=rt(e);Me(t),Be(l)}catch(t){Ht(e)}})),setTablesSchema:Wt,setValuesSchema:Qt,setSchema:(e,t)=>It((()=>{Wt(e),Qt(t)})),delTables:Gt,delTable:Kt,delRow:Ut,delCell:(e,t,l,n)=>It(((e,t,l)=>ve(Xl(k,e),(r=>ve(Xl(r,t),(o=>Fl(o,l)?Xe(e,r,t,o,l,n):0))))),e,t,l),delValues:Xt,delValue:e=>It((e=>Fl(x,e)?_e(e):0),e),delTablesSchema:Yt,delValuesSchema:Zt,delSchema:()=>It((()=>{Yt(),Zt()})),transaction:_t,startTransaction:el,getTransactionChanges:()=>[tn(c,((e,t)=>-1===Xl(s,t)?void 0:tn(e,((e,l)=>-1===Xl(Xl(d,t),l)?void 0:tn(e,(([,e])=>e),(e=>qn(e)))),Bl,tt)),Bl,tt),tn(m,(([,e])=>e),(e=>qn(e))),1],getTransactionLog:()=>[!Bl(c),!Bl(m),nn(c,On,qn),nn(p),tn(m,On,qn),tn(g),tn(s),ln(d),nn(u),tn(h)],finishTransaction:tl,forEachTable:e=>Ql(k,((t,l)=>e(l,(e=>Ql(t,((t,l)=>e(l,(e=>Yl(t,e))))))))),forEachTableCell:(e,t)=>Yl(Xl(C,ue(e)),t),forEachRow:(e,t)=>Ql(Xl(k,ue(e)),((e,l)=>t(l,(t=>Yl(e,t))))),forEachCell:(e,t,l)=>Yl(Xl(Xl(k,ue(e)),ue(t)),l),forEachValue:e=>Yl(x,e),addSortedRowIdsListener:(e,t,l,n,r,o,s)=>{let a=St(e,t,l,n,r);return ce((()=>{const s=St(e,t,l,n,r);var i,d,u;d=a,Ce(i=s)===Ce(d)&&(u=(e,t)=>d[t]===e,i.every(u))||(a=s,o(ll,e,t,l,n,r,a))}),E[s?1:0],[e,t],[Ct])},addStartTransactionListener:e=>ce(e,ie),addWillFinishTransactionListener:e=>ce(e,de[0]),addDidFinishTransactionListener:e=>ce(e,de[1]),callListener:e=>(pe(e),ll),delListener:e=>(me(e),ll),getListenerStats:()=>({hasTables:Tn(T),tables:Tn(S),tableIds:Tn(O),hasTable:Tn(q),table:Tn(P),tableCellIds:Tn(N),hasTableCell:Tn(V,Jl),rowCount:Tn(L),rowIds:Tn(M),sortedRowIds:Tn(E),hasRow:Tn(R,Jl),row:Tn(j,Jl),cellIds:Tn(z,Jl),hasCell:Tn($,Dl),cell:Tn(A,Dl),invalidCell:Tn(J,Dl),hasValues:Tn(F),values:Tn(B),valueIds:Tn(H),hasValue:Tn(Q),value:Tn(X),invalidValue:Tn(D),transaction:Al(ie)+Tn(de)}),isMergeable:()=>!1,createStore:Nn,addListener:ce,callListeners:he,setInternalListeners:(e,t,l,n,r)=>o=[e,t,l,n,r]};return et({[U+Z]:[0,T,[],()=>[Lt()]],[Z]:[0,S],[_]:[0,O],[U+Y]:[1,q,[Ct],e=>[Mt(...e)]],[Y]:[1,P,[Ct]],[Y+re]:[1,N,[Ct]],[U+Y+ne]:[2,V,[Ct,kt],e=>[Et(...e)]],[te]:[1,L,[Ct]],[le]:[1,M,[Ct]],[U+ee]:[2,R,[Ct,Tt],e=>[Rt(...e)]],[ee]:[2,j,[Ct,Tt]],[re]:[2,z,[Ct,Tt]],[U+ne]:[3,$,[Ct,Tt,Ot],e=>[jt(...e)]],[ne]:[3,A,[Ct,Tt,Ot],e=>xn(qt(...e))],InvalidCell:[3,J],[U+se]:[0,F,[],()=>[zt()]],[se]:[0,B],[ae]:[0,H],[U+oe]:[1,Q,[Nt],e=>[$t(...e)]],[oe]:[1,X,[Nt],e=>xn(Vt(e[0]))],InvalidValue:[1,D]},(([e,t,l,n],r)=>{ll["add"+r+"Listener"]=(...r)=>ce(r[e],t[r[e+1]?1:0],e>0?we(r,0,e):void 0,l,n)})),Ue(ll)},Vn=({position:e="right",open:t=!1})=>{const l=A(Nn),n=it.indexOf(e);return J(l,(e=>{return t=st,l=sessionStorage,((e,t,l,n,r,o,s,a={},i=0,d=[])=>{let u,c,h,m=0,p=0,g=0;_l(In,d,(()=>0)),_l(wn,d,(()=>[]));const b=Kl(),[v,f,y,I,w]=((e=1,t,l)=>1!=e&&t.isMergeable()?[1,t.getMergeableContent,()=>t.getTransactionMergeableChanges(!l),([[e],[t]])=>!tt(e)||!tt(t),t.setDefaultContent]:2!=e?[0,t.getContent,t.getTransactionChanges,([e,t])=>!tt(e)||!tt(t),t.setContent]:ke("Store type not supported by this Persister"))(s,e,i),[C,k,x]=mn((()=>L)),T=e=>{e!=m&&(m=e,k(b,void 0,m))},S=t=>{(v&&Ie(null==t?void 0:t[0])?1===(null==t?void 0:t[2])?e.applyMergeableChanges:e.setMergeableContent:1===(null==t?void 0:t[2])?e.applyChanges:e.setContent)(t)},O=e=>yn(void 0,null,(function*(){return 2!=m&&(T(1),p++,yield V((()=>yn(void 0,null,(function*(){try{const l=yield t();Ie(l)?S(l):e?w(e):ke("Content is not an array: "+l)}catch(t){e&&w(e)}T(0)}))))),L})),q=()=>(c&&(r(c),c=void 0),L),P=e=>yn(void 0,null,(function*(){return 1!=m&&(T(2),g++,yield V((()=>yn(void 0,null,(function*(){try{yield l(f,e)}catch(e){}T(0)}))))),L})),N=()=>(h&&(e.delListener(h),h=void 0),L),V=(...e)=>yn(void 0,null,(function*(){return De(Xl(wn,d),...e),yield yn(void 0,null,(function*(){if(!Xl(In,d)){for(Zl(In,d,1);!be(u=Fe(Xl(wn,d)));)try{yield u()}catch(e){}Zl(In,d,0)}})),L})),L=((e,t)=>{for(var l in t||(t={}))bn.call(t,l)&&fn(e,l,t[l]);if(gn)for(var l of gn(t))vn.call(t,l)&&fn(e,l,t[l]);return e})({load:O,startAutoLoad:e=>yn(void 0,null,(function*(){q(),yield O(e);try{c=yield n(((e,t)=>yn(void 0,null,(function*(){t||e?2!=m&&(T(1),p++,S(null!=t?t:e),T(0)):yield O()}))))}catch(e){}return L})),stopAutoLoad:q,isAutoLoading:()=>!be(c),save:P,startAutoSave:()=>yn(void 0,null,(function*(){return N(),yield P(),h=e.addDidFinishTransactionListener((()=>{const e=y();I(e)&&P(e)})),L})),stopAutoSave:N,isAutoSaving:()=>!be(h),getStatus:()=>m,addStatusListener:e=>C(e,b),delListener:t=>(x(t),e),schedule:V,getStore:()=>e,destroy:()=>(Xl(wn,d).splice(0,void 0),q().stopAutoSave()),getStats:()=>({loads:p,saves:g})},a);return Ue(L)})(e,(()=>Cn(void 0,null,(function*(){return e=l.getItem(t),rt(e,((e,t)=>"￼"===t?void 0:t));var e}))),(e=>Cn(void 0,null,(function*(){return l.setItem(t,(n=e(),nt(n,((e,t)=>void 0===t?"￼":t))));var n}))),(e=>{const n=n=>{if(n.storageArea===l&&n.key===t)try{e(rt(n.newValue))}catch(t){e()}};return ce.addEventListener(kn,n),n}),(e=>ce.removeEventListener(kn,e)),0,3,{getStorageName:()=>t});var t,l}),void 0,(e=>{return l=function*(){yield e.load([{},{position:-1==n?1:n,open:!!t}]),yield e.startAutoSave()},new Promise(((e,t)=>{var n=e=>{try{o(l.next(e))}catch(e){t(e)}},r=e=>{try{o(l.throw(e))}catch(e){t(e)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,r);o((l=l.apply(void 0,null)).next())}));var l})),Oe(Te,null,Oe("aside",{id:st},Oe($t,{s:l}),Oe(jl,{s:l})),Oe("style",null,zt))};export{Vn as Inspector};
