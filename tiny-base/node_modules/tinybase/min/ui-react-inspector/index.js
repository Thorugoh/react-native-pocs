import e from"react";import{useCell as t,useValue as n,useSetValueCallback as s,useSetCellCallback as l,ValueView as a,useValueIds as r,useStoreOrStoreById as o,useIndexesOrIndexesById as i,useSliceRowIds as d,useTableCellIds as c,useResultRowCount as u,useResultSortedRowIds as h,ResultCellView as m,useResultTableCellIds as g,useRelationshipsOrRelationshipsById as p,CellView as b,useRowIds as f,useRemoteRowId as y,useRowCount as I,useSortedRowIds as w,useIndexes as v,useIndexIds as C,useSliceIds as k,useMetrics as x,useMetricIds as T,useMetric as S,useQueries as q,useQueryIds as N,useRelationships as V,useRelationshipIds as L,useStore as M,useTableIds as R,useValues as E,useStoreIds as z,useMetricsIds as $,useIndexesIds as A,useRelationshipsIds as J,useQueriesIds as O,useCreateStore as P,useCreatePersister as D}from"../ui-react/index.js";const F=e=>typeof e,j="",B=F(j),H=F(!0),W=F(0),Q=F(F),G="type",K="default",U="Has",X="Ids",Y="Table",Z=Y+"s",_=Y+X,ee="Row",te=ee+"Count",ne=ee+X,se="Cell",le=se+X,ae="Value",re=ae+"s",oe=ae+X,ie="currentTarget",de="value",ce=e=>j+e,ue=globalThis.window,he=Math,me=he.min,ge=he.floor,pe=isFinite,be=e=>null==e,fe=(e,t,n)=>be(e)?n?.():t(e),ye=e=>e==B||e==H,Ie=e=>F(e)==Q,we=e=>Array.isArray(e),ve=(e,t,n)=>e.slice(t,n),Ce=e=>e.length,ke=e=>{throw Error(e)},{PureComponent:xe,Fragment:Te,createContext:Se,createElement:qe,useCallback:Ne,useContext:Ve,useEffect:Le,useLayoutEffect:Me,useMemo:Re,useRef:Ee,useState:ze,useSyncExternalStore:$e}=e,Ae=(e,...t)=>be(e)?{}:e(...t),Je=(e,t)=>e.sort(t),Oe=(e,t)=>e.forEach(t),Pe=(e,t)=>e.map(t),De=e=>0==Ce(e),Fe=(e,...t)=>e.push(...t),je=e=>e.shift(),Be=Object,He=e=>Be.getPrototypeOf(e),We=Be.entries,Qe=Be.isFrozen,Ge=e=>!be(e)&&fe(He(e),(e=>e==Be.prototype||be(He(e))),(()=>!0)),Ke=Be.keys,Ue=Be.freeze,Xe=(e=[])=>Be.fromEntries(e),Ye=(e,t)=>t in e,Ze=(e,t)=>(delete e[t],e),_e=(e,t)=>Pe(We(e),(([e,n])=>t(n,e))),et=(e,t)=>Xe(_e(e,((e,n)=>[n,t(e,n)]))),tt=e=>Ge(e)&&0==(e=>Ce(Ke(e)))(e),nt=(e,t,n,s=0)=>be(e)||!Ge(e)||!s&&tt(e)||Qe(e)?(n?.(),!1):(((e,t)=>{Oe(We(e),(([e,n])=>t(n,e)))})(e,((n,s)=>{t(n,s)||Ze(e,s)})),!!s||!tt(e)),st=JSON.stringify,lt=JSON.parse,at=e=>st(e,((e,t)=>t instanceof Map?Be.fromEntries([...t]):t)),rt="tinybaseInspector",ot="TinyBase Inspector",it=["left","top","bottom","right","full"],dt="state",ct="sort",ut="open",ht="position",mt=ut,gt="editable",pt=(...e)=>at(e),bt=(e,t)=>Pe(Je([...e]),t),ft=(e,n)=>[!!t(dt,e,gt,n),Ne((t=>{n.setCell(dt,e,gt,(e=>!e)),t.preventDefault()}),[n,e])],yt="M20 80l5-15l40-40l10 10l-40 40l-15 5m5-15l10 10",It='content:url("',wt=It+"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' stroke-width='4' stroke='white' fill='none'>",vt='</svg>")',Ct=It+"data:image/svg+xml,%3csvg viewBox='0 0 680 680' xmlns='http://www.w3.org/2000/svg' style='width:680px%3bheight:680px'%3e %3cpath stroke='white' stroke-width='80' fill='none' d='M340 617a84 241 90 11.01 0zM131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124zm-12-127a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e %3cpath fill='%23d81b60' d='M131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124z' /%3e %3cpath d='M249 619a94 240 90 00308-128 114 289 70 01-308 128zM119 208a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e%3c/svg%3e\")",kt=Pe([[20,20,20,60],[20,20,60,20],[20,60,60,20],[60,20,20,60],[30,30,40,40]],(([e,t,n,s])=>wt+`<rect x='20' y='20' width='60' height='60' fill='grey'/><rect x='${e}' y='${t}' width='${n}' height='${s}' fill='white'/>`+vt)),xt=wt+"<path d='M20 20l60 60M20 80l60-60' />"+vt,Tt=wt+`<path d='${yt}' />`+vt,St=wt+`<path d='${yt}M20 20l60 60' />`+vt,qt="*::-webkit-scrollbar",Nt=((e,t="")=>e.join(t))(_e({"":"all:initial;font-family:sans-serif;font-size:0.75rem;position:fixed;z-index:999999","*":"all:revert","*::before":"all:revert","*::after":"all:revert",[qt]:"width:0.5rem;height:0.5rem;",[qt+"-track"]:"background:#111",[qt+"-thumb"]:"background:#999;border:1px solid #111",[qt+"-thumb:hover"]:"background:#fff",[qt+"-corner"]:"background:#111",img:"width:1rem;height:1rem;background:#111;border:0;vertical-align:text-bottom",">img":"padding:0.25rem;bottom:0;right:0;position:fixed;"+Ct,...Xe(Pe(["bottom:0;left:0","top:0;right:0"],((e,t)=>[`>img[data-position='${t}']`,e]))),main:"display:flex;flex-direction:column;background:#111d;color:#fff;position:fixed;",...Xe(Pe(["bottom:0;left:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:30vh","bottom:0;left:0;width:100vw;height:30vh","top:0;right:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:100vh"],((e,t)=>[`main[data-position='${t}']`,e]))),header:"display:flex;padding:0.25rem;background:#000;align-items:center","header>img:nth-of-type(1)":Ct,"header>img:nth-of-type(6)":xt,...Xe(Pe(kt,((e,t)=>[`header>img[data-id='${t}']`,e]))),"header>span":"flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-left:0.25rem",article:"padding:0.25rem 0.25rem 0.25rem 0.5rem;overflow:auto;flex:1",details:"margin-left:0.75rem;width:fit-content;","details img":"display:none","details[open]>summary img":"display:unset;background:none;margin-left:0.25rem","details[open]>summary img.edit":Tt,"details[open]>summary img.done":St,summary:"margin-left:-0.75rem;line-height:1.25rem;user-select:none;width:fit-content",table:"border-collapse:collapse;table-layout:fixed;margin-bottom:0.5rem","table input":"background:#111;color:unset;padding:0 0.25rem;border:0;font-size:unset;vertical-align:top;margin:0",'table input[type="number"]':"width:4rem","table tbody button":"font-size:0;background:#fff;border-radius:50%;margin:0 0.125rem 0 0;width:0.85rem;color:#111","table button:first-letter":"font-size:0.75rem",thead:"background:#222","th:nth-of-type(1)":"min-width:2rem;","th.sorted":"background:#000","table caption":"text-align:left;white-space:nowrap;line-height:1.25rem",button:"width:1.5rem;border:none;background:none;color:#fff;padding:0","button[disabled]":"color:#777","button.next":"margin-right:0.5rem",[`th,#${rt} td`]:"overflow:hidden;text-overflow:ellipsis;padding:0.25rem 0.5rem;max-width:12rem;white-space:nowrap;border-width:1px 0;border-style:solid;border-color:#777;text-align:left","span.warn":"margin:0.25rem;color:#d81b60"},((e,t)=>e?`#${rt} ${t}{${e}}`:""))),Vt=({s:e})=>{const t=n(ht,e)??1,l=s(mt,(()=>!0),[],e);return n(mt,e)?null:qe("img",{onClick:l,title:ot,"data-position":t})},Lt=({uniqueId:e,summary:n,editable:s,handleEditable:a,children:r,s:o})=>{const i=!!t(dt,e,ut,o),d=l(dt,e,ut,(e=>e[ie].open),[],o);return qe("details",{open:i,onToggle:d},qe("summary",null,n,a?qe("img",{onClick:a,className:s?"done":"edit"}):null),r)},Mt=e=>{const t=F(e);return ye(t)||t==W&&pe(e)?t:void 0},Rt=(e,t,n,s,l)=>be(l)?e.delCell(t,n,s,!0):e.setCell(t,n,s,l),Et=(e,t,n)=>be(n)?e.delValue(t):e.setValue(t,n),zt=(e,t,n,s)=>e==B?t:e==W?n:s,$t="editable",At=(e,t)=>Pe(c(e,t),(t=>e+"."+t)),Jt=(e,t,n)=>{const s=Ne(e,t);return n?s:void 0},Ot=(...e)=>Re((()=>e),e),Pt=(e,t)=>Re((()=>({store:e,tableId:t})),[e,t]),Dt=(e,t)=>Re((()=>({queries:e,queryId:t})),[e,t]),Ft=(e,t=!1,n,s=0,l,a,r,o)=>{const[[i,d,c],u]=ze([e,t,s]),h=Ne((e=>{u(e),o?.(e)}),[o]),m=Jt((e=>h([e,e==i&&!d,c])),[h,i,d,c],n),g=Ne((e=>h([i,d,e])),[h,i,d]),p=!0===r?en:r;return[[i,d,c],m,Re((()=>!1===r?null:qe(p,{offset:c,limit:l,total:a,onChange:g})),[r,p,c,l,a,g])]},jt=(e,t,n)=>Re((()=>{const s=t??e;return et(we(s)?Xe(Pe(s,(e=>[e,e]))):s,((e,t)=>{return{label:t,component:n,...(s=e,F(s)==B?{label:e}:e)};var s}))}),[t,n,e]),Bt=({className:e,headerRow:t,idColumn:n,params:[s,l,a,r,o,i]})=>qe("table",{className:e},i?qe("caption",null,i):null,!1===t?null:qe("thead",null,qe("tr",null,!1===n?null:qe(Ht,{sort:r??[],label:"Id",onClick:o}),_e(s,(({label:e},t)=>qe(Ht,{key:t,cellId:t,label:e,sort:r??[],onClick:o}))))),qe("tbody",null,Pe(a,(e=>qe("tr",{key:e},!1===n?null:qe("th",null,e),_e(s,(({component:t,getComponentProps:n},s)=>qe("td",{key:s},qe(t,{...Ae(n,e,s),...l,rowId:e,cellId:s}))))))))),Ht=({cellId:e,sort:[t,n],label:s=e??j,onClick:l})=>qe("th",{onClick:Jt((()=>l?.(e)),[l,e],l),className:be(n)||t!=e?void 0:`sorted ${n?"de":"a"}scending`},be(n)||t!=e?null:(n?"↓":"↑")+" ",s),Wt=({localRowId:e,params:[t,n,s,l,a,r,o]})=>{const i=y(a,e,r);return qe("tr",null,!1===t?null:qe(Te,null,qe("th",null,e),qe("th",null,i)),_e(n,(({component:t,getComponentProps:n},a)=>{const[r,d]=((e,t="",n)=>e.split(t,n))(a,".",2),c=r===s?e:r===l?i:null;return be(c)?null:qe("td",{key:a},qe(t,{...Ae(n,c,d),store:o,tableId:r,rowId:c,cellId:d}))})))},Qt=({thing:e,onThingChange:t,className:n,hasSchema:s,showType:l=!0})=>{const[a,r]=ze(),[o,i]=ze(),[d,c]=ze(),[u,h]=ze(),[m,g]=ze();o!==e&&(r(Mt(e)),i(e),c(e+""),h(Number(e)||0),g(!!e));const p=Ne(((e,n)=>{n(e),i(e),t(e)}),[t]),b=Ne((()=>{if(!s?.()){const e=zt(a,W,H,B),n=zt(e,d,u,m);r(e),i(n),t(n)}}),[s,t,d,u,m,a]);return qe("div",{className:n},l?qe("button",{className:a,onClick:b},a):null,zt(a,qe("input",{key:a,value:d,onChange:Ne((e=>p(e[ie][de]+"",c)),[p])}),qe("input",{key:a,type:"number",value:u,onChange:Ne((e=>p(Number(e[ie][de]||0),h)),[p])}),qe("input",{key:a,type:"checkbox",checked:m,onChange:Ne((e=>p(!!e[ie].checked,g)),[p])})))},Gt=({tableId:e,cellId:t,descending:n,offset:s,limit:l,store:a,editable:r,sortOnClick:o,paginator:i=!1,onChange:d,customCells:u,...h})=>{const[m,g,p]=Ft(t,n,o,s,l,I(e,a),i,d);return qe(Bt,{...h,params:Ot(jt(c(e,a),u,r?Zt:b),Pt(a,e),w(e,...m,l,a),m,g,p)})},Kt=({store:e,editable:t=!1,valueComponent:n=(t?_t:a),getValueComponentProps:s,className:l,headerRow:o,idColumn:i})=>qe("table",{className:l},!1===o?null:qe("thead",null,qe("tr",null,!1===i?null:qe("th",null,"Id"),qe("th",null,ae))),qe("tbody",null,Pe(r(e),(t=>qe("tr",{key:t},!1===i?null:qe("th",null,t),qe("td",null,qe(n,{...Ae(s,t),valueId:t,store:e}))))))),Ut=({indexId:e,sliceId:t,indexes:n,editable:s,customCells:l,...a})=>{const[r,o,u]=((e,t)=>[e,e?.getStore(),e?.getTableId(t)])(i(n),e);return qe(Bt,{...a,params:Ot(jt(c(u,o),l,s?Zt:b),Pt(o,u),d(e,t,r))})},Xt=({relationshipId:e,relationships:t,editable:n,customCells:s,className:l,headerRow:a,idColumn:r=!0})=>{const[o,i,d,c]=((e,t)=>[e,e?.getStore(),e?.getLocalTableId(t),e?.getRemoteTableId(t)])(p(t),e),u=jt([...At(d,i),...At(c,i)],s,n?Zt:b),h=Ot(r,u,d,c,e,o,i);return qe("table",{className:l},!1===a?null:qe("thead",null,qe("tr",null,!1===r?null:qe(Te,null,qe("th",null,d,".Id"),qe("th",null,c,".Id")),_e(u,(({label:e},t)=>qe("th",{key:t},e))))),qe("tbody",null,Pe(f(d,i),(e=>qe(Wt,{key:e,localRowId:e,params:h})))))},Yt=({queryId:e,cellId:t,descending:n,offset:s,limit:l,queries:a,sortOnClick:r,paginator:o=!1,customCells:i,onChange:d,...c})=>{const[p,b,f]=Ft(t,n,r,s,l,u(e,a),o,d);return qe(Bt,{...c,params:Ot(jt(g(e,a),i,m),Dt(a,e),h(e,...p,l,a),p,b,f)})},Zt=({tableId:e,rowId:n,cellId:s,store:a,className:r,showType:i})=>qe(Qt,{thing:t(e,n,s,a),onThingChange:l(e,n,s,(e=>e),[],a),className:r??$t+se,showType:i,hasSchema:o(a)?.hasTablesSchema}),_t=({valueId:e,store:t,className:l,showType:a})=>qe(Qt,{thing:n(e,t),onThingChange:s(e,(e=>e),[],t),className:l??$t+ae,showType:a,hasSchema:o(t)?.hasValuesSchema}),en=({onChange:e,total:t,offset:n=0,limit:s=t,singular:l="row",plural:a=l+"s"})=>{(n>t||n<0)&&(n=0,e(0));const r=Jt((()=>e(n-s)),[e,n,s],n>0),o=Jt((()=>e(n+s)),[e,n,s],n+s<t);return qe(Te,null,t>s&&qe(Te,null,qe("button",{className:"previous",disabled:0==n,onClick:r},"←"),qe("button",{className:"next",disabled:n+s>=t,onClick:o},"→"),n+1," to ",me(t,n+s)," of "),t," ",1!=t?a:l)},tn=({indexes:e,indexesId:t,indexId:n,s:s})=>qe(Lt,{uniqueId:pt("i",t,n),summary:"Index: "+n,s:s},Pe(k(n,e),(l=>qe(nn,{indexes:e,indexesId:t,indexId:n,sliceId:l,s:s,key:l})))),nn=({indexes:e,indexesId:t,indexId:n,sliceId:s,s:l})=>{const a=pt("i",t,n,s),[r,o]=ft(a,l);return qe(Lt,{uniqueId:a,summary:"Slice: "+s,editable:r,handleEditable:o,s:l},qe(Ut,{sliceId:s,indexId:n,indexes:e,editable:r}))},sn=({indexesId:e,s:t})=>{const n=v(e),s=C(n);return be(n)?null:qe(Lt,{uniqueId:pt("i",e),summary:"Indexes: "+(e??K),s:t},De(s)?"No indexes defined":bt(s,(s=>qe(tn,{indexes:n,indexesId:e,indexId:s,s:t,key:s}))))},ln=({metrics:e,metricId:t})=>qe("tr",null,qe("th",null,t),qe("td",null,e?.getTableId(t)),qe("td",null,S(t,e))),an=({metricsId:e,s:t})=>{const n=x(e),s=T(n);return be(n)?null:qe(Lt,{uniqueId:pt("m",e),summary:"Metrics: "+(e??K),s:t},De(s)?"No metrics defined":qe("table",null,qe("thead",null,qe("th",null,"Metric Id"),qe("th",null,"Table Id"),qe("th",null,"Metric")),qe("tbody",null,Pe(s,(e=>qe(ln,{metrics:n,metricId:e,key:e}))))))},rn=({queries:e,queriesId:n,queryId:s,s:a})=>{const r=pt("q",n,s),[o,i,d]=lt(t(dt,r,ct,a)??"[]"),c=l(dt,r,ct,at,[],a);return qe(Lt,{uniqueId:r,summary:"Query: "+s,s:a},qe(Yt,{queryId:s,queries:e,cellId:o,descending:i,offset:d,limit:10,paginator:!0,sortOnClick:!0,onChange:c}))},on=({queriesId:e,s:t})=>{const n=q(e),s=N(n);return be(n)?null:qe(Lt,{uniqueId:pt("q",e),summary:"Queries: "+(e??K),s:t},De(s)?"No queries defined":bt(s,(s=>qe(rn,{queries:n,queriesId:e,queryId:s,s:t,key:s}))))},dn=({relationships:e,relationshipsId:t,relationshipId:n,s:s})=>{const l=pt("r",t,n),[a,r]=ft(l,s);return qe(Lt,{uniqueId:l,summary:"Relationship: "+n,editable:a,handleEditable:r,s:s},qe(Xt,{relationshipId:n,relationships:e,editable:a}))},cn=({relationshipsId:e,s:t})=>{const n=V(e),s=L(n);return be(n)?null:qe(Lt,{uniqueId:pt("r",e),summary:"Relationships: "+(e??K),s:t},De(s)?"No relationships defined":bt(s,(s=>qe(dn,{relationships:n,relationshipsId:e,relationshipId:s,s:t,key:s}))))},un=({tableId:e,store:n,storeId:s,s:a})=>{const r=pt("t",s,e),[o,i,d]=lt(t(dt,r,ct,a)??"[]"),c=l(dt,r,ct,at,[],a),[u,h]=ft(r,a);return qe(Lt,{uniqueId:r,summary:Y+": "+e,editable:u,handleEditable:h,s:a},qe(Gt,{tableId:e,store:n,cellId:o,descending:i,offset:d,limit:10,paginator:!0,sortOnClick:!0,onChange:c,editable:u}))},hn=({store:e,storeId:t,s:n})=>{const s=pt("v",t),[l,a]=ft(s,n);return De(r(e))?null:qe(Lt,{uniqueId:s,summary:re,editable:l,handleEditable:a,s:n},qe(Kt,{store:e,editable:l}))},mn=({storeId:e,s:t})=>{const n=M(e),s=R(n);return be(n)?null:qe(Lt,{uniqueId:pt("s",e),summary:(n.isMergeable()?"Mergeable":"")+"Store: "+(e??K),s:t},qe(hn,{storeId:e,store:n,s:t}),bt(s,(s=>qe(un,{store:n,storeId:e,tableId:s,s:t,key:s}))))},gn=({s:e})=>{const t=Ee(null),n=Ee(0),[s,l]=ze(!1),{scrollLeft:a,scrollTop:r}=E(e);Me((()=>{const e=t.current;if(e&&!s){const t=new MutationObserver((()=>{e.scrollWidth>=ge(a)+e.clientWidth&&e.scrollHeight>=ge(r)+e.clientHeight&&e.scrollTo(a,r)}));return t.observe(e,{childList:!0,subtree:!0}),()=>t.disconnect()}}),[s,a,r]);const o=Ne((t=>{const{scrollLeft:s,scrollTop:a}=t[ie];cancelIdleCallback(n.current),n.current=requestIdleCallback((()=>{l(!0),e.setPartialValues({scrollLeft:s,scrollTop:a})}))}),[e]),i=M(),d=z(),c=x(),u=$(),h=v(),m=A(),g=V(),p=J(),b=q(),f=O();return be(i)&&De(d)&&be(c)&&De(u)&&be(h)&&De(m)&&be(g)&&De(p)&&be(b)&&De(f)?qe("span",{className:"warn"},"There are no Stores or other objects to inspect. Make sure you placed the Inspector inside a Provider component."):qe("article",{ref:t,onScroll:o},qe(mn,{s:e}),Pe(d,(t=>qe(mn,{storeId:t,s:e,key:t}))),qe(an,{s:e}),Pe(u,(t=>qe(an,{metricsId:t,s:e,key:t}))),qe(sn,{s:e}),Pe(m,(t=>qe(sn,{indexesId:t,s:e,key:t}))),qe(cn,{s:e}),Pe(p,(t=>qe(cn,{relationshipsId:t,s:e,key:t}))),qe(on,{s:e}),Pe(f,(t=>qe(on,{queriesId:t,s:e,key:t}))))};class pn extends xe{constructor(e){super(e),this.state={e:0}}static getDerivedStateFromError(){return{e:1}}componentDidCatch=(e,t)=>console.error(e,t.componentStack);render(){return this.state.e?qe("span",{className:"warn"},"Inspector error: please see console for details."):this.props.children}}const bn=({s:e})=>{const t=n(ht,e)??1,l=s(mt,(()=>!1),[],e),a=s(ht,(e=>Number(e[ie].dataset.id)),[],e);return qe("header",null,qe("img",{title:ot}),qe("span",null,ot),Pe(it,((e,n)=>n==t?null:qe("img",{onClick:a,"data-id":n,title:"Dock to "+e,key:n}))),qe("img",{onClick:l,title:"Close"}))},fn=({s:e})=>{const t=n(ht,e)??1;return n(mt,e)?qe("main",{"data-position":t},qe(bn,{s:e}),qe(pn,null,qe(gn,{s:e}))):null},yn=e=>t=>{return n=(t,n)=>t+e(n),Tn(t).reduce(n,0);var n},In=e=>e?.size??0,wn=yn(In),vn=yn(wn),Cn=yn(vn),kn=(e,t)=>e?.has(t)??!1,xn=e=>be(e)||0==In(e),Tn=e=>[...e?.values()??[]],Sn=e=>e.clear(),qn=(e,t)=>e?.forEach(t),Nn=(e,t)=>e?.delete(t),Vn=e=>new Map(e),Ln=e=>[...e?.keys()??[]],Mn=(e,t)=>e?.get(t),Rn=(e,t)=>qn(e,((e,n)=>t(n,e))),En=(e,t,n)=>be(n)?(Nn(e,t),e):e?.set(t,n),zn=(e,t,n,s)=>(kn(e,t)?s?.(Mn(e,t)):En(e,t,n()),Mn(e,t)),$n=(e,t,n,s=En)=>(et(t,((t,s)=>n(e,s,t))),Rn(e,(n=>Ye(t,n)?0:s(e,n))),e),An=(e,t,n,s)=>{const l={};return qn(e,((e,a)=>{if(!n?.(e,a)){const n=t?t(e,a):e;s?.(n)||(l[a]=n)}})),l},Jn=(e,t,n)=>An(e,(e=>An(e,t,n)),xn,tt),On=(e,t,n)=>An(e,(e=>Jn(e,t,n)),xn,tt),Pn=(e,t)=>{const n=Vn();return qn(e,((e,s)=>n.set(s,t?.(e)??e))),n},Dn=e=>Pn(e,Pn),Fn=e=>Pn(e,Dn),jn=(e,t,n,s,l=0)=>fe((n?zn:Mn)(e,t[l],l>Ce(t)-2?n:Vn),(a=>{if(l>Ce(t)-2)return s?.(a)&&En(e,t[l]),a;const r=jn(a,t,n,s,l+1);return xn(a)&&En(e,t[l]),r})),Bn=e=>new Set(we(e)||be(e)?e:[e]),Hn=(e,t)=>e?.add(t),Wn=/^\d+$/,Qn=()=>{const e=[];let t=0;return[n=>(n?je(e):null)??j+t++,t=>{Wn.test(t)&&Ce(e)<1e3&&Fe(e,t)}]},Gn=e=>{let t;const[n,s]=Qn(),l=Vn();return[(s,a,r,o=[],i=()=>[])=>{t??=e();const d=n(1);return En(l,d,[s,a,r,o,i]),Hn(jn(a,r??[j],Bn),d),d},(e,n,...s)=>Oe(((e,t=[j])=>{const n=[],s=(e,l)=>l==Ce(t)?Fe(n,e):null===t[l]?qn(e,(e=>s(e,l+1))):Oe([t[l],null],(t=>s(Mn(e,t),l+1)));return s(e,0),n})(e,n),(e=>qn(e,(e=>Mn(l,e)[0](t,...n??[],...s))))),e=>fe(Mn(l,e),(([,t,n])=>(jn(t,n??[j],void 0,(t=>(Nn(t,e),xn(t)?1:0))),En(l,e),s(e),n))),e=>fe(Mn(l,e),(([e,,n=[],s,l])=>{const a=(...r)=>{const o=Ce(r);o==Ce(n)?e(t,...r,...l(r)):be(n[o])?Oe(s[o]?.(...r)??[],(e=>a(...r,e))):a(...r,n[o])};a()}))]},Kn=Vn(),Un=Vn(),Xn="storage",Yn=e=>[e,e],Zn=(e,t=wn)=>t(e[0])+t(e[1]),_n=()=>[Vn(),Vn()],es=e=>[...e],ts=([e,t])=>e===t,ns=(e,t,n)=>En(e,t,Mn(e,t)==-n?void 0:n),ss=()=>{let e,t,n=!1,s=!1,l=0,a=[];const r=Vn(),o=Vn(),i=Vn(),d=Vn(),c=Vn(),u=Vn(),h=Vn(),m=Vn(),g=Vn(),p=Vn(),b=Vn(),f=Vn(),y=Vn(),I=Vn(),w=Bn(),v=Vn(),C=Vn(),k=Vn(),x=Vn(),T=_n(),S=_n(),q=_n(),N=_n(),V=_n(),L=_n(),M=_n(),R=_n(),E=_n(),z=_n(),$=_n(),A=_n(),J=_n(),O=_n(),P=_n(),D=_n(),F=_n(),j=_n(),B=_n(),H=_n(),Q=_n(),X=_n(),ie=Vn(),de=_n(),[ue,he,me,ge]=Gn((()=>nn)),pe=e=>{if(!nt(e,((e,t)=>[G,K].includes(t))))return!1;const t=e[G];return!(!ye(t)&&t!=W||(Mt(e[K])!=t&&Ze(e,K),0))},ke=we,xe=(t,n)=>(!e||kn(b,n)||ut(n))&&nt(t,((e,t)=>Te(n,t,e)),(()=>ut(n))),Te=(e,t,n,s)=>nt(s?n:Ve(n,e,t),((s,l)=>fe(Se(e,t,l,s),(e=>(n[l]=e,!0)),(()=>!1))),(()=>ut(e,t))),Se=(t,n,s,l)=>e?fe(Mn(Mn(b,t),s),(e=>Mt(l)!=e[G]?ut(t,n,s,l,e[K]):l),(()=>ut(t,n,s,l))):be(Mt(l))?ut(t,n,s,l):l,qe=(e,t)=>nt(t?e:Le(e),((t,n)=>fe(Ne(n,t),(t=>(e[n]=t,!0)),(()=>!1))),(()=>ht())),Ne=(e,n)=>t?fe(Mn(y,e),(t=>Mt(n)!=t[G]?ht(e,n,t[K]):n),(()=>ht(e,n))):be(Mt(n))?ht(e,n):n,Ve=(e,t,n)=>(fe(Mn(f,t),(([s,l])=>{qn(s,((t,n)=>{Ye(e,n)||(e[n]=t)})),qn(l,(s=>{Ye(e,s)||ut(t,n,s)}))})),e),Le=e=>(t&&(qn(I,((t,n)=>{Ye(e,n)||(e[n]=t)})),qn(w,(t=>{Ye(e,t)||ht(t)}))),e),Me=e=>$n(b,e,((e,t,n)=>{const s=Vn(),l=Bn();$n(zn(b,t,Vn),n,((e,t,n)=>{En(e,t,n),fe(n[K],(e=>En(s,t,e)),(()=>Hn(l,t)))})),En(f,t,[s,l])}),((e,t)=>{En(b,t),En(f,t)})),Re=e=>$n(y,e,((e,t,n)=>{En(y,t,n),fe(n[K],(e=>En(I,t,e)),(()=>Hn(w,t)))}),((e,t)=>{En(y,t),En(I,t),Nn(w,t)})),Ee=e=>tt(e)?Gt():jt(e),ze=e=>$n(k,e,((e,t,n)=>$e(t,n)),((e,t)=>Ge(t))),$e=(e,t)=>$n(zn(k,e,(()=>(st(e,1),En(v,e,Qn()),En(C,e,Vn()),Vn()))),t,((t,n,s)=>Ae(e,t,n,s)),((t,n)=>Ke(e,t,n))),Ae=(e,t,n,s,l)=>$n(zn(t,n,(()=>(rt(e,n,1),Vn()))),s,((t,s,l)=>De(e,n,t,s,l)),((s,a)=>Xe(e,t,n,s,a,l))),De=(e,t,n,s,l)=>{kn(n,s)||ot(e,t,s,1);const a=Mn(n,s);l!==a&&(it(e,t,s,a,l),En(n,s,l))},je=(e,t,n,s,l)=>fe(Mn(t,n),(t=>De(e,n,t,s,l)),(()=>Ae(e,t,n,Ve({[s]:l},e,n)))),Be=e=>tt(e)?Xt():Bt(e),He=e=>$n(x,e,((e,t,n)=>We(t,n)),((e,t)=>_e(t))),We=(e,t)=>{kn(x,e)||dt(e,1);const n=Mn(x,e);t!==n&&(ct(e,n,t),En(x,e,t))},Qe=e=>Mn(k,e)??$e(e,{}),Ge=e=>$e(e,{}),Ke=(e,t,n)=>{const[,s]=Mn(v,e);s(n),Ae(e,t,n,{},!0)},Xe=(e,t,n,s,l,a)=>{const r=Mn(Mn(f,e)?.[0],l);if(!be(r)&&!a)return De(e,n,s,l,r);const o=t=>{it(e,n,t,Mn(s,t)),ot(e,n,t,-1),En(s,t)};be(r)?o(l):Rn(s,o),xn(s)&&(rt(e,n,-1),xn(En(t,n))&&(st(e,-1),En(k,e),En(v,e),En(C,e)))},_e=e=>{const t=Mn(I,e);if(!be(t))return We(e,t);ct(e,Mn(x,e)),dt(e,-1),En(x,e)},st=(e,t)=>ns(r,e,t),rt=(e,t,n)=>ns(zn(d,e,Vn),t,n)&&En(i,e,zn(i,e,(()=>0))+n),ot=(e,t,n,s)=>{const l=Mn(C,e),a=Mn(l,n)??0;(0==a&&1==s||1==a&&-1==s)&&ns(zn(o,e,Vn),n,s),En(l,n,a!=-s?a+s:null),ns(zn(zn(c,e,Vn),t,Vn),n,s)},it=(e,t,n,s,l)=>{zn(zn(zn(u,e,Vn),t,Vn),n,(()=>[s,0]))[1]=l,a[3]?.(e,t,n,l)},dt=(e,t)=>ns(h,e,t),ct=(e,t,n)=>{zn(m,e,(()=>[t,0]))[1]=n,a[4]?.(e,n)},ut=(e,t,n,s,l)=>(Fe(zn(zn(zn(g,e,Vn),t,Vn),n,(()=>[])),s),l),ht=(e,t,n)=>(Fe(zn(p,e,(()=>[])),t),n),mt=(e,t,n)=>fe(Mn(Mn(Mn(u,e),t),n),(([e,t])=>[!0,e,t]),(()=>[!1,...Yn(Nt(e,t,n))])),gt=e=>fe(Mn(m,e),(([e,t])=>[!0,e,t]),(()=>[!1,...Yn(zt(e))])),pt=e=>xn(g)||xn(D[e])?0:qn(e?Fn(g):g,((t,n)=>qn(t,((t,s)=>qn(t,((t,l)=>he(D[e],[n,s,l],t))))))),bt=e=>xn(p)||xn(F[e])?0:qn(e?Pn(p):p,((t,n)=>he(F[e],[n],t))),ft=(e,t,n,s)=>{if(!xn(e))return he(t,s,(()=>An(e))),Rn(e,((e,t)=>he(n,[...s??[],e],1==t))),1},yt=e=>{const t=$t();t!=n&&he(T[e],void 0,t);const s=xn(z[e]),l=xn(J[e])&&xn(O[e])&&xn(E[e])&&xn($[e])&&xn(L[e])&&xn(M[e])&&xn(R[e])&&s&&xn(q[e])&&xn(N[e]),a=xn(P[e])&&xn(A[e])&&xn(V[e])&&xn(S[e]);if(!l||!a){const t=e?[Pn(r),Dn(o),Pn(i),Dn(d),Fn(c),Fn(u)]:[r,o,i,d,c,u];if(!l){ft(t[0],q[e],N[e]),qn(t[1],((t,n)=>ft(t,L[e],M[e],[n]))),qn(t[2],((t,n)=>{0!=t&&he(R[e],[n],xt(n))}));const n=Bn();qn(t[3],((t,l)=>{ft(t,E[e],$[e],[l])&&!s&&(he(z[e],[l,null]),Hn(n,l))})),s||qn(t[5],((t,s)=>{if(!kn(n,s)){const n=Bn();qn(t,(e=>qn(e,(([t,s],l)=>s!==t?Hn(n,l):Nn(e,l))))),qn(n,(t=>he(z[e],[s,t])))}})),qn(t[4],((t,n)=>qn(t,((t,s)=>ft(t,J[e],O[e],[n,s])))))}if(!a){let n;qn(t[5],((t,s)=>{let l;qn(t,((t,a)=>{let r;qn(t,(([t,o],i)=>{o!==t&&(he(P[e],[s,a,i],o,t,mt),n=l=r=1)})),r&&he(A[e],[s,a],mt)})),l&&he(V[e],[s],mt)})),n&&he(S[e],void 0,mt)}}},It=e=>{const t=Dt();t!=s&&he(j[e],void 0,t);const n=xn(H[e])&&xn(Q[e]),l=xn(X[e])&&xn(B[e]);if(!n||!l){const t=e?[Pn(h),Pn(m)]:[h,m];if(n||ft(t[0],H[e],Q[e]),!l){let n;qn(t[1],(([t,s],l)=>{s!==t&&(he(X[e],[l],s,t,gt),n=1)})),n&&he(B[e],void 0,gt)}}},wt=(e,...t)=>(_t((()=>e(...Pe(t,ce)))),nn),vt=()=>On(k),Ct=()=>Ln(k),kt=e=>Ln(Mn(C,ce(e))),xt=e=>In(Mn(k,ce(e))),Tt=e=>Ln(Mn(k,ce(e))),St=(e,t,n,s=0,l)=>{return Pe(ve(Je((a=Mn(k,ce(e)),r=(e,n)=>[be(t)?n:Mn(e,ce(t)),n],Pe([...a?.entries()??[]],(([e,t])=>r(t,e)))),(([e],[t])=>((e??0)<(t??0)?-1:1)*(n?-1:1))),s,be(l)?l:s+l),(([,e])=>e));var a,r},qt=(e,t)=>Ln(Mn(Mn(k,ce(e)),ce(t))),Nt=(e,t,n)=>Mn(Mn(Mn(k,ce(e)),ce(t)),ce(n)),Vt=()=>An(x),Lt=()=>Ln(x),zt=e=>Mn(x,ce(e)),$t=()=>!xn(k),At=e=>kn(k,ce(e)),Jt=(e,t)=>kn(Mn(C,ce(e)),ce(t)),Ot=(e,t)=>kn(Mn(k,ce(e)),ce(t)),Pt=(e,t,n)=>kn(Mn(Mn(k,ce(e)),ce(t)),ce(n)),Dt=()=>!xn(x),Ft=e=>kn(x,ce(e)),jt=e=>wt((()=>(e=>nt(e,xe,ut))(e)?ze(e):0)),Bt=e=>wt((()=>qe(e)?He(e):0)),Ht=e=>{try{Ee(lt(e))}catch{}return nn},Wt=t=>wt((()=>{if((e=nt(t,(e=>nt(e,pe))))&&(Me(t),!xn(k))){const e=vt();Gt(),jt(e)}})),Qt=e=>wt((()=>{if(t=(e=>nt(e,pe))(e)){const n=Vt();Zt(),Xt(),t=!0,Re(e),Bt(n)}})),Gt=()=>wt((()=>ze({}))),Kt=e=>wt((e=>kn(k,e)?Ge(e):0),e),Ut=(e,t)=>wt(((e,t)=>fe(Mn(k,e),(n=>kn(n,t)?Ke(e,n,t):0))),e,t),Xt=()=>wt((()=>He({}))),Yt=()=>wt((()=>{Me({}),e=!1})),Zt=()=>wt((()=>{Re({}),t=!1})),_t=(e,t)=>{if(-1!=l){en();const n=e();return tn(t),n}},en=()=>(-1!=l&&l++,1==l&&(a[0]?.(),he(ie)),nn),tn=e=>(l>0&&(l--,0==l&&(l=1,pt(1),xn(u)||yt(1),bt(1),xn(m)||It(1),e?.(nn)&&(qn(u,((e,t)=>qn(e,((e,n)=>qn(e,(([e],s)=>Rt(nn,t,n,s,e))))))),Sn(u),qn(m,(([e],t)=>Et(nn,t,e))),Sn(m)),he(de[0],void 0),l=-1,pt(0),xn(u)||yt(0),bt(0),xn(m)||It(0),a[1]?.(),he(de[1],void 0),a[2]?.(),l=0,n=$t(),s=Dt(),Oe([r,o,i,d,c,u,g,h,m,p],Sn))),nn),nn={getContent:()=>[vt(),Vt()],getTables:vt,getTableIds:Ct,getTable:e=>Jn(Mn(k,ce(e))),getTableCellIds:kt,getRowCount:xt,getRowIds:Tt,getSortedRowIds:St,getRow:(e,t)=>An(Mn(Mn(k,ce(e)),ce(t))),getCellIds:qt,getCell:Nt,getValues:Vt,getValueIds:Lt,getValue:zt,hasTables:$t,hasTable:At,hasTableCell:Jt,hasRow:Ot,hasCell:Pt,hasValues:Dt,hasValue:Ft,getTablesJson:()=>at(k),getValuesJson:()=>at(x),getJson:()=>at([k,x]),getTablesSchemaJson:()=>at(b),getValuesSchemaJson:()=>at(y),getSchemaJson:()=>at([b,y]),hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:e=>wt((()=>{const t=Ie(e)?e():e;ke(t)&&(([e,t])=>{(tt(e)?Gt:jt)(e),(tt(t)?Xt:Bt)(t)})(t)})),setTables:jt,setTable:(e,t)=>wt((e=>xe(t,e)?$e(e,t):0),e),setRow:(e,t,n)=>wt(((e,t)=>Te(e,t,n)?Ae(e,Qe(e),t,n):0),e,t),addRow:(e,t,n=!0)=>_t((()=>{let s;return Te(e,s,t)&&(e=ce(e),Ae(e,Qe(e),s=((e,t)=>{const[n]=Mn(v,e);let s;do{s=n(t)}while(kn(Mn(k,e),s));return s})(e,n?1:0),t)),s})),setPartialRow:(e,t,n)=>wt(((e,t)=>{if(Te(e,t,n,1)){const s=Qe(e);et(n,((n,l)=>je(e,s,t,l,n)))}}),e,t),setCell:(e,t,n,s)=>wt(((e,t,n)=>fe(Se(e,t,n,Ie(s)?s(Nt(e,t,n)):s),(s=>je(e,Qe(e),t,n,s)))),e,t,n),setValues:Bt,setPartialValues:e=>wt((()=>qe(e,1)?et(e,((e,t)=>We(t,e))):0)),setValue:(e,t)=>wt((e=>fe(Ne(e,Ie(t)?t(zt(e)):t),(t=>We(e,t)))),e),applyChanges:e=>wt((()=>{et(e[0],((e,t)=>be(e)?Kt(t):et(e,((e,n)=>be(e)?Ut(t,n):et(e,((e,s)=>Rt(nn,t,n,s,e))))))),et(e[1],((e,t)=>Et(nn,t,e)))})),setTablesJson:Ht,setValuesJson:e=>{try{Be(lt(e))}catch{}return nn},setJson:e=>wt((()=>{try{const[t,n]=lt(e);Ee(t),Be(n)}catch{Ht(e)}})),setTablesSchema:Wt,setValuesSchema:Qt,setSchema:(e,t)=>wt((()=>{Wt(e),Qt(t)})),delTables:Gt,delTable:Kt,delRow:Ut,delCell:(e,t,n,s)=>wt(((e,t,n)=>fe(Mn(k,e),(l=>fe(Mn(l,t),(a=>kn(a,n)?Xe(e,l,t,a,n,s):0))))),e,t,n),delValues:Xt,delValue:e=>wt((e=>kn(x,e)?_e(e):0),e),delTablesSchema:Yt,delValuesSchema:Zt,delSchema:()=>wt((()=>{Yt(),Zt()})),transaction:_t,startTransaction:en,getTransactionChanges:()=>[An(u,((e,t)=>-1===Mn(r,t)?void 0:An(e,((e,n)=>-1===Mn(Mn(d,t),n)?void 0:An(e,(([,e])=>e),(e=>ts(e)))),xn,tt)),xn,tt),An(m,(([,e])=>e),(e=>ts(e))),1],getTransactionLog:()=>[!xn(u),!xn(m),On(u,es,ts),On(g),An(m,es,ts),An(p),An(r),Jn(d),On(c),An(h)],finishTransaction:tn,forEachTable:e=>qn(k,((t,n)=>e(n,(e=>qn(t,((t,n)=>e(n,(e=>Rn(t,e))))))))),forEachTableCell:(e,t)=>Rn(Mn(C,ce(e)),t),forEachRow:(e,t)=>qn(Mn(k,ce(e)),((e,n)=>t(n,(t=>Rn(e,t))))),forEachCell:(e,t,n)=>Rn(Mn(Mn(k,ce(e)),ce(t)),n),forEachValue:e=>Rn(x,e),addSortedRowIdsListener:(e,t,n,s,l,a,r)=>{let o=St(e,t,n,s,l);return ue((()=>{const r=St(e,t,n,s,l);var i,d,c;d=o,Ce(i=r)===Ce(d)&&(c=(e,t)=>d[t]===e,i.every(c))||(o=r,a(nn,e,t,n,s,l,o))}),z[r?1:0],[e,t],[Ct])},addStartTransactionListener:e=>ue(e,ie),addWillFinishTransactionListener:e=>ue(e,de[0]),addDidFinishTransactionListener:e=>ue(e,de[1]),callListener:e=>(ge(e),nn),delListener:e=>(me(e),nn),getListenerStats:()=>({hasTables:Zn(T),tables:Zn(S),tableIds:Zn(q),hasTable:Zn(N),table:Zn(V),tableCellIds:Zn(L),hasTableCell:Zn(M,vn),rowCount:Zn(R),rowIds:Zn(E),sortedRowIds:Zn(z),hasRow:Zn($,vn),row:Zn(A,vn),cellIds:Zn(J,vn),hasCell:Zn(O,Cn),cell:Zn(P,Cn),invalidCell:Zn(D,Cn),hasValues:Zn(j),values:Zn(B),valueIds:Zn(H),hasValue:Zn(Q),value:Zn(X),invalidValue:Zn(F),transaction:wn(ie)+Zn(de)}),isMergeable:()=>!1,createStore:ss,addListener:ue,callListeners:he,setInternalListeners:(e,t,n,s,l)=>a=[e,t,n,s,l]};return et({[U+Z]:[0,T,[],()=>[$t()]],[Z]:[0,S],[_]:[0,q],[U+Y]:[1,N,[Ct],e=>[At(...e)]],[Y]:[1,V,[Ct]],[Y+le]:[1,L,[Ct]],[U+Y+se]:[2,M,[Ct,kt],e=>[Jt(...e)]],[te]:[1,R,[Ct]],[ne]:[1,E,[Ct]],[U+ee]:[2,$,[Ct,Tt],e=>[Ot(...e)]],[ee]:[2,A,[Ct,Tt]],[le]:[2,J,[Ct,Tt]],[U+se]:[3,O,[Ct,Tt,qt],e=>[Pt(...e)]],[se]:[3,P,[Ct,Tt,qt],e=>Yn(Nt(...e))],InvalidCell:[3,D],[U+re]:[0,j,[],()=>[Dt()]],[re]:[0,B],[oe]:[0,H],[U+ae]:[1,Q,[Lt],e=>[Ft(...e)]],[ae]:[1,X,[Lt],e=>Yn(zt(e[0]))],InvalidValue:[1,F]},(([e,t,n,s],l)=>{nn["add"+l+"Listener"]=(...l)=>ue(l[e],t[l[e+1]?1:0],e>0?ve(l,0,e):void 0,n,s)})),Ue(nn)},ls=({position:e="right",open:t=!1})=>{const n=P(ss),s=it.indexOf(e);return D(n,(e=>{return t=rt,n=sessionStorage,((e,t,n,s,l,a,r,o={},i=0,d=[])=>{let c,u,h,m=0,g=0,p=0;zn(Kn,d,(()=>0)),zn(Un,d,(()=>[]));const b=Vn(),[f,y,I,w,v]=((e=1,t,n)=>1!=e&&t.isMergeable()?[1,t.getMergeableContent,()=>t.getTransactionMergeableChanges(!n),([[e],[t]])=>!tt(e)||!tt(t),t.setDefaultContent]:2!=e?[0,t.getContent,t.getTransactionChanges,([e,t])=>!tt(e)||!tt(t),t.setContent]:ke("Store type not supported by this Persister"))(r,e,i),[C,k,x]=Gn((()=>R)),T=e=>{e!=m&&(m=e,k(b,void 0,m))},S=t=>{(f&&we(t?.[0])?1===t?.[2]?e.applyMergeableChanges:e.setMergeableContent:1===t?.[2]?e.applyChanges:e.setContent)(t)},q=async e=>(2!=m&&(T(1),g++,await M((async()=>{try{const n=await t();we(n)?S(n):e?v(e):ke("Content is not an array: "+n)}catch(t){e&&v(e)}T(0)}))),R),N=()=>(u&&(l(u),u=void 0),R),V=async e=>(1!=m&&(T(2),p++,await M((async()=>{try{await n(y,e)}catch(e){}T(0)}))),R),L=()=>(h&&(e.delListener(h),h=void 0),R),M=async(...e)=>(Fe(Mn(Un,d),...e),await(async()=>{if(!Mn(Kn,d)){for(En(Kn,d,1);!be(c=je(Mn(Un,d)));)try{await c()}catch(e){}En(Kn,d,0)}})(),R),R={load:q,startAutoLoad:async e=>{N(),await q(e);try{u=await s((async(e,t)=>{t||e?2!=m&&(T(1),g++,S(t??e),T(0)):await q()}))}catch(e){}return R},stopAutoLoad:N,isAutoLoading:()=>!be(u),save:V,startAutoSave:async()=>(L(),await V(),h=e.addDidFinishTransactionListener((()=>{const e=I();w(e)&&V(e)})),R),stopAutoSave:L,isAutoSaving:()=>!be(h),getStatus:()=>m,addStatusListener:e=>C(e,b),delListener:t=>(x(t),e),schedule:M,getStore:()=>e,destroy:()=>(Mn(Un,d).splice(0,void 0),N().stopAutoSave()),getStats:()=>({loads:g,saves:p}),...o};return Ue(R)})(e,(async()=>{return e=n.getItem(t),lt(e,((e,t)=>"￼"===t?void 0:t));var e}),(async e=>{return n.setItem(t,(s=e(),st(s,((e,t)=>void 0===t?"￼":t))));var s}),(e=>{const s=s=>{if(s.storageArea===n&&s.key===t)try{e(lt(s.newValue))}catch{e()}};return ue.addEventListener(Xn,s),s}),(e=>ue.removeEventListener(Xn,e)),0,3,{getStorageName:()=>t});var t,n}),void 0,(async e=>{await e.load([{},{position:-1==s?1:s,open:!!t}]),await e.startAutoSave()})),qe(Te,null,qe("aside",{id:rt},qe(Vt,{s:n}),qe(fn,{s:n})),qe("style",null,Nt))};export{ls as Inspector};
