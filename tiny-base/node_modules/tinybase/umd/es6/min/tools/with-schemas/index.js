var e,l;e=this,l=function(e){"use strict";const l=e=>typeof e,t="tinybase",a="",n=",",o=l(a),d=l(!0),r=l(0),s="type",I="default",u="Listener",c="get",$="add",i="Has",b="Ids",p="Table",C=p+"s",h=p+b,m="Row",f=m+b,g="Sorted"+m+b,w="Cell",y=w+b,v="Value",T=v+"s",x=v+b,V="Transaction",R="Partial",P=(e,l=a,t)=>e.split(l,t);var A=(e,l,t)=>new Promise(((a,n)=>{var o=e=>{try{r(t.next(e))}catch(e){n(e)}},d=e=>{try{r(t.throw(e))}catch(e){n(e)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,d);r((t=t.apply(e,l)).next())}));const k=Promise,S=isFinite,O=e=>null==e,E=(e,l,t)=>O(e)?null==t?void 0:t():l(e),D=e=>e==o||e==d,N=e=>l(e)==o,L=e=>Array.isArray(e),j=(e,l,t)=>e.slice(l,t),G=e=>e.length,H=e=>A(void 0,null,(function*(){return k.all(e)})),M=e=>{const t=l(e);return D(t)||t==r&&S(e)?t:void 0},J=(e,l)=>e.every(l),z=(e,l)=>e.sort(l),W=(e,l)=>e.forEach(l),B=(e,l=a)=>e.join(l),F=(e,l)=>e.map(l),U=(e,l)=>e.filter(l),_=(e,...l)=>e.push(...l),Z=e=>e.pop(),Q=(e,...l)=>e.unshift(...l),q=e=>e.shift(),K=Object,X=e=>K.getPrototypeOf(e),Y=K.entries,ee=e=>!O(e)&&E(X(e),(e=>e==K.prototype||O(X(e))),(()=>!0)),le=K.keys,te=K.freeze,ae=(e,l)=>F(Y(e),(([e,t])=>l(t,e))),ne=e=>G(le(e)),oe=e=>ee(e)&&0==ne(e),de=(e,l)=>{var t;return null!=(t=null==e?void 0:e.has(l))&&t},re=e=>{var l;return[...null!=(l=null==e?void 0:e.values())?l:[]]},se=(e,l)=>null==e?void 0:e.forEach(l),Ie=(e,l)=>null==e?void 0:e.delete(l),ue=e=>new Map(e),ce=(e,l)=>null==e?void 0:e.get(l),$e=(e,l)=>se(e,((e,t)=>l(t,e))),ie=(e,l)=>{var t;return F([...null!=(t=null==e?void 0:e.entries())?t:[]],(([e,t])=>l(t,e)))},be=(e,l,t)=>O(t)?(Ie(e,l),e):null==e?void 0:e.set(l,t),pe=(e,l,t,a)=>(de(e,l)||be(e,l,t()),ce(e,l)),Ce=e=>e.toUpperCase(),he=e=>e.toLowerCase(),me="a ",fe="A function for",ge=", and registers a listener so that any changes to that result will cause a re-render",we="Callback",ye="Changes",ve="Count",Te="Del",xe="Deps",Ve=xe+"?: React.DependencyList",Re="doRollback?: DoRollback",Pe="actions: () => Return, "+Re,Ae="export",ke="Id",Se="Invalid",Oe="Json",Ee=he(u),De="?: ",Ne=" | undefined",Le="NonNullable",je="Props",Ge="Provider",He=`Registers a ${Ee} that will be called`,Me="Represents",Je="rowId: "+ke,ze="Schema",We="Set",Be=", descending?: boolean, offset?: number, limit?: number",Fe="[]",Ue="the Store",_e=he(V),Ze="Execute a "+_e+" to make multiple mutations",Qe="Explicitly starts a "+_e,qe="Explicitly finishes a "+_e,Ke="the end of the "+_e,Xe="void",Ye=" => "+Xe,el="WhenSet",ll=" when setting it",tl=me+"string serialization of",al=" ",nl="Gets a callback that can ",ol="the ",dl=" the schema for",rl=(e=0)=>e?"the existence of ":"",sl=(e=0,l=0,t=0)=>rl(t)+`the ${Vl[e]}content of`+(l?al+Ue:a),Il=(e=0,l,t=0,n=0)=>vl[l]+al+rl(n)+sl(e,1)+(t?" when setting it":a),ul=(e,l=0)=>Me+` a Row when ${l?"s":"g"}etting ${sl()} the '${e}' `+p,cl=(e,l,t=0)=>`Gets ${t?"sorted, paginated":"the"} Ids of the ${e}s in `+l,$l=(e,l)=>`Calls a function for each ${e} in `+l,il=e=>"The props passed to a component that renders "+e,bl=e=>"A function that takes "+e,pl=(e,l=0,t=0)=>fe+" listening to changes to "+rl(t)+xl[e]+" in "+xl[l],Cl=(e,l,t=0,n=0)=>He+" whenever "+rl(n)+xl[e]+" in "+xl[l]+" change"+(t?a:"s"),hl=e=>`the '${e}' `+p,ml=e=>"the specified Row in "+hl(e),fl=(e,l=0,t=0)=>vl[l]+al+sl(0,0,t)+al+hl(e),gl=(e,l=0,t=0)=>vl[l]+` ${sl(0,0,t)} `+ml(e),wl=(e,l,t=0,a=0)=>vl[t]+al+rl(a)+`the '${l}' Cell for `+ml(e),yl=(e,l=0,t=0)=>vl[l]+al+rl(t)+`the '${e}' Value`,vl=["Gets","Checks existence of","Sets","Deletes","Sets part of",Me,"Gets "+tl,"Sets "+tl,He+" whenever",nl+"set",nl+"add",nl+"set part of",nl+"delete","Renders","Gets "+tl+dl,"Sets"+dl,"Deletes"+dl],Tl=[c,"has","set","del","set","forEach",$,a],xl=[Ue,C,ol+p+al+b,me+p,ol+m+al+b,me+m,ol+w+al+b,me+w,"invalid Cell changes",T,ol+v+al+b,me+v,"invalid Value changes",ol+"sorted "+m+al+b,ol+w+al+b+" anywhere",ol+"number of Rows",me+w+" anywhere"],Vl=[a,"tabular ","keyed value "],Rl=e=>new Set(L(e)||O(e)?e:[e]),Pl=(e,l)=>null==e?void 0:e.add(l),Al=/[^A-Za-z]+/,kl=/[^A-Za-z0-9]+/,Sl=/^( *)\/\*\* *(.*?) *\*\/$/gm,Ol=e=>e.includes(n),El=(e,l,t,a=1)=>{const n=`${l}${1==a?"":a}`;return de(e,n)?El(e,l,t,a+1):(be(e,n,t),n)},Dl=e=>e.replace(Sl,((e,l,t)=>{const a=77-G(l);return`${l}/**\n${t.replace(RegExp(`([^\\n]{1,${a}})(\\s|$)`,"g"),l+" * $1\n")}${l} */`})),Nl=e=>e.flat(1e3),Ll=(e,l=0)=>B(F(P(e,kl),((e,t)=>(t>0||l?Ce:he)(j(e,0,1))+j(e,1)))),jl=e=>Ce(B(P(e&&!Al.test(e[0])?e:" "+e,kl),"_")),Gl=e=>`/** ${e}. */`,Hl=(...e)=>B(U(e,(e=>e)),", "),Ml=(...e)=>"{"+B(e,"; ")+"}",Jl=(...e)=>Ml(...F(e,(e=>"readonly "+e))),zl=()=>{const e=[ue(),ue(),ue(),ue()],l=ue(),t=ue(),n=e=>{const l=e.indexOf(" as ");return-1!=l?j(e,l+4):e};return[(...e)=>B(Nl(e),"\n"),(l,t,...a)=>W(a,(a=>W([0,1],(n=>(null!=l?l:n)==n?Pl(pe(e[n],t,Rl),a):0)))),(e,t,n,o=a,d=1)=>El(l,e,[t,n,o,d]),(e,l,a)=>El(t,e,L(a)?[`(${l}) => {`,a,"}"]:[`(${l}) => ${a}`]),(e,l)=>ce(t,e)===l?e:El(t,e,l),(l=0)=>F([...z(ie(e[l],((e,l)=>`import {${B(z(re(e),((e,l)=>n(e)>n(l)?1:-1)),", ")}} from '${l}';`)),((e,l)=>Ol(e)!=Ol(l)?Ol(e)?-1:1:e>l?1:-1)),a],(e=>e.replace("{React}","React"))),()=>ie(l,(([e,l,t,n],o)=>[Gl(l),`${n?Ae+" ":a}type ${o}${t} = ${e};`,a])),()=>ie(t,((e,l)=>(e=L(e)?e:[e],_(e,Z(e)+";"),[`const ${l} = ${q(e)}`,e,a])))]},Wl=(e,l)=>{const t=new WeakMap;return l=>(t.has(l)||t.set(l,e(l)),t.get(l))},Bl=(e,l,t)=>[l=>ae(e,((e,a)=>l(a,Ll(a,1),t(jl(a),`'${a}'`)))),(l,a)=>ae(e[l],((e,l)=>a(l,e[s],e[I],t(jl(l),`'${l}'`),Ll(l,1)))),e=>ae(l,((l,a)=>e(a,l[s],l[I],t(jl(a),`'${a}'`),Ll(a,1))))],Fl=(e,l,t,n)=>[(n,o)=>{const d=n+": "+o,r=e(C,Ml(...l((e=>`'${e}'?: {[rowId: Id]: `+Ml(...t(e,((e,l,t)=>`'${e}'${O(t)?"?":a}: ${l}`)))+"}"))),Il(1,5)),s=e(C+el,Ml(...l((e=>`'${e}'?: {[rowId: Id]: `+Ml(...t(e,((e,l)=>`'${e}'?: ${l}`)))+"}"))),Il(1,5,1)),I=e(p+ke,"keyof "+r,"A "+p+" Id in "+Ue),c=`<TId extends ${I}>`,$=e(p,Le+`<${r}[TId]>`,"A "+p+" in "+Ue,c),b=e(p+el,Le+`<${s}[TId]>`,"A "+p+" in "+Ue+ll,c),v=e(m,$+"<TId>[Id]","A "+m+" in a "+p,c),T=e(m+el,b+"<TId>[Id]","A "+m+" in a "+p+ll,c),x=e(w+ke,`Extract<keyof ${v}<TId>, Id>`,"A "+w+" Id in a "+m,c),V=e(w,Le+`<${r}[TId]>[Id][CId]`,"A "+w+" in a "+m,`<TId extends ${I}, CId extends ${x}<TId>>`),R=e("CellIdCellArray",`CId extends ${x}<TId> ? [cellId: CId, cell: ${V}<TId, CId>] : never`,w+" Ids and types in a "+m,`<TId extends ${I}, CId = ${x}<TId>>`,0),P=e(w+we,`(...[cellId, cell]: ${R}<TId>)`+Ye,bl(me+w+" Id, and "+w),c),A=e(m+we,"(rowId: Id, forEachCell: (cellCallback: CellCallback<TId>) "+Ye+") "+Ye,bl(me+m+" Id, and a "+w+" iterator"),c),k=e(p+w+we,`(cellId: ${x}<TId>, count: number) `+Ye,bl(me+w+" Id, and count of how many times it appears"),c),S=e("TableIdForEachRowArray",`TId extends ${I} ? [tableId: TId, forEachRow: (rowCallback: ${A}<TId>)${Ye}] : never`,p+" Ids and callback types",`<TId = ${I}>`,0),E=e(p+we,`(...[tableId, forEachRow]: ${S})`+Ye,bl(me+p+" Id, and a "+m+" iterator"),a),D=e("TableIdRowIdCellIdArray",`TId extends ${I} ? [tableId: TId, rowId: Id, cellId: ${x}<TId>] : never`,"Ids for GetCellChange",`<TId = ${I}>`,0),N=e("GetCellChange",`(...[tableId, rowId, cellId]: ${D}) => CellChange`,fe+" returning information about any Cell's changes during a "+_e),L=e(i+C+u,`(${d}, hasTables: boolean)`+Ye,pl(1,0,1)),j=e(C+u,`(${d}, getCellChange: ${N}${Ne})`+Ye,pl(1)),G=e(h+u,`(${d})`+Ye,pl(2)),H=e(i+p+u,`(${d}, tableId: ${I}, hasTable: boolean)`+Ye,pl(3,0,1)),M=e(p+u,`(${d}, tableId: ${I}, getCellChange: ${N}${Ne})`+Ye,pl(3)),J=e(p+y+u,`(${d}, tableId: ${I})`+Ye,pl(14,3)),z=e("HasTableCellListenerArgsArrayInner",`CId extends ${x}<TId> ? [${d}, tableId: TId, cellId: CId, hasTableCell: boolean] : never`,"Cell args for HasTableCellListener",`<TId extends ${I}, CId = ${x}<TId>>`,0),W=e("HasTableCellListenerArgsArrayOuter",`TId extends ${I} ? `+z+"<TId> : never","Table args for HasTableCellListener",`<TId = ${I}>`,0),B=e(i+p+w+u,`(...[${n}, tableId, cellId, hasTableCell]: `+W+")"+Ye,pl(16,3,1)),F=e(m+"Count"+u,`(${d}, tableId: ${I})`+Ye,pl(15,3)),U=e(f+u,`(${d}, tableId: ${I})`+Ye,pl(4,3)),_=e(g+u,"("+Hl(d,"tableId: "+I,"cellId: Id"+Ne,"descending: boolean","offset: number","limit: number"+Ne,"sortedRowIds: Ids")+")"+Ye,pl(13,3)),Z=e(i+m+u,"("+Hl(""+d,"tableId: "+I,Je,"hasRow: boolean")+")"+Ye,pl(5,3,1)),Q=e(m+u,"("+Hl(""+d,"tableId: "+I,Je,`getCellChange: ${N}${Ne}`)+")"+Ye,pl(5,3)),q=e(y+u,"("+Hl(""+d,"tableId: "+I,Je)+")"+Ye,pl(6,5)),K=e("HasCellListenerArgsArrayInner",`CId extends ${x}<TId> ? [${d}, tableId: TId, ${Je}, cellId: CId, hasCell: boolean] : never`,"Cell args for HasCellListener",`<TId extends ${I}, CId = ${x}<TId>>`,0),X=e("HasCellListenerArgsArrayOuter",`TId extends ${I} ? `+K+"<TId> : never","Table args for HasCellListener",`<TId = ${I}>`,0),Y=e(i+w+u,`(...[${n}, tableId, rowId, cellId, hasCell]: `+X+")"+Ye,pl(7,5,1)),ee=e("CellListenerArgsArrayInner",`CId extends ${x}<TId> ? [${d}, tableId: TId, ${Je}, cellId: CId, newCell: ${V}<TId, CId> ${Ne}, oldCell: ${V}<TId, CId> ${Ne}, getCellChange: ${N} ${Ne}] : never`,"Cell args for CellListener",`<TId extends ${I}, CId = ${x}<TId>>`,0),le=e("CellListenerArgsArrayOuter",`TId extends ${I} ? `+ee+"<TId> : never","Table args for CellListener",`<TId = ${I}>`,0);return[r,s,I,$,b,v,T,x,V,P,A,k,E,L,j,G,H,M,J,B,F,U,_,Z,Q,q,Y,e(w+u,`(...[${n}, tableId, rowId, cellId, newCell, oldCell, getCellChange]: ${le})`+Ye,pl(7,5)),e(Se+w+u,`(${d}, tableId: Id, ${Je}, cellId: Id, invalidCells: any[])`+Ye,pl(8))]},(l,t)=>{const o=l+": "+t,d=e(T,Ml(...n(((e,l,t)=>`'${e}'${O(t)?"?":a}: ${l}`))),Il(2,5)),r=e(T+el,Ml(...n(((e,l)=>`'${e}'?: ${l}`))),Il(2,5,1)),s=e(v+ke,"keyof "+d,"A "+v+" Id in "+Ue),I=e(v,Le+`<${d}[VId]>`,"A "+v+" Id in "+Ue,`<VId extends ${s}>`),c=e("ValueIdValueArray",`VId extends ${s} ? [valueId: VId, value: ${I}<VId>] : never`,v+" Ids and types in "+Ue,`<VId = ${s}>`,0),$=e(v+we,`(...[valueId, value]: ${c})`+Ye,bl(me+v+" Id, and "+v)),b=e("GetValueChange",`(valueId: ${s}) => ValueChange`,fe+" returning information about any Value's changes during a "+_e),p=e(i+T+u,`(${o}, hasValues: boolean)`+Ye,pl(9,0,1)),C=e(T+u,`(${o}, getValueChange: ${b}${Ne})`+Ye,pl(9)),h=e(x+u,`(${o})`+Ye,pl(10)),m=e(i+v+u,`(${o}, valueId: ValueId, hasValue: boolean)`+Ye,pl(11,0,1)),f=e("ValueListenerArgsArray",`VId extends ${s} ? [${o}, valueId: VId, newValue: ${I}<VId> ${Ne}, oldValue: ${I}<VId> ${Ne}, getValueChange: ${b} ${Ne}] : never`,"Value args for ValueListener",`<VId = ${s}>`,0);return[d,r,s,I,$,p,C,h,m,e(v+u,`(...[${l}, valueId, newValue, oldValue, getValueChange]: `+f+")"+Ye,pl(11)),e(Se+v+u,`(${o}, valueId: Id, invalidValues: any[])`+Ye,pl(12))]},(l,t)=>e(V+u,`(${l}: ${t})`+Ye,fe+" listening to the completion of a "+_e)],Ul=(e,l=a,t=a)=>`store.${e}(${l})`+(t?" as "+t:a),_l=(e,l=a)=>`fluent(() => ${Ul(e,l)})`,Zl=(e,l=a,t=a)=>`store.${e}(${l?l+", ":a}proxy(listener)${t?", "+t:a})`,Ql=(e,l,n)=>{const[o,r,c,P,A,k,S,E]=zl(),[D,L,j]=Bl(e,l,A),[G,H,M]=Fl(c,D,L,j),J=ue(),z=(e=0)=>ie(J,(([l,t,n,o,d],r)=>{const s=e?[r+`: ${d}(${l}): ${t} => ${n},`]:[r+d+`(${l}): ${t};`];return e||Q(s,Gl(o)),_(s,a),s})),F=(e,l,t,n,o,d=a)=>El(J,e,[l,t,n,o,d]),U=(e,l,t,n,o,d=a,r=a,s=a)=>F(Tl[e]+l+(4==e?R:a)+t,d,n,(n==K?_l:Ul)(Tl[e]+(4==e?R:a)+t,r,e?void 0:n),o,s),Z=(e,l,t,n=a,o=a,d=1,r=a)=>F($+e+u,(n?n+", ":a)+Ee+": "+l+(d?", mutator?: boolean":a),ke,Zl($+e+u,o,d?"mutator":a),t,r),q=`./${Ll(n)}.d`,K=Ll(n,1),X=Ll(K),Y=[],ee=ue();let le=[],te=[];if(r(1,q,K,`create${K} as create${K}Decl`),oe(e))r(null,t,C);else{r(0,t,"CellChange"),r(null,t,b);const[e,l,n,o,u,$,v,T,x,V,R,P,k,S,E,j,H,M,J,z,F,Q,te,ae,ne,oe,de,se,Ie]=G(X,K),$e=ue();D(((e,l)=>{const t=`<'${e}'>`,a=[c(l+p,o+t,Me+` the '${e}' `+p),c(l+p+el,u+t,Me+` the '${e}' `+p+ll),c(l+m,$+t,ul(e)),c(l+m+el,v+t,ul(e,1)),c(l+w+ke,T+t,`A Cell Id for the '${e}' `+p),c(l+w+we,V+t,bl(`a Cell Id and value from a Row in the '${e}' `+p)),c(l+m+we,R+t,bl(`a Row Id from the '${e}' Table, and a Cell iterator`)),c(l+p+w+we,P+t,bl(`a Cell Id from anywhere in the '${e}' Table, and a count of how many times it appears`))];be($e,e,a),r(1,q,...a)})),r(1,q,e,l,n,T,k,S,E,j,H,M,J,z,F,Q,te,ae,ne,oe,de,se,Ie),le=[e,l,n,T,S,E,j,H,M,J,z,F,Q,te,ae,ne,oe,de,se,$e],W([[e],[d],[K,"tables: "+l,"tables"],[K]],(([e,l,t],n)=>U(n,a,C,e,Il(1,n),l,t))),U(0,a,h,n+Fe,cl(p,Ue)),U(5,a,p,Xe,$l(p,Ue),"tableCallback: "+k,"tableCallback as any"),D(((e,l,t)=>{const[n,o,r,s,I,u,c,$]=ce($e,e);W([[n],[d],[K,"table: "+o,", table"],[K]],(([n,o,d=a],r)=>U(r,l,p,n,fl(e,r),o,t+d))),U(0,l,p+y,b,cl(w,"the whole of "+hl(e)),a,t),U(5,l,p+w,Xe,$l(p+w,"the whole of "+hl(e)),"tableCellCallback: "+$,t+", tableCellCallback as any"),U(0,l,m+ve,"number","Gets the number of Rows in the "+hl(e),a,t),U(0,l,f,b,cl(m,hl(e)),a,t),U(0,l,g,b,cl(m,hl(e),1),"cellId?: "+I+Be,t+", cellId, descending, offset, limit"),U(5,l,m,Xe,$l(m,hl(e)),"rowCallback: "+c,t+", rowCallback as any"),W([[r],[d],[K,", row: "+s,", row"],[K],[K,", partialRow: "+s,", partialRow"]],(([n,o=a,d=a],r)=>U(r,l,m,n,gl(e,r),Je+o,t+", rowId"+d))),U(6,l,m,ke+Ne,"Add a new Row to "+hl(e),"row: "+s+", reuseIds?: boolean",t+", row, reuseIds"),U(0,l,y,I+Fe,cl(w,ml(e)),Je,t+", rowId"),U(5,l,w,Xe,$l(w,ml(e)),Je+", cellCallback: "+u,t+", rowId, cellCallback as any"),L(e,((n,o,r,s,I)=>{const u="Map"+Ll(o,1);be(ee,o,u);const c=o+(O(r)?Ne:a);W([[c],[d],[K,`, cell: ${o} | `+u,", cell as any"],[K]],(([o,d=a,r=a],u)=>U(u,l+I,w,o,wl(e,n,u),Je+d,t+", rowId, "+s+r))),U(1,l+I,p+w,d,vl[1]+` the '${n}' Cell anywhere in `+hl(e),a,t+", "+s)}))})),U(0,a,C+Oe,Oe,Il(1,6)),U(2,a,C+Oe,K,Il(1,7),"tablesJson: "+Oe,"tables"+Oe),Z(i+C,S,Il(1,8,0,1)+" changes"),Z(C,E,Il(1,8)+" changes"),Z(h,j,Cl(2,0,1)),Z(i+p,H,Cl(3,0,0,1),`tableId: ${n} | null`,"tableId"),Z(p,M,Cl(3,0),`tableId: ${n} | null`,"tableId"),Z(p+y,J,Cl(14,3,1),`tableId: ${n} | null`,"tableId"),Z(i+p+w,z,Cl(16,3,0,1),`tableId: ${n} | null, cellId: ${B(D((e=>{var l,t;return null!=(t=null==(l=ce($e,e))?void 0:l[4])?t:a}))," | ")} | null`,"tableId,  cellId"),Z(m+ve,F,Cl(15,3),`tableId: ${n} | null`,"tableId"),Z(f,Q,Cl(4,3,1),`tableId: ${n} | null`,"tableId"),Z(g,te,Cl(13,3,1),Hl("tableId: TId",`cellId: ${T}<TId>`+Ne,"descending: boolean","offset: number","limit: number"+Ne),Hl("tableId","cellId","descending","offset","limit"),1,"<TId extends TableId>"),Z(i+m,ae,Cl(5,3,0,1),`tableId: ${n} | null, rowId: IdOrNull`,"tableId, rowId"),Z(m,ne,Cl(5,3),`tableId: ${n} | null, rowId: IdOrNull`,"tableId, rowId"),Z(y,oe,Cl(6,5,1),`tableId: ${n} | null, rowId: IdOrNull`,"tableId, rowId"),Z(i+w,de,Cl(7,5,0,1),`tableId: ${n} | null, rowId: IdOrNull, cellId: ${B(D((e=>{var l,t;return null!=(t=null==(l=ce($e,e))?void 0:l[4])?t:a}))," | ")} | null`,"tableId, rowId, cellId"),Z(w,se,Cl(7,5),`tableId: ${n} | null, rowId: IdOrNull, cellId: ${B(D((e=>{var l,t;return null!=(t=null==(l=ce($e,e))?void 0:l[4])?t:a}))," | ")} | null`,"tableId, rowId, cellId"),Z(Se+w,Ie,He+" whenever an invalid Cell change was attempted","tableId: IdOrNull, rowId: IdOrNull, cellId: IdOrNull","tableId, rowId, cellId"),r(1,q,...re(ee)),_(Y,".set"+C+ze+"({",Nl(D(((e,l,t)=>[`[${t}]: {`,...L(e,((e,l,t,n)=>`[${n}]: {[${A(jl(s),`'${s}'`)}]: ${A(jl(l),`'${l}'`)}${O(t)?a:`, [${A(jl(I),`'${I}'`)}]: `+(N(t)?A(jl(t),`'${t}'`):t)}},`)),"},"]))),"})")}if(oe(l))r(null,t,T);else{const[e,l,n,o,u,c,$,b,p,C,h]=H(X,K);r(1,q,e,l,n,u,c,$,b,p,C,h),te=[e,l,n,c,$,b,p,C],W([[e],[d],[K,"values: "+l,"values"],[K],[K,"partialValues: "+l,"partialValues"]],(([e,l,t],n)=>U(n,a,T,e,Il(2,n),l,t))),U(0,a,x,n+Fe,cl(v,Ue)),U(5,a,v,"void",$l(v,Ue),"valueCallback: "+u,"valueCallback as any"),j(((e,l,t,n,o)=>{const r="Map"+Ll(l,1);be(ee,l,r),W([[l],[d],[K,`value: ${l} | `+r,", value as any"],[K]],(([l,t,d=a],r)=>U(r,o,v,l,yl(e,r),t,n+d)))})),U(0,a,T+Oe,Oe,Il(2,6)),U(2,a,T+Oe,K,Il(2,7),"valuesJson: "+Oe,"values"+Oe),Z(i+T,c,Il(2,8,0,1)+" changes"),Z(T,$,Il(2,8)+" changes"),Z(x,b,Cl(10,0,1)),Z(i+v,p,Cl(11,0,0,1),`valueId: ${n} | null`,"valueId"),Z(v,C,Cl(11,0),`valueId: ${n} | null`,"valueId"),Z(Se+v,h,He+" whenever an invalid Value change was attempted","valueId: IdOrNull","valueId"),r(1,q,...re(ee)),r(0,t,"ValueChange"),_(Y,".set"+T+ze+"({",j(((e,l,t,n)=>[`[${n}]: {[${A(jl(s),`'${s}'`)}]: ${A(jl(l),`'${l}'`)}${O(t)?a:`, [${A(jl(I),`'${I}'`)}]: `+(N(t)?A(jl(t),`'${t}'`):t)}},`])),"})")}U(0,a,"Content",`[${C}, ${T}]`,Il(0,0)),U(2,a,"Content",K,Il(0,2),`[tables, values]: [${C}, ${T}]`,"[tables, values]"),U(7,a,"applyChanges",K,`Applies a set of ${ye} to the Store`,"changes: "+ye,"changes"),$e(ee,((e,l)=>c(l,`(cell: ${e}${Ne}) => `+e,`Takes a ${e} Cell value and returns another`))),r(null,t,"DoRollback",ke,"IdOrNull",Oe,"Store",ye),U(0,a,Oe,Oe,Il(0,6)),U(2,a,Oe,K,Il(0,7),"tablesAndValuesJson: "+Oe,"tablesAndValuesJson"),U(7,a,_e,"Return",Ze,Pe,"actions, doRollback","<Return>"),U(7,a,"start"+V,K,Qe),U(7,a,"finish"+V,K,qe,Re,"doRollback");const ae=M(X,K);return Z("Start"+V,ae,He+" just before the start of the "+_e,a,a,0),Z("WillFinish"+V,ae,He+" just before "+Ke,a,a,0),Z("DidFinish"+V,ae,He+" just after "+Ke,a,a,0),U(7,a,"call"+u,K,"Manually provoke a listener to be called","listenerId: Id","listenerId"),U(3,a,u,K,"Remove a listener that was previously added to "+Ue,"listenerId: Id","listenerId"),F("getStore",a,"Store","store",vl[0]+" the underlying Store object"),r(1,t,"createStore"),r(1,q,K,`create${K} as create${K}Decl`,ae),A("store",["createStore()",...Y]),P("fluent","actions: () => Store",["actions();",`return ${X};`]),P("proxy","listener: any",`(_: Store, ...params: any[]) => listener(${X}, ...params)`),A(X,["{",...z(1),"}"]),[o(...k(0),...S(),Ae+" interface "+K+" {",...z(0),"}",a,Gl(`Creates a ${K} object`),Ae+" function create"+K+"(): "+K+";"),o(...k(1),Ae+" const create"+K+": typeof create"+K+"Decl = () => {",...E(),`return Object.freeze(${X});`,"};"),le,te]},ql=e=>c+e,Kl=e=>Hl(ql(e),ql(e)+xe),Xl="debugIds?: boolean",Yl="debugIds={debugIds}",et="then"+Ve,lt="Parameter",tt=": (parameter: "+lt+", store: Store) => ",at="const contextValue = useContext(Context);",nt=", based on a parameter",ot=": ",dt="<"+lt+",>",rt=lt+"ized"+we+"<"+lt+">",st="rowId",It="rowId={rowId}",ut=", separator, debugIds",ct="separator?: ReactElement | string",$t="then?: (store: Store",it=Hl($t+")"+Ye,et),bt="then, then"+xe,pt=st+ot+ke,Ct="View",ht=(e,...l)=>Hl(...l,Ee+": "+e,Ee+Ve,"mutator?: boolean"),mt=(...e)=>Hl(...e,Ee,Ee+xe,"mutator"),ft=(e,l,n,o,s)=>{const[I,c,$,V,P,A,k,S]=zl(),[E,D,N]=Bl(e,l,P),L=`./${Ll(n)}.d`,j=`./${Ll(n)}-ui-react.d`,G="tinybase/ui-react",H=Ll(n,1),M=Ll(H),J=H+"Or"+H+ke,z=M+"Or"+H+ke,W=M+`={${M}}`,F=ue(),U=(e,l,t,n,o,d=a)=>(c(1,j,e+" as "+e+"Decl"),El(F,e,[l,t,n,o,d])),Z=(e,l,t,n,o,d=a)=>U("use"+e,l,t,n,o,d),q=(e,l,t,n,o=a,d=a,r=a,s=a,I=a)=>(c(1,G,`use${l} as use${l}Core`),Z(e,Hl(o,le,s),t,ae+`(${z}, use${l}Core, [`+(d||a)+(I?"], ["+I:a)+"]);",n,r)),K=(e,l,t,a)=>U(e,l,1,t,a),X=(e=0)=>ie(F,(([l,t,n,o,d],r)=>{const s=e?[Ae+` const ${r}: typeof ${r}Decl = ${d}(${l}): ${1==t?"any":t} =>`,n]:[Ae+` function ${r}${d}(${l}): ${1==t?"ComponentReturnType":t};`];return e||Q(s,Gl(o)),_(s,a),s}));c(null,t,ke,"Store",we,lt+"ized"+we),c(0,G,"ComponentReturnType"),c(1,G,"useCellIds"),c(null,G,"ExtraProps"),c(0,L,H);const Y=$(J,H+" | "+ke,`Used when you need to refer to a ${H} in a React hook or component`),ee=$(Ge+je,Jl(M+De+H,M+`ById?: {[${M}Id: Id]: ${H}}`),`Used with the ${Ge} component, so that a `+H+" can be passed into the context of an application");c(0,"react","ReactElement","ComponentType"),c(1,"react","React"),c(1,j,Y,ee);const le=z+De+Y;P("{createContext, useContext, useMemo}","React"),P("Context",`createContext<[${H}?, {[${M}Id: Id]: ${H}}?]>([])`),Z("Create"+H,`create: () => ${H}, create`+Ve,H,"\n// eslint-disable-next-line react-hooks/exhaustive-deps\nuseMemo(create, createDeps)",`Create a ${H} within a React application with convenient memoization`);const te=Z(H,"id?: Id",H+Ne,["{",at,"return id == null ? contextValue[0] : contextValue[1]?.[id];","}"],`Get a reference to a ${H} from within a ${Ge} component context`),ae=V("useHook",z+`: ${Y} | undefined, hook: (...params: any[]) => any, preParams: any[], postParams: any[] = []`,[`const ${M} = ${te}(${z} as Id);`,`return hook(...preParams, ((${z} == null || typeof ${z} == 'string')`,`? ${M} : ${z})?.getStore(), ...postParams)`]),ne=V("getProps","getProps: ((id: any) => ExtraProps) | undefined, id: Id","(getProps == null) ? ({} as ExtraProps) : getProps(id)"),de=V("wrap",Hl("children: any","separator?: any","encloseWithId?: boolean","id?: Id"),["const separated = separator==null || !Array.isArray(children)"," ? children"," : children.map((child, c) => (c > 0 ? [separator, child] : child));","return encloseWithId ? [id, ':{', separated, '}'] : separated;"]),re=V("useCustomOrDefaultCellIds",Hl("customCellIds: Ids | undefined","tableId: Id","rowId: Id",`${z}?: ${Y} | undefined`),[`const defaultCellIds = ${ae}(${z}, useCellIds, [tableId, rowId]);`,"return customCellIds ?? defaultCellIds;"]),se=P("NullComponent","() => null");if(!oe(e)){const[e,l,n,s,I,v,T,x,P,A,k,S,N,G,J,z,F,U,_,Z]=o;c(null,L,e,l,n,I,v,T,x,P,A,k,S,N,G,J,z,F,_,U),c(0,L,s),c(1,L,H),c(null,t,b,"IdOrNull");const Q=V("tableView",`{${M}, rowComponent, getRowComponentProps, customCellIds`+ut+"}: any, rowIds: Ids, tableId: Id, defaultRowComponent: React.ComponentType<any>",["const Row = rowComponent ?? defaultRowComponent;",`return ${de}(rowIds.map((rowId) => (`,"<Row","{..."+ne+"(getRowComponentProps, rowId)}","key={rowId}","tableId={tableId}",It,"customCellIds={customCellIds}",W,Yl,"/>","))",ut,", tableId,",");"]),X=V("getDefaultTableComponent","tableId: Id",B(E(((e,l,t)=>`tableId == ${t} ? ${l}TableView : `)))+se),Y=V("getDefaultCellComponent","tableId: Id, cellId: Id",B(E(((e,l,t)=>`tableId == ${t} ? ${B(D(e,((e,t,a,n,o)=>`cellId == ${n} ? `+l+o+"CellView : ")))+se} : `)))+se);q(i+C,i+C,d,Il(1,0,0,1)+ge),q(C,C,e,Il(1,0)+ge);const ee=q(h,h,n+Fe,cl(p,Ue)+ge);q(We+C+we,We+C+we,rt,Il(1,9)+nt,Hl(ql(C)+tt+l,ql(C)+Ve),Kl(C),dt,Hl($t,`tables: ${l})`+Ye,et),bt),q(Te+C+we,Te+C+we,we,Il(1,12),a,a,a,it,bt);const le=$(w+je,Jl("tableId?: TId","rowId: Id","cellId?: CId",M+De+H,Xl),il(me+w),`<TId extends ${n}, CId extends ${s}<TId>>`),te=$(m+je,Jl("tableId?: TId","rowId: Id",M+De+H,"cellComponents?: {readonly [CId in "+s+`<TId>]?: ComponentType<${le}<TId, CId>>;}`,`getCellComponentProps?: (cellId: ${s}<TId>) => ExtraProps`,`customCellIds?: ${s}<TId>[]`,ct,Xl),il(me+m),`<TId extends ${n}>`),ae=$(p+je,Jl("tableId?: TId",M+De+H,`rowComponent?: ComponentType<${te}<TId>>`,"getRowComponentProps?: (rowId: Id) => ExtraProps","customCellIds?: CellId<TId>[]",ct,Xl),il(me+p),`<TId extends ${n}>`),oe=$("Sorted"+p+je,Jl("tableId?: TId","cellId?: "+s+"<TId>","descending?: boolean","offset?: number","limit?: number",M+De+H,`rowComponent?: ComponentType<${te}<TId>>`,"getRowComponentProps?: (rowId: Id) => ExtraProps","customCellIds?: CellId<TId>[]",ct,Xl),il(me+"sorted "+p),`<TId extends ${n}>`),Ie=$(C+je,Jl(M+De+H,"tableComponents?: {readonly [TId in "+n+`]?: ComponentType<${ae}<TId>>;}`,`getTableComponentProps?: (tableId: ${n}) => ExtraProps`,ct,Xl),il(sl(1,1)));c(1,j,Ie,ae,oe,te,le),K(C+Ct,"{"+M+", tableComponents, getTableComponentProps"+ut+"}: "+Ie,[de+`(${ee}(${M}).map((tableId) => {`,"const Table = (tableComponents?.[tableId] ?? "+X+"(tableId)) as React.ComponentType<TableProps<typeof tableId>>;","return <Table",`{...${ne}(getTableComponentProps, tableId)}`,"tableId={tableId}","key={tableId}",W,Yl,"/>;","}), separator)"],Il(1,13)+ge),E(((e,l,t)=>{const[n,o,s,I,u]=ce(Z,e);c(null,L,n,o,s,I,u),q(i+l+p,i+p,d,fl(e,0,1)+ge,a,t),q(l+p,p,n,fl(e)+ge,a,t),q(l+p+y,p+y,b,cl(w,"the whole of "+hl(e))+ge,a,t),q(l+m+ve,m+ve,r,"Gets the number of Rows in "+hl(e)+ge,a,t);const $=q(l+f,f,b,cl(m,hl(e))+ge,a,t),C=q(l+g,g,b,cl(m,hl(e),1)+ge,"cellId?: "+u+", descending?: boolean, offset?: number, limit?: number",t+", cellId, descending, offset, limit");q(i+l+m,i+m,d,gl(e,0,1)+ge,pt,Hl(t,st)),q(l+m,m,s,gl(e)+ge,pt,Hl(t,st)),q(l+y,y,u+Fe,cl(w,ml(e))+ge,pt,Hl(t,st)),q(We+l+p+we,We+p+we,rt,fl(e,9)+nt,Hl(ql(p)+tt+o,ql(p)+Ve),Hl(t,Kl(p)),dt,Hl($t,`table: ${o})`+Ye,et),bt),q(Te+l+p+we,Te+p+we,we,fl(e,12),a,t,a,it,bt),q(We+l+m+we,We+m+we,rt,gl(e,9)+nt,Hl(pt,ql(m)+tt+I,ql(m)+Ve),Hl(t,st,Kl(m)),dt,Hl($t,`row: ${I})`+Ye,et),bt),q("Add"+l+m+we,"Add"+m+we,rt,gl(e,10)+nt,Hl(ql(m)+tt+I,ql(m)+Ve),Hl(t,Kl(m)),dt,"then?: ("+Hl(pt+Ne,"store: Store","row: "+I+")"+Ye,"then"+Ve)+", reuseRowIds?: boolean",bt+", reuseRowIds"),q(We+l+R+m+we,We+R+m+we,rt,gl(e,11)+nt,Hl(pt,ql(R+m)+tt+I,ql(R+m)+Ve),Hl(t,st,Kl(R+m)),dt,Hl($t,`partialRow: ${I})`+Ye,et),bt),q(Te+l+m+we,Te+m+we,we,gl(e,12),pt,Hl(t,st),a,it,bt);const h=K(l+m+Ct,"{rowId, "+M+", cellComponents, getCellComponentProps, customCellIds"+ut+`}: ${te}<'${e}'>`,[de+`(${re}(customCellIds, `+t+`, rowId, ${M}).map((cellId: ${u}) => {`,"const Cell = (cellComponents?.[cellId] ?? "+Y+`(${t}, cellId)) as React.ComponentType<CellProps<typeof `+t+", typeof cellId>>;","return <Cell",`{...${ne}(getCellComponentProps, cellId)} `,"key={cellId}",`tableId={${t}}`,It,"cellId={cellId}",W,Yl,"/>;","})"+ut+", rowId)"],gl(e,13)+ge);K(l+"Sorted"+p+Ct,"{cellId, descending, offset, limit, ...props}: "+oe+`<'${e}'>`,Q+"(props, "+C+`(cellId, descending, offset, limit, props.${M}), ${t}, ${h});`,fl(e,13)+", sorted"+ge),K(l+p+Ct,`props: ${ae}<'${e}'>`,Q+"(props, "+$+`(props.${M}), ${t}, ${h});`,fl(e,13)+ge),D(e,((n,o,r,s,I)=>{const u="Map"+Ll(o,1);c(0,L,u),c(1,L,u),q(i+l+I+p+w,i+p+w,d,`Gets ${rl(1)}the '${n}' Cell anywhere in `+hl(e)+ge,a,Hl(t,s)),q(i+l+I+w,i+w,d,wl(e,n,0,1)+ge,pt,Hl(t,st,s));const $=q(l+I+w,w,o+(O(r)?Ne:a),wl(e,n)+ge,pt,Hl(t,st,s));q(We+l+I+w+we,We+w+we,rt,wl(e,n,9)+nt,Hl(pt,ql(w)+tt+o+" | "+u,ql(w)+Ve),Hl(t,st,s,Kl(w)),dt,Hl($t,`cell: ${o} | ${u})`+Ye,et),bt),q(Te+l+I+w+we,Te+w+we,we,wl(e,n,12),Hl(pt,"forceDel?: boolean"),Hl(t,st,s,"forceDel"),a,it,bt),K(l+I+w+Ct,`{rowId, ${M}, debugIds}: `+le+`<'${e}', '${n}'>`,[de+`('' + ${$}(rowId, `+M+`) ?? '', undefined, debugIds, ${s})`],wl(e,n,13)+ge)}))}));const ue=B(E((e=>{var l,t;return null!=(t=null==(l=ce(Z,e))?void 0:l[4])?t:a}))," | ");q(i+C+u,i+C+u,Xe,Il(1,8,0,1)+" changes",ht(I),mt()),q(C+u,C+u,Xe,Il(1,8)+" changes",ht(v),mt()),q(h+u,h+u,Xe,Cl(2,0,1),ht(T),mt()),q(i+p+u,i+p+u,Xe,Cl(3,0,0,1),ht(x,`tableId: ${n} | null`),mt("tableId")),q(p+u,p+u,Xe,Cl(3,0),ht(P,`tableId: ${n} | null`),mt("tableId")),q(p+y+u,p+y+u,Xe,Cl(14,3,1),ht(A,`tableId: ${n} | null`),mt("tableId")),q(i+p+w+u,i+p+w+u,Xe,Cl(16,3,0,1),ht(k,`tableId: ${n} | null`,`cellId: ${ue} | null`),mt("tableId","cellId")),q(m+ve+u,m+ve+u,Xe,Cl(15,3),ht(S,`tableId: ${n} | null`),mt("tableId")),q(f+u,f+u,Xe,Cl(4,3,1),ht(N,`tableId: ${n} | null`),mt("tableId")),q(g+u,g+u,Xe,Cl(13,3,1),ht(G,`tableId: ${n} | null`,"cellId: "+ue+Ne,"descending: boolean","offset: number","limit: number"+Ne),mt("tableId","cellId","descending","offset","limit")),q(i+m+u,i+m+u,Xe,Cl(5,3,0,1),ht(J,`tableId: ${n} | null`,st+": IdOrNull"),mt("tableId",st)),q(m+u,m+u,Xe,Cl(5,3),ht(z,`tableId: ${n} | null`,st+": IdOrNull"),mt("tableId",st)),q(y+u,y+u,Xe,Cl(6,5,1),ht(F,`tableId: ${n} | null`,st+": IdOrNull"),mt("tableId",st)),q(i+w+u,i+w+u,Xe,Cl(7,5,0,1),ht(U,`tableId: ${n} | null`,st+": IdOrNull",`cellId: ${ue} | null`),mt("tableId",st,"cellId")),q(w+u,w+u,Xe,Cl(7,5),ht(_,`tableId: ${n} | null`,st+": IdOrNull",`cellId: ${ue} | null`),mt("tableId",st,"cellId"))}if(!oe(l)){const[e,l,t,n,o,r,I,b]=s;c(null,L,...s),c(1,L,H);const p=V("getDefaultValueComponent","valueId: Id",B(N(((e,l,t,a,n)=>`valueId == ${a} ? `+n+"ValueView : ")))+se);q(i+T,i+T,d,Il(2,0,0,1)+ge),q(T,T,e,Il(2,0)+ge);const C=q(x,x,t+Fe,cl(v,Ue)+ge);q(We+T+we,We+T+we,rt,Il(2,9)+nt,Hl(ql(T)+tt+l,ql(T)+Ve),Kl(T),dt,Hl($t,`values: ${l})`+Ye,et),bt),q(We+R+T+we,We+R+T+we,rt,Il(2,11)+nt,Hl(ql(R+T)+tt+l,ql(R+T)+Ve),Kl(R+T),dt,Hl($t,`partialValues: ${l})`+Ye,et),bt),q(Te+T+we,Te+T+we,we,Il(2,12),a,a,a,it,bt);const h=$(v+je,Jl("valueId?: VId",M+De+H,Xl),il("a Value"),`<VId extends ${t}>`),m=$(T+je,Jl(M+De+H,"valueComponents?: {readonly [VId in "+t+`]?: ComponentType<${h}<VId>>;}`,`getValueComponentProps?: (valueId: ${t}) => ExtraProps`,ct,Xl),il(sl(2,1)));c(1,j,m,h),K(T+Ct,"{"+M+", valueComponents, getValueComponentProps"+ut+"}: "+m,[de+`(${C}(${M}).map((valueId) => {`,"const Value = valueComponents?.[valueId] ?? "+p+"(valueId);","return <Value",`{...${ne}(getValueComponentProps, valueId)}`,"key={valueId}",W,Yl,"/>;","}), separator)"],Il(2,13)+ge),N(((e,l,t,n,o)=>{const r="Map"+Ll(l,1);c(0,L,r),c(1,L,r),q(i+o+v,i+v,d,yl(e,0,1)+ge,a,n);const s=q(o+v,v,l,yl(e)+ge,a,n);q(We+o+v+we,We+v+we,rt,yl(e,9)+nt,Hl(ql(v)+tt+l+" | "+r,ql(v)+Ve),Hl(n,Kl(v)),dt,Hl($t,`value: ${l} | ${r})`+Ye,et),bt),q(Te+o+v+we,Te+v+we,we,yl(e,12),a,n,a,it,bt),K(o+v+Ct,`{${M}, debugIds}: ${h}<'${e}'>`,[de+`('' + ${s}(`+M+`) ?? '', undefined, debugIds, ${n})`],yl(e,13)+ge)})),q(i+T+u,i+T+u,Xe,Il(2,8,0,1)+" changes",ht(n),mt()),q(T+u,T+u,Xe,Il(2,8)+" changes",ht(o),mt()),q(x+u,x+u,Xe,Cl(10,0,1),ht(r),mt()),q(i+v+u,i+v+u,Xe,Cl(11,0,0,1),ht(I,`valueId: ${t} | null`),mt("valueId")),q(v+u,v+u,Xe,Cl(11,0),ht(b,`valueId: ${t} | null`),mt("valueId"))}return K(Ge,`{${M}, ${M}ById, children}: `+ee+" & {readonly children: React.ReactNode}",["{",at,"return (","<Context."+Ge,"value={useMemo(",`() => [${M} ?? contextValue[0], {...contextValue[1], ...${M}ById}],`,`[${M}, ${M}ById, contextValue],`,")}>","{children}",`</Context.${Ge}>`,");","}"],"Wraps part of an application in a context that provides default objects to be used by hooks and components within"),[I(...A(0),...k(),...X(0)),I(...A(1),...S(),...X(1))]},gt=(e,l,t)=>{if(oe(e)&&oe(l))return[a,a,a,a];const[n,o,d,r]=Ql(e,l,t);return[n,o,...ft(e,l,t,d,r)]},wt=JSON.parse;var yt=Object.defineProperty,vt=Object.defineProperties,Tt=Object.getOwnPropertyDescriptors,xt=Object.getOwnPropertySymbols,Vt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable,Pt=(e,l,t)=>l in e?yt(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,At=(e,l)=>{for(var t in l||(l={}))Vt.call(l,t)&&Pt(e,t,l[t]);if(xt)for(var t of xt(l))Rt.call(l,t)&&Pt(e,t,l[t]);return e},kt=(e,l)=>vt(e,Tt(l)),St=(e,l,t)=>new Promise(((a,n)=>{var o=e=>{try{r(t.next(e))}catch(e){n(e)}},d=e=>{try{r(t.throw(e))}catch(e){n(e)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,d);r((t=t.apply(e,l)).next())}));const Ot="prettier/",Et=Ot+"plugins/",Dt={parser:"typescript",singleQuote:!0,trailingComma:"all",bracketSpacing:!1,jsdocSingleLineComment:!1},Nt=Wl((e=>{const l=()=>{const l=wt(e.getTablesSchemaJson());return!oe(l)||J(e.getTableIds(),(t=>{const a=e.getRowIds(t),n=ue();if(J(a,(l=>J(e.getCellIds(t,l),(a=>{const o=e.getCell(t,l,a),d=pe(n,a,(()=>[M(o),ue(),[0],0])),[r,s,[I]]=d,u=pe(s,o,(()=>0))+1;return u>I&&(d[2]=[u,o]),be(s,o,u),d[3]++,r==M(o)})))))return l[t]={},se(n,(([e,,[,n],o],d)=>{l[t][d]=At({[s]:e},o==G(a)?{[I]:n}:{})})),1}))?l:{}},t=()=>{const l=wt(e.getValuesSchemaJson());return oe(l)&&e.forEachValue(((e,t)=>{l[e]={[s]:M(t)}})),l},a=e=>gt(l(),t(),e),n=e=>St(void 0,null,(function*(){const l=["d.ts","ts","d.ts","tsx"],t=[];let n;try{n=(yield import(Ot+"standalone")).format,_(t,yield import(Et+"estree"),yield import(Et+"typescript"))}catch(e){n=e=>St(void 0,null,(function*(){return e}))}return yield H(F(a(e),((e,a)=>St(void 0,null,(function*(){return Dl(yield n(e,kt(At({},Dt),{plugins:t,filepath:"_."+l[a]})))})))))}));return te({getStoreStats:l=>{let t=0,a=0,n=0;const o={};return e.forEachTable(((e,d)=>{t++;let r=0,s=0;const I={};d(((e,t)=>{r++;let a=0;t((()=>a++)),s+=a,l&&(I[e]={rowCells:a})})),a+=r,n+=s,l&&(o[e]={tableRows:r,tableCells:s,rows:I})})),At({totalTables:t,totalRows:a,totalCells:n,totalValues:G(e.getValueIds()),jsonLength:G(e.getJson())},l?{detail:{tables:o}}:{})},getStoreTablesSchema:l,getStoreValuesSchema:t,getStoreApi:a,getPrettyStoreApi:n,getStore:()=>e})}));e.createTools=Nt},"object"==typeof exports&&"undefined"!=typeof module?l(exports):"function"==typeof define&&define.amd?define(["exports"],l):l((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseTools={});
