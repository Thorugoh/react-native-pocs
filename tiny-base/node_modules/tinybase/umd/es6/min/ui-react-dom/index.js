var e,l;e=this,l=function(e,l,t){"use strict";const n=e=>typeof e,s=n(""),a=n(!0),o=n(0),u="Value",r="currentTarget",i="value",d=Math.min,c=isFinite,m=e=>null==e,b=(e,l,t,n)=>e==s?l:e==o?t:n,{PureComponent:I,Fragment:C,createContext:p,createElement:h,useCallback:y,useContext:f,useEffect:g,useLayoutEffect:v,useMemo:w,useRef:T,useState:R,useSyncExternalStore:k}=t,S=(e,...l)=>m(e)?{}:e(...l),O=(e,l)=>e.map(l),N=Object,V=N.entries,x=(e=[])=>N.fromEntries(e),q=(e,l)=>O(V(e),(([e,t])=>l(t,e)));var P=Object.defineProperty,j=Object.defineProperties,E=Object.getOwnPropertyDescriptors,H=Object.getOwnPropertySymbols,B=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable,D=(e,l,t)=>l in e?P(e,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[l]=t,F=(e,l)=>{for(var t in l||(l={}))B.call(l,t)&&D(e,t,l[t]);if(H)for(var t of H(l))A.call(l,t)&&D(e,t,l[t]);return e},L=(e,l)=>j(e,E(l)),M=(e,l)=>{var t={};for(var n in e)B.call(e,n)&&l.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&H)for(var n of H(e))l.indexOf(n)<0&&A.call(e,n)&&(t[n]=e[n]);return t};const U="editable",$=(e,t)=>O(l.useTableCellIds(e,t),(l=>e+"."+l)),z=(e,l,t)=>{const n=y(e,l);return t?n:void 0},G=(...e)=>w((()=>e),e),J=(e,l)=>w((()=>({store:e,tableId:l})),[e,l]),K=(e,l)=>w((()=>({queries:e,queryId:l})),[e,l]),Q=(e,l=!1,t,n=0,s,a,o,u)=>{const[[r,i,d],c]=R([e,l,n]),m=y((e=>{c(e),null==u||u(e)}),[u]),b=z((e=>m([e,e==r&&!i,d])),[m,r,i,d],t),I=y((e=>m([r,i,e])),[m,r,i]),C=!0===o?te:o;return[[r,i,d],b,w((()=>!1===o?null:h(C,{offset:d,limit:s,total:a,onChange:I})),[o,C,d,s,a,I])]},W=(e,l,t)=>w((()=>{const a=null!=l?l:e;return o=Array.isArray(a)?x(O(a,(e=>[e,e]))):a,u=(e,l)=>F(F({},{label:l,component:t}),n(e)==s?{label:e}:e),x(q(o,((e,l)=>[l,u(e,l)])));var o,u}),[l,t,e]),X=({className:e,headerRow:l,idColumn:t,params:[n,s,a,o,u,r]})=>h("table",{className:e},r?h("caption",null,r):null,!1===l?null:h("thead",null,h("tr",null,!1===t?null:h(Y,{sort:null!=o?o:[],label:"Id",onClick:u}),q(n,(({label:e},l)=>h(Y,{key:l,cellId:l,label:e,sort:null!=o?o:[],onClick:u}))))),h("tbody",null,O(a,(e=>h("tr",{key:e},!1===t?null:h("th",null,e),q(n,(({component:l,getComponentProps:t},n)=>h("td",{key:n},h(l,L(F(F({},S(t,e,n)),s),{rowId:e,cellId:n})))))))))),Y=({cellId:e,sort:[l,t],label:n=(null!=e?e:""),onClick:s})=>h("th",{onClick:z((()=>null==s?void 0:s(e)),[s,e],s),className:m(t)||l!=e?void 0:`sorted ${t?"de":"a"}scending`},m(t)||l!=e?null:(t?"↓":"↑")+" ",n),Z=({localRowId:e,params:[t,n,s,a,o,u,r]})=>{const i=l.useRemoteRowId(o,e,u);return h("tr",null,!1===t?null:h(C,null,h("th",null,e),h("th",null,i)),q(n,(({component:l,getComponentProps:t},n)=>{const[o,u]=((e,l="",t)=>e.split(l,t))(n,".",2),d=o===s?e:o===a?i:null;return m(d)?null:h("td",{key:n},h(l,L(F({},S(t,d,u)),{store:r,tableId:o,rowId:d,cellId:u})))})))},_=({thing:e,onThingChange:l,className:t,hasSchema:u,showType:d=!0})=>{const[m,I]=R(),[C,p]=R(),[f,g]=R(),[v,w]=R(),[T,k]=R();C!==e&&(I((e=>{const l=n(e);return(e=>e==s||e==a)(l)||l==o&&c(e)?l:void 0})(e)),p(e),g(e+""),w(Number(e)||0),k(!!e));const S=y(((e,t)=>{t(e),p(e),l(e)}),[l]),O=y((()=>{if(!(null==u?void 0:u())){const e=b(m,o,a,s),t=b(e,f,v,T);I(e),p(t),l(t)}}),[u,l,f,v,T,m]);return h("div",{className:t},d?h("button",{className:m,onClick:O},m):null,b(m,h("input",{key:m,value:f,onChange:y((e=>S(e[r][i]+"",g)),[S])}),h("input",{key:m,type:"number",value:v,onChange:y((e=>S(Number(e[r][i]||0),w)),[S])}),h("input",{key:m,type:"checkbox",checked:T,onChange:y((e=>S(!!e[r].checked,k)),[S])})))},ee=({tableId:e,rowId:t,cellId:n,store:s,className:a,showType:o})=>{var u;return h(_,{thing:l.useCell(e,t,n,s),onThingChange:l.useSetCellCallback(e,t,n,(e=>e),[],s),className:null!=a?a:U+"Cell",showType:o,hasSchema:null==(u=l.useStoreOrStoreById(s))?void 0:u.hasTablesSchema})},le=({valueId:e,store:t,className:n,showType:s})=>{var a;return h(_,{thing:l.useValue(e,t),onThingChange:l.useSetValueCallback(e,(e=>e),[],t),className:null!=n?n:U+u,showType:s,hasSchema:null==(a=l.useStoreOrStoreById(t))?void 0:a.hasValuesSchema})},te=({onChange:e,total:l,offset:t=0,limit:n=l,singular:s="row",plural:a=s+"s"})=>{(t>l||t<0)&&(t=0,e(0));const o=z((()=>e(t-n)),[e,t,n],t>0),u=z((()=>e(t+n)),[e,t,n],t+n<l);return h(C,null,l>n&&h(C,null,h("button",{className:"previous",disabled:0==t,onClick:o},"←"),h("button",{className:"next",disabled:t+n>=l,onClick:u},"→"),t+1," to ",d(l,t+n)," of "),l," ",1!=l?a:s)};e.EditableCellView=ee,e.EditableValueView=le,e.RelationshipInHtmlTable=({relationshipId:e,relationships:t,editable:n,customCells:s,className:a,headerRow:o,idColumn:u=!0})=>{const[r,i,d,c]=((e,l)=>[e,null==e?void 0:e.getStore(),null==e?void 0:e.getLocalTableId(l),null==e?void 0:e.getRemoteTableId(l)])(l.useRelationshipsOrRelationshipsById(t),e),m=W([...$(d,i),...$(c,i)],s,n?ee:l.CellView),b=G(u,m,d,c,e,r,i);return h("table",{className:a},!1===o?null:h("thead",null,h("tr",null,!1===u?null:h(C,null,h("th",null,d,".Id"),h("th",null,c,".Id")),q(m,(({label:e},l)=>h("th",{key:l},e))))),h("tbody",null,O(l.useRowIds(d,i),(e=>h(Z,{key:e,localRowId:e,params:b})))))},e.ResultSortedTableInHtmlTable=e=>{var t=e,{queryId:n,cellId:s,descending:a,offset:o,limit:u,queries:r,sortOnClick:i,paginator:d=!1,customCells:c,onChange:m}=t,b=M(t,["queryId","cellId","descending","offset","limit","queries","sortOnClick","paginator","customCells","onChange"]);const[I,C,p]=Q(s,a,i,o,u,l.useResultRowCount(n,r),d,m);return h(X,L(F({},b),{params:G(W(l.useResultTableCellIds(n,r),c,l.ResultCellView),K(r,n),l.useResultSortedRowIds(n,...I,u,r),I,C,p)}))},e.ResultTableInHtmlTable=e=>{var t=e,{queryId:n,queries:s,customCells:a}=t,o=M(t,["queryId","queries","customCells"]);return h(X,L(F({},o),{params:G(W(l.useResultTableCellIds(n,s),a,l.ResultCellView),K(s,n),l.useResultRowIds(n,s))}))},e.SliceInHtmlTable=e=>{var t=e,{indexId:n,sliceId:s,indexes:a,editable:o,customCells:u}=t,r=M(t,["indexId","sliceId","indexes","editable","customCells"]);const[i,d,c]=((e,l)=>[e,null==e?void 0:e.getStore(),null==e?void 0:e.getTableId(l)])(l.useIndexesOrIndexesById(a),n);return h(X,L(F({},r),{params:G(W(l.useTableCellIds(c,d),u,o?ee:l.CellView),J(d,c),l.useSliceRowIds(n,s,i))}))},e.SortedTableInHtmlTable=e=>{var t=e,{tableId:n,cellId:s,descending:a,offset:o,limit:u,store:r,editable:i,sortOnClick:d,paginator:c=!1,onChange:m,customCells:b}=t,I=M(t,["tableId","cellId","descending","offset","limit","store","editable","sortOnClick","paginator","onChange","customCells"]);const[C,p,y]=Q(s,a,d,o,u,l.useRowCount(n,r),c,m);return h(X,L(F({},I),{params:G(W(l.useTableCellIds(n,r),b,i?ee:l.CellView),J(r,n),l.useSortedRowIds(n,...C,u,r),C,p,y)}))},e.SortedTablePaginator=te,e.TableInHtmlTable=e=>{var t=e,{tableId:n,store:s,editable:a,customCells:o}=t,u=M(t,["tableId","store","editable","customCells"]);return h(X,L(F({},u),{params:G(W(l.useTableCellIds(n,s),o,a?ee:l.CellView),J(s,n),l.useRowIds(n,s))}))},e.ValuesInHtmlTable=({store:e,editable:t=!1,valueComponent:n=(t?le:l.ValueView),getValueComponentProps:s,className:a,headerRow:o,idColumn:r})=>h("table",{className:a},!1===o?null:h("thead",null,h("tr",null,!1===r?null:h("th",null,"Id"),h("th",null,u))),h("tbody",null,O(l.useValueIds(e),(l=>h("tr",{key:l},!1===r?null:h("th",null,l),h("td",null,h(n,L(F({},S(s,l)),{valueId:l,store:e}))))))))},"object"==typeof exports&&"undefined"!=typeof module?l(exports,require("../ui-react/index.js"),require("react")):"function"==typeof define&&define.amd?define(["exports","../ui-react","react"],l):l((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseUiReactDom={},e.TinyBaseUiReact,e.React);
