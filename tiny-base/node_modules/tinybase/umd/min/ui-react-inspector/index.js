var e,t;e=this,t=function(e,t,s){"use strict";const l=e=>typeof e,n="",a=l(n),r=l(!0),o=l(0),i=l(l),d="type",u="default",c="Has",h="Ids",m="Table",g=m+"s",p=m+h,b="Row",I=b+"Count",f=b+h,y="Cell",w=y+h,C="Value",v=C+"s",k=C+h,S="currentTarget",x="value",T=e=>n+e,V=globalThis.window,R=Math,q=R.min,M=R.floor,N=isFinite,L=e=>null==e,E=(e,t,s)=>L(e)?s?.():t(e),z=e=>e==a||e==r,$=e=>l(e)==i,O=e=>Array.isArray(e),A=(e,t,s)=>e.slice(t,s),J=e=>e.length,P=e=>{throw Error(e)},{PureComponent:B,Fragment:D,createContext:F,createElement:Q,useCallback:j,useContext:H,useEffect:W,useLayoutEffect:U,useMemo:G,useRef:K,useState:X,useSyncExternalStore:Y}=t,Z=(e,...t)=>L(e)?{}:e(...t),_=(e,t)=>e.sort(t),ee=(e,t)=>e.forEach(t),te=(e,t)=>e.map(t),se=e=>0==J(e),le=(e,...t)=>e.push(...t),ne=e=>e.shift(),ae=Object,re=e=>ae.getPrototypeOf(e),oe=ae.entries,ie=ae.isFrozen,de=e=>!L(e)&&E(re(e),(e=>e==ae.prototype||L(re(e))),(()=>!0)),ue=ae.keys,ce=ae.freeze,he=(e=[])=>ae.fromEntries(e),me=(e,t)=>t in e,ge=(e,t)=>(delete e[t],e),pe=(e,t)=>te(oe(e),(([e,s])=>t(s,e))),be=(e,t)=>he(pe(e,((e,s)=>[s,t(e,s)]))),Ie=e=>de(e)&&0==(e=>J(ue(e)))(e),fe=(e,t,s,l=0)=>L(e)||!de(e)||!l&&Ie(e)||ie(e)?(s?.(),!1):(((e,t)=>{ee(oe(e),(([e,s])=>t(s,e)))})(e,((s,l)=>{t(s,l)||ge(e,l)})),!!l||!Ie(e)),ye=JSON.stringify,we=JSON.parse,Ce=e=>ye(e,((e,t)=>t instanceof Map?ae.fromEntries([...t]):t)),ve="tinybaseInspector",ke="TinyBase Inspector",Se=["left","top","bottom","right","full"],xe="state",Te="sort",Ve="open",Re="position",qe=Ve,Me="editable",Ne=(...e)=>Ce(e),Le=(e,t)=>te(_([...e]),t),Ee=(e,t)=>[!!s.useCell(xe,e,Me,t),j((s=>{t.setCell(xe,e,Me,(e=>!e)),s.preventDefault()}),[t,e])],ze="M20 80l5-15l40-40l10 10l-40 40l-15 5m5-15l10 10",$e='content:url("',Oe=$e+"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100' stroke-width='4' stroke='white' fill='none'>",Ae='</svg>")',Je=$e+"data:image/svg+xml,%3csvg viewBox='0 0 680 680' xmlns='http://www.w3.org/2000/svg' style='width:680px%3bheight:680px'%3e %3cpath stroke='white' stroke-width='80' fill='none' d='M340 617a84 241 90 11.01 0zM131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124zm-12-127a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e %3cpath fill='%23d81b60' d='M131 475a94 254 70 10428-124 114 286 70 01-428 124zm0-140a94 254 70 10428-124 114 286 70 01-428 124z' /%3e %3cpath d='M249 619a94 240 90 00308-128 114 289 70 01-308 128zM119 208a94 254 70 00306 38 90 260 90 01-306-38zm221 3a74 241 90 11.01 0z' /%3e%3c/svg%3e\")",Pe=te([[20,20,20,60],[20,20,60,20],[20,60,60,20],[60,20,20,60],[30,30,40,40]],(([e,t,s,l])=>Oe+`<rect x='20' y='20' width='60' height='60' fill='grey'/><rect x='${e}' y='${t}' width='${s}' height='${l}' fill='white'/>`+Ae)),Be=Oe+"<path d='M20 20l60 60M20 80l60-60' />"+Ae,De=Oe+`<path d='${ze}' />`+Ae,Fe=Oe+`<path d='${ze}M20 20l60 60' />`+Ae,Qe="*::-webkit-scrollbar",je=((e,t="")=>e.join(t))(pe({"":"all:initial;font-family:sans-serif;font-size:0.75rem;position:fixed;z-index:999999","*":"all:revert","*::before":"all:revert","*::after":"all:revert",[Qe]:"width:0.5rem;height:0.5rem;",[Qe+"-track"]:"background:#111",[Qe+"-thumb"]:"background:#999;border:1px solid #111",[Qe+"-thumb:hover"]:"background:#fff",[Qe+"-corner"]:"background:#111",img:"width:1rem;height:1rem;background:#111;border:0;vertical-align:text-bottom",">img":"padding:0.25rem;bottom:0;right:0;position:fixed;"+Je,...he(te(["bottom:0;left:0","top:0;right:0"],((e,t)=>[`>img[data-position='${t}']`,e]))),main:"display:flex;flex-direction:column;background:#111d;color:#fff;position:fixed;",...he(te(["bottom:0;left:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:30vh","bottom:0;left:0;width:100vw;height:30vh","top:0;right:0;width:35vw;height:100vh","top:0;right:0;width:100vw;height:100vh"],((e,t)=>[`main[data-position='${t}']`,e]))),header:"display:flex;padding:0.25rem;background:#000;align-items:center","header>img:nth-of-type(1)":Je,"header>img:nth-of-type(6)":Be,...he(te(Pe,((e,t)=>[`header>img[data-id='${t}']`,e]))),"header>span":"flex:1;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;margin-left:0.25rem",article:"padding:0.25rem 0.25rem 0.25rem 0.5rem;overflow:auto;flex:1",details:"margin-left:0.75rem;width:fit-content;","details img":"display:none","details[open]>summary img":"display:unset;background:none;margin-left:0.25rem","details[open]>summary img.edit":De,"details[open]>summary img.done":Fe,summary:"margin-left:-0.75rem;line-height:1.25rem;user-select:none;width:fit-content",table:"border-collapse:collapse;table-layout:fixed;margin-bottom:0.5rem","table input":"background:#111;color:unset;padding:0 0.25rem;border:0;font-size:unset;vertical-align:top;margin:0",'table input[type="number"]':"width:4rem","table tbody button":"font-size:0;background:#fff;border-radius:50%;margin:0 0.125rem 0 0;width:0.85rem;color:#111","table button:first-letter":"font-size:0.75rem",thead:"background:#222","th:nth-of-type(1)":"min-width:2rem;","th.sorted":"background:#000","table caption":"text-align:left;white-space:nowrap;line-height:1.25rem",button:"width:1.5rem;border:none;background:none;color:#fff;padding:0","button[disabled]":"color:#777","button.next":"margin-right:0.5rem",[`th,#${ve} td`]:"overflow:hidden;text-overflow:ellipsis;padding:0.25rem 0.5rem;max-width:12rem;white-space:nowrap;border-width:1px 0;border-style:solid;border-color:#777;text-align:left","span.warn":"margin:0.25rem;color:#d81b60"},((e,t)=>e?`#${ve} ${t}{${e}}`:""))),He=({s:e})=>{const t=s.useValue(Re,e)??1,l=s.useSetValueCallback(qe,(()=>!0),[],e);return s.useValue(qe,e)?null:Q("img",{onClick:l,title:ke,"data-position":t})},We=({uniqueId:e,summary:t,editable:l,handleEditable:n,children:a,s:r})=>{const o=!!s.useCell(xe,e,Ve,r),i=s.useSetCellCallback(xe,e,Ve,(e=>e[S].open),[],r);return Q("details",{open:o,onToggle:i},Q("summary",null,t,n?Q("img",{onClick:n,className:l?"done":"edit"}):null),a)},Ue=e=>{const t=l(e);return z(t)||t==o&&N(e)?t:void 0},Ge=(e,t,s,l,n)=>L(n)?e.delCell(t,s,l,!0):e.setCell(t,s,l,n),Ke=(e,t,s)=>L(s)?e.delValue(t):e.setValue(t,s),Xe=(e,t,s,l)=>e==a?t:e==o?s:l,Ye="editable",Ze=(e,t)=>te(s.useTableCellIds(e,t),(t=>e+"."+t)),_e=(e,t,s)=>{const l=j(e,t);return s?l:void 0},et=(...e)=>G((()=>e),e),tt=(e,t)=>G((()=>({store:e,tableId:t})),[e,t]),st=(e,t)=>G((()=>({queries:e,queryId:t})),[e,t]),lt=(e,t=!1,s,l=0,n,a,r,o)=>{const[[i,d,u],c]=X([e,t,l]),h=j((e=>{c(e),o?.(e)}),[o]),m=_e((e=>h([e,e==i&&!d,u])),[h,i,d,u],s),g=j((e=>h([i,d,e])),[h,i,d]),p=!0===r?bt:r;return[[i,d,u],m,G((()=>!1===r?null:Q(p,{offset:u,limit:n,total:a,onChange:g})),[r,p,u,n,a,g])]},nt=(e,t,s)=>G((()=>{const n=t??e;return be(O(n)?he(te(n,(e=>[e,e]))):n,((e,t)=>{return{label:t,component:s,...(n=e,l(n)==a?{label:e}:e)};var n}))}),[t,s,e]),at=({className:e,headerRow:t,idColumn:s,params:[l,n,a,r,o,i]})=>Q("table",{className:e},i?Q("caption",null,i):null,!1===t?null:Q("thead",null,Q("tr",null,!1===s?null:Q(rt,{sort:r??[],label:"Id",onClick:o}),pe(l,(({label:e},t)=>Q(rt,{key:t,cellId:t,label:e,sort:r??[],onClick:o}))))),Q("tbody",null,te(a,(e=>Q("tr",{key:e},!1===s?null:Q("th",null,e),pe(l,(({component:t,getComponentProps:s},l)=>Q("td",{key:l},Q(t,{...Z(s,e,l),...n,rowId:e,cellId:l}))))))))),rt=({cellId:e,sort:[t,s],label:l=e??n,onClick:a})=>Q("th",{onClick:_e((()=>a?.(e)),[a,e],a),className:L(s)||t!=e?void 0:`sorted ${s?"de":"a"}scending`},L(s)||t!=e?null:(s?"↓":"↑")+" ",l),ot=({localRowId:e,params:[t,l,n,a,r,o,i]})=>{const d=s.useRemoteRowId(r,e,o);return Q("tr",null,!1===t?null:Q(D,null,Q("th",null,e),Q("th",null,d)),pe(l,(({component:t,getComponentProps:s},l)=>{const[r,o]=((e,t="",s)=>e.split(t,s))(l,".",2),u=r===n?e:r===a?d:null;return L(u)?null:Q("td",{key:l},Q(t,{...Z(s,u,o),store:i,tableId:r,rowId:u,cellId:o}))})))},it=({thing:e,onThingChange:t,className:s,hasSchema:l,showType:n=!0})=>{const[i,d]=X(),[u,c]=X(),[h,m]=X(),[g,p]=X(),[b,I]=X();u!==e&&(d(Ue(e)),c(e),m(e+""),p(Number(e)||0),I(!!e));const f=j(((e,s)=>{s(e),c(e),t(e)}),[t]),y=j((()=>{if(!l?.()){const e=Xe(i,o,r,a),s=Xe(e,h,g,b);d(e),c(s),t(s)}}),[l,t,h,g,b,i]);return Q("div",{className:s},n?Q("button",{className:i,onClick:y},i):null,Xe(i,Q("input",{key:i,value:h,onChange:j((e=>f(e[S][x]+"",m)),[f])}),Q("input",{key:i,type:"number",value:g,onChange:j((e=>f(Number(e[S][x]||0),p)),[f])}),Q("input",{key:i,type:"checkbox",checked:b,onChange:j((e=>f(!!e[S].checked,I)),[f])})))},dt=({tableId:e,cellId:t,descending:l,offset:n,limit:a,store:r,editable:o,sortOnClick:i,paginator:d=!1,onChange:u,customCells:c,...h})=>{const[m,g,p]=lt(t,l,i,n,a,s.useRowCount(e,r),d,u);return Q(at,{...h,params:et(nt(s.useTableCellIds(e,r),c,o?gt:s.CellView),tt(r,e),s.useSortedRowIds(e,...m,a,r),m,g,p)})},ut=({store:e,editable:t=!1,valueComponent:l=(t?pt:s.ValueView),getValueComponentProps:n,className:a,headerRow:r,idColumn:o})=>Q("table",{className:a},!1===r?null:Q("thead",null,Q("tr",null,!1===o?null:Q("th",null,"Id"),Q("th",null,C))),Q("tbody",null,te(s.useValueIds(e),(t=>Q("tr",{key:t},!1===o?null:Q("th",null,t),Q("td",null,Q(l,{...Z(n,t),valueId:t,store:e}))))))),ct=({indexId:e,sliceId:t,indexes:l,editable:n,customCells:a,...r})=>{const[o,i,d]=((e,t)=>[e,e?.getStore(),e?.getTableId(t)])(s.useIndexesOrIndexesById(l),e);return Q(at,{...r,params:et(nt(s.useTableCellIds(d,i),a,n?gt:s.CellView),tt(i,d),s.useSliceRowIds(e,t,o))})},ht=({relationshipId:e,relationships:t,editable:l,customCells:n,className:a,headerRow:r,idColumn:o=!0})=>{const[i,d,u,c]=((e,t)=>[e,e?.getStore(),e?.getLocalTableId(t),e?.getRemoteTableId(t)])(s.useRelationshipsOrRelationshipsById(t),e),h=nt([...Ze(u,d),...Ze(c,d)],n,l?gt:s.CellView),m=et(o,h,u,c,e,i,d);return Q("table",{className:a},!1===r?null:Q("thead",null,Q("tr",null,!1===o?null:Q(D,null,Q("th",null,u,".Id"),Q("th",null,c,".Id")),pe(h,(({label:e},t)=>Q("th",{key:t},e))))),Q("tbody",null,te(s.useRowIds(u,d),(e=>Q(ot,{key:e,localRowId:e,params:m})))))},mt=({queryId:e,cellId:t,descending:l,offset:n,limit:a,queries:r,sortOnClick:o,paginator:i=!1,customCells:d,onChange:u,...c})=>{const[h,m,g]=lt(t,l,o,n,a,s.useResultRowCount(e,r),i,u);return Q(at,{...c,params:et(nt(s.useResultTableCellIds(e,r),d,s.ResultCellView),st(r,e),s.useResultSortedRowIds(e,...h,a,r),h,m,g)})},gt=({tableId:e,rowId:t,cellId:l,store:n,className:a,showType:r})=>Q(it,{thing:s.useCell(e,t,l,n),onThingChange:s.useSetCellCallback(e,t,l,(e=>e),[],n),className:a??Ye+y,showType:r,hasSchema:s.useStoreOrStoreById(n)?.hasTablesSchema}),pt=({valueId:e,store:t,className:l,showType:n})=>Q(it,{thing:s.useValue(e,t),onThingChange:s.useSetValueCallback(e,(e=>e),[],t),className:l??Ye+C,showType:n,hasSchema:s.useStoreOrStoreById(t)?.hasValuesSchema}),bt=({onChange:e,total:t,offset:s=0,limit:l=t,singular:n="row",plural:a=n+"s"})=>{(s>t||s<0)&&(s=0,e(0));const r=_e((()=>e(s-l)),[e,s,l],s>0),o=_e((()=>e(s+l)),[e,s,l],s+l<t);return Q(D,null,t>l&&Q(D,null,Q("button",{className:"previous",disabled:0==s,onClick:r},"←"),Q("button",{className:"next",disabled:s+l>=t,onClick:o},"→"),s+1," to ",q(t,s+l)," of "),t," ",1!=t?a:n)},It=({indexes:e,indexesId:t,indexId:l,s:n})=>Q(We,{uniqueId:Ne("i",t,l),summary:"Index: "+l,s:n},te(s.useSliceIds(l,e),(s=>Q(ft,{indexes:e,indexesId:t,indexId:l,sliceId:s,s:n,key:s})))),ft=({indexes:e,indexesId:t,indexId:s,sliceId:l,s:n})=>{const a=Ne("i",t,s,l),[r,o]=Ee(a,n);return Q(We,{uniqueId:a,summary:"Slice: "+l,editable:r,handleEditable:o,s:n},Q(ct,{sliceId:l,indexId:s,indexes:e,editable:r}))},yt=({indexesId:e,s:t})=>{const l=s.useIndexes(e),n=s.useIndexIds(l);return L(l)?null:Q(We,{uniqueId:Ne("i",e),summary:"Indexes: "+(e??u),s:t},se(n)?"No indexes defined":Le(n,(s=>Q(It,{indexes:l,indexesId:e,indexId:s,s:t,key:s}))))},wt=({metrics:e,metricId:t})=>Q("tr",null,Q("th",null,t),Q("td",null,e?.getTableId(t)),Q("td",null,s.useMetric(t,e))),Ct=({metricsId:e,s:t})=>{const l=s.useMetrics(e),n=s.useMetricIds(l);return L(l)?null:Q(We,{uniqueId:Ne("m",e),summary:"Metrics: "+(e??u),s:t},se(n)?"No metrics defined":Q("table",null,Q("thead",null,Q("th",null,"Metric Id"),Q("th",null,"Table Id"),Q("th",null,"Metric")),Q("tbody",null,te(n,(e=>Q(wt,{metrics:l,metricId:e,key:e}))))))},vt=({queries:e,queriesId:t,queryId:l,s:n})=>{const a=Ne("q",t,l),[r,o,i]=we(s.useCell(xe,a,Te,n)??"[]"),d=s.useSetCellCallback(xe,a,Te,Ce,[],n);return Q(We,{uniqueId:a,summary:"Query: "+l,s:n},Q(mt,{queryId:l,queries:e,cellId:r,descending:o,offset:i,limit:10,paginator:!0,sortOnClick:!0,onChange:d}))},kt=({queriesId:e,s:t})=>{const l=s.useQueries(e),n=s.useQueryIds(l);return L(l)?null:Q(We,{uniqueId:Ne("q",e),summary:"Queries: "+(e??u),s:t},se(n)?"No queries defined":Le(n,(s=>Q(vt,{queries:l,queriesId:e,queryId:s,s:t,key:s}))))},St=({relationships:e,relationshipsId:t,relationshipId:s,s:l})=>{const n=Ne("r",t,s),[a,r]=Ee(n,l);return Q(We,{uniqueId:n,summary:"Relationship: "+s,editable:a,handleEditable:r,s:l},Q(ht,{relationshipId:s,relationships:e,editable:a}))},xt=({relationshipsId:e,s:t})=>{const l=s.useRelationships(e),n=s.useRelationshipIds(l);return L(l)?null:Q(We,{uniqueId:Ne("r",e),summary:"Relationships: "+(e??u),s:t},se(n)?"No relationships defined":Le(n,(s=>Q(St,{relationships:l,relationshipsId:e,relationshipId:s,s:t,key:s}))))},Tt=({tableId:e,store:t,storeId:l,s:n})=>{const a=Ne("t",l,e),[r,o,i]=we(s.useCell(xe,a,Te,n)??"[]"),d=s.useSetCellCallback(xe,a,Te,Ce,[],n),[u,c]=Ee(a,n);return Q(We,{uniqueId:a,summary:m+": "+e,editable:u,handleEditable:c,s:n},Q(dt,{tableId:e,store:t,cellId:r,descending:o,offset:i,limit:10,paginator:!0,sortOnClick:!0,onChange:d,editable:u}))},Vt=({store:e,storeId:t,s:l})=>{const n=Ne("v",t),[a,r]=Ee(n,l);return se(s.useValueIds(e))?null:Q(We,{uniqueId:n,summary:v,editable:a,handleEditable:r,s:l},Q(ut,{store:e,editable:a}))},Rt=({storeId:e,s:t})=>{const l=s.useStore(e),n=s.useTableIds(l);return L(l)?null:Q(We,{uniqueId:Ne("s",e),summary:(l.isMergeable()?"Mergeable":"")+"Store: "+(e??u),s:t},Q(Vt,{storeId:e,store:l,s:t}),Le(n,(s=>Q(Tt,{store:l,storeId:e,tableId:s,s:t,key:s}))))},qt=({s:e})=>{const t=K(null),l=K(0),[n,a]=X(!1),{scrollLeft:r,scrollTop:o}=s.useValues(e);U((()=>{const e=t.current;if(e&&!n){const t=new MutationObserver((()=>{e.scrollWidth>=M(r)+e.clientWidth&&e.scrollHeight>=M(o)+e.clientHeight&&e.scrollTo(r,o)}));return t.observe(e,{childList:!0,subtree:!0}),()=>t.disconnect()}}),[n,r,o]);const i=j((t=>{const{scrollLeft:s,scrollTop:n}=t[S];cancelIdleCallback(l.current),l.current=requestIdleCallback((()=>{a(!0),e.setPartialValues({scrollLeft:s,scrollTop:n})}))}),[e]),d=s.useStore(),u=s.useStoreIds(),c=s.useMetrics(),h=s.useMetricsIds(),m=s.useIndexes(),g=s.useIndexesIds(),p=s.useRelationships(),b=s.useRelationshipsIds(),I=s.useQueries(),f=s.useQueriesIds();return L(d)&&se(u)&&L(c)&&se(h)&&L(m)&&se(g)&&L(p)&&se(b)&&L(I)&&se(f)?Q("span",{className:"warn"},"There are no Stores or other objects to inspect. Make sure you placed the Inspector inside a Provider component."):Q("article",{ref:t,onScroll:i},Q(Rt,{s:e}),te(u,(t=>Q(Rt,{storeId:t,s:e,key:t}))),Q(Ct,{s:e}),te(h,(t=>Q(Ct,{metricsId:t,s:e,key:t}))),Q(yt,{s:e}),te(g,(t=>Q(yt,{indexesId:t,s:e,key:t}))),Q(xt,{s:e}),te(b,(t=>Q(xt,{relationshipsId:t,s:e,key:t}))),Q(kt,{s:e}),te(f,(t=>Q(kt,{queriesId:t,s:e,key:t}))))};class Mt extends B{constructor(e){super(e),this.state={e:0}}static getDerivedStateFromError(){return{e:1}}componentDidCatch=(e,t)=>console.error(e,t.componentStack);render(){return this.state.e?Q("span",{className:"warn"},"Inspector error: please see console for details."):this.props.children}}const Nt=({s:e})=>{const t=s.useValue(Re,e)??1,l=s.useSetValueCallback(qe,(()=>!1),[],e),n=s.useSetValueCallback(Re,(e=>Number(e[S].dataset.id)),[],e);return Q("header",null,Q("img",{title:ke}),Q("span",null,ke),te(Se,((e,s)=>s==t?null:Q("img",{onClick:n,"data-id":s,title:"Dock to "+e,key:s}))),Q("img",{onClick:l,title:"Close"}))},Lt=({s:e})=>{const t=s.useValue(Re,e)??1;return s.useValue(qe,e)?Q("main",{"data-position":t},Q(Nt,{s:e}),Q(Mt,null,Q(qt,{s:e}))):null},Et=e=>t=>{return s=(t,s)=>t+e(s),Bt(t).reduce(s,0);var s},zt=e=>e?.size??0,$t=Et(zt),Ot=Et($t),At=Et(Ot),Jt=(e,t)=>e?.has(t)??!1,Pt=e=>L(e)||0==zt(e),Bt=e=>[...e?.values()??[]],Dt=e=>e.clear(),Ft=(e,t)=>e?.forEach(t),Qt=(e,t)=>e?.delete(t),jt=e=>new Map(e),Ht=e=>[...e?.keys()??[]],Wt=(e,t)=>e?.get(t),Ut=(e,t)=>Ft(e,((e,s)=>t(s,e))),Gt=(e,t,s)=>L(s)?(Qt(e,t),e):e?.set(t,s),Kt=(e,t,s,l)=>(Jt(e,t)?l?.(Wt(e,t)):Gt(e,t,s()),Wt(e,t)),Xt=(e,t,s,l=Gt)=>(be(t,((t,l)=>s(e,l,t))),Ut(e,(s=>me(t,s)?0:l(e,s))),e),Yt=(e,t,s,l)=>{const n={};return Ft(e,((e,a)=>{if(!s?.(e,a)){const s=t?t(e,a):e;l?.(s)||(n[a]=s)}})),n},Zt=(e,t,s)=>Yt(e,(e=>Yt(e,t,s)),Pt,Ie),_t=(e,t,s)=>Yt(e,(e=>Zt(e,t,s)),Pt,Ie),es=(e,t)=>{const s=jt();return Ft(e,((e,l)=>s.set(l,t?.(e)??e))),s},ts=e=>es(e,es),ss=e=>es(e,ts),ls=(e,t,s,l,n=0)=>E((s?Kt:Wt)(e,t[n],n>J(t)-2?s:jt),(a=>{if(n>J(t)-2)return l?.(a)&&Gt(e,t[n]),a;const r=ls(a,t,s,l,n+1);return Pt(a)&&Gt(e,t[n]),r})),ns=e=>new Set(O(e)||L(e)?e:[e]),as=(e,t)=>e?.add(t),rs=/^\d+$/,os=()=>{const e=[];let t=0;return[s=>(s?ne(e):null)??n+t++,t=>{rs.test(t)&&J(e)<1e3&&le(e,t)}]},is=e=>{let t;const[s,l]=os(),a=jt();return[(l,r,o,i=[],d=()=>[])=>{t??=e();const u=s(1);return Gt(a,u,[l,r,o,i,d]),as(ls(r,o??[n],ns),u),u},(e,s,...l)=>ee(((e,t=[n])=>{const s=[],l=(e,n)=>n==J(t)?le(s,e):null===t[n]?Ft(e,(e=>l(e,n+1))):ee([t[n],null],(t=>l(Wt(e,t),n+1)));return l(e,0),s})(e,s),(e=>Ft(e,(e=>Wt(a,e)[0](t,...s??[],...l))))),e=>E(Wt(a,e),(([,t,s])=>(ls(t,s??[n],void 0,(t=>(Qt(t,e),Pt(t)?1:0))),Gt(a,e),l(e),s))),e=>E(Wt(a,e),(([e,,s=[],l,n])=>{const a=(...r)=>{const o=J(r);o==J(s)?e(t,...r,...n(r)):L(s[o])?ee(l[o]?.(...r)??[],(e=>a(...r,e))):a(...r,s[o])};a()}))]},ds=jt(),us=jt(),cs="storage",hs=e=>[e,e],ms=(e,t=$t)=>t(e[0])+t(e[1]),gs=()=>[jt(),jt()],ps=e=>[...e],bs=([e,t])=>e===t,Is=(e,t,s)=>Gt(e,t,Wt(e,t)==-s?void 0:s),fs=()=>{let e,t,s=!1,l=!1,n=0,a=[];const r=jt(),i=jt(),h=jt(),S=jt(),x=jt(),V=jt(),R=jt(),q=jt(),M=jt(),N=jt(),P=jt(),B=jt(),D=jt(),F=jt(),Q=ns(),j=jt(),H=jt(),W=jt(),U=jt(),G=gs(),K=gs(),X=gs(),Y=gs(),Z=gs(),se=gs(),ne=gs(),ae=gs(),re=gs(),oe=gs(),ie=gs(),de=gs(),ue=gs(),he=gs(),pe=gs(),ye=gs(),ve=gs(),ke=gs(),Se=gs(),xe=gs(),Te=gs(),Ve=gs(),Re=jt(),qe=gs(),[Me,Ne,Le,Ee]=is((()=>$s)),ze=e=>{if(!fe(e,((e,t)=>[d,u].includes(t))))return!1;const t=e[d];return!(!z(t)&&t!=o||(Ue(e[u])!=t&&ge(e,u),0))},$e=O,Oe=(t,s)=>(!e||Jt(P,s)||gt(s))&&fe(t,((e,t)=>Ae(s,t,e)),(()=>gt(s))),Ae=(e,t,s,l)=>fe(l?s:De(s,e,t),((l,n)=>E(Je(e,t,n,l),(e=>(s[n]=e,!0)),(()=>!1))),(()=>gt(e,t))),Je=(t,s,l,n)=>e?E(Wt(Wt(P,t),l),(e=>Ue(n)!=e[d]?gt(t,s,l,n,e[u]):n),(()=>gt(t,s,l,n))):L(Ue(n))?gt(t,s,l,n):n,Pe=(e,t)=>fe(t?e:Fe(e),((t,s)=>E(Be(s,t),(t=>(e[s]=t,!0)),(()=>!1))),(()=>pt())),Be=(e,s)=>t?E(Wt(D,e),(t=>Ue(s)!=t[d]?pt(e,s,t[u]):s),(()=>pt(e,s))):L(Ue(s))?pt(e,s):s,De=(e,t,s)=>(E(Wt(B,t),(([l,n])=>{Ft(l,((t,s)=>{me(e,s)||(e[s]=t)})),Ft(n,(l=>{me(e,l)||gt(t,s,l)}))})),e),Fe=e=>(t&&(Ft(F,((t,s)=>{me(e,s)||(e[s]=t)})),Ft(Q,(t=>{me(e,t)||pt(t)}))),e),Qe=e=>Xt(P,e,((e,t,s)=>{const l=jt(),n=ns();Xt(Kt(P,t,jt),s,((e,t,s)=>{Gt(e,t,s),E(s[u],(e=>Gt(l,t,e)),(()=>as(n,t)))})),Gt(B,t,[l,n])}),((e,t)=>{Gt(P,t),Gt(B,t)})),je=e=>Xt(D,e,((e,t,s)=>{Gt(D,t,s),E(s[u],(e=>Gt(F,t,e)),(()=>as(Q,t)))}),((e,t)=>{Gt(D,t),Gt(F,t),Qt(Q,t)})),He=e=>Ie(e)?Ts():Cs(e),We=e=>Xt(W,e,((e,t,s)=>Xe(t,s)),((e,t)=>nt(t))),Xe=(e,t)=>Xt(Kt(W,e,(()=>(it(e,1),Gt(j,e,os()),Gt(H,e,jt()),jt()))),t,((t,s,l)=>Ye(e,t,s,l)),((t,s)=>at(e,t,s))),Ye=(e,t,s,l,n)=>Xt(Kt(t,s,(()=>(dt(e,s,1),jt()))),l,((t,l,n)=>Ze(e,s,t,l,n)),((l,a)=>rt(e,t,s,l,a,n))),Ze=(e,t,s,l,n)=>{Jt(s,l)||ut(e,t,l,1);const a=Wt(s,l);n!==a&&(ct(e,t,l,a,n),Gt(s,l,n))},_e=(e,t,s,l,n)=>E(Wt(t,s),(t=>Ze(e,s,t,l,n)),(()=>Ye(e,t,s,De({[l]:n},e,s)))),et=e=>Ie(e)?qs():vs(e),tt=e=>Xt(U,e,((e,t,s)=>st(t,s)),((e,t)=>ot(t))),st=(e,t)=>{Jt(U,e)||ht(e,1);const s=Wt(U,e);t!==s&&(mt(e,s,t),Gt(U,e,t))},lt=e=>Wt(W,e)??Xe(e,{}),nt=e=>Xe(e,{}),at=(e,t,s)=>{const[,l]=Wt(j,e);l(s),Ye(e,t,s,{},!0)},rt=(e,t,s,l,n,a)=>{const r=Wt(Wt(B,e)?.[0],n);if(!L(r)&&!a)return Ze(e,s,l,n,r);const o=t=>{ct(e,s,t,Wt(l,t)),ut(e,s,t,-1),Gt(l,t)};L(r)?o(n):Ut(l,o),Pt(l)&&(dt(e,s,-1),Pt(Gt(t,s))&&(it(e,-1),Gt(W,e),Gt(j,e),Gt(H,e)))},ot=e=>{const t=Wt(F,e);if(!L(t))return st(e,t);mt(e,Wt(U,e)),ht(e,-1),Gt(U,e)},it=(e,t)=>Is(r,e,t),dt=(e,t,s)=>Is(Kt(S,e,jt),t,s)&&Gt(h,e,Kt(h,e,(()=>0))+s),ut=(e,t,s,l)=>{const n=Wt(H,e),a=Wt(n,s)??0;(0==a&&1==l||1==a&&-1==l)&&Is(Kt(i,e,jt),s,l),Gt(n,s,a!=-l?a+l:null),Is(Kt(Kt(x,e,jt),t,jt),s,l)},ct=(e,t,s,l,n)=>{Kt(Kt(Kt(V,e,jt),t,jt),s,(()=>[l,0]))[1]=n,a[3]?.(e,t,s,n)},ht=(e,t)=>Is(R,e,t),mt=(e,t,s)=>{Kt(q,e,(()=>[t,0]))[1]=s,a[4]?.(e,s)},gt=(e,t,s,l,n)=>(le(Kt(Kt(Kt(M,e,jt),t,jt),s,(()=>[])),l),n),pt=(e,t,s)=>(le(Kt(N,e,(()=>[])),t),s),bt=(e,t,s)=>E(Wt(Wt(Wt(V,e),t),s),(([e,t])=>[!0,e,t]),(()=>[!1,...hs(Nt(e,t,s))])),It=e=>E(Wt(q,e),(([e,t])=>[!0,e,t]),(()=>[!1,...hs(Bt(e))])),ft=e=>Pt(M)||Pt(ye[e])?0:Ft(e?ss(M):M,((t,s)=>Ft(t,((t,l)=>Ft(t,((t,n)=>Ne(ye[e],[s,l,n],t))))))),yt=e=>Pt(N)||Pt(ve[e])?0:Ft(e?es(N):N,((t,s)=>Ne(ve[e],[s],t))),wt=(e,t,s,l)=>{if(!Pt(e))return Ne(t,l,(()=>Yt(e))),Ut(e,((e,t)=>Ne(s,[...l??[],e],1==t))),1},Ct=e=>{const t=ls();t!=s&&Ne(G[e],void 0,t);const l=Pt(oe[e]),n=Pt(ue[e])&&Pt(he[e])&&Pt(re[e])&&Pt(ie[e])&&Pt(se[e])&&Pt(ne[e])&&Pt(ae[e])&&l&&Pt(X[e])&&Pt(Y[e]),a=Pt(pe[e])&&Pt(de[e])&&Pt(Z[e])&&Pt(K[e]);if(!n||!a){const t=e?[es(r),ts(i),es(h),ts(S),ss(x),ss(V)]:[r,i,h,S,x,V];if(!n){wt(t[0],X[e],Y[e]),Ft(t[1],((t,s)=>wt(t,se[e],ne[e],[s]))),Ft(t[2],((t,s)=>{0!=t&&Ne(ae[e],[s],Vt(s))}));const s=ns();Ft(t[3],((t,n)=>{wt(t,re[e],ie[e],[n])&&!l&&(Ne(oe[e],[n,null]),as(s,n))})),l||Ft(t[5],((t,l)=>{if(!Jt(s,l)){const s=ns();Ft(t,(e=>Ft(e,(([t,l],n)=>l!==t?as(s,n):Qt(e,n))))),Ft(s,(t=>Ne(oe[e],[l,t])))}})),Ft(t[4],((t,s)=>Ft(t,((t,l)=>wt(t,ue[e],he[e],[s,l])))))}if(!a){let s;Ft(t[5],((t,l)=>{let n;Ft(t,((t,a)=>{let r;Ft(t,(([t,o],i)=>{o!==t&&(Ne(pe[e],[l,a,i],o,t,bt),s=n=r=1)})),r&&Ne(de[e],[l,a],bt)})),n&&Ne(Z[e],[l],bt)})),s&&Ne(K[e],void 0,bt)}}},vt=e=>{const t=ys();t!=l&&Ne(ke[e],void 0,t);const s=Pt(xe[e])&&Pt(Te[e]),n=Pt(Ve[e])&&Pt(Se[e]);if(!s||!n){const t=e?[es(R),es(q)]:[R,q];if(s||wt(t[0],xe[e],Te[e]),!n){let s;Ft(t[1],(([t,l],n)=>{l!==t&&(Ne(Ve[e],[n],l,t,It),s=1)})),s&&Ne(Se[e],void 0,It)}}},kt=(e,...t)=>(Ls((()=>e(...te(t,T)))),$s),St=()=>_t(W),xt=()=>Ht(W),Tt=e=>Ht(Wt(H,T(e))),Vt=e=>zt(Wt(W,T(e))),Rt=e=>Ht(Wt(W,T(e))),qt=(e,t,s,l=0,n)=>{return te(A(_((a=Wt(W,T(e)),r=(e,s)=>[L(t)?s:Wt(e,T(t)),s],te([...a?.entries()??[]],(([e,t])=>r(t,e)))),(([e],[t])=>((e??0)<(t??0)?-1:1)*(s?-1:1))),l,L(n)?n:l+n),(([,e])=>e));var a,r},Mt=(e,t)=>Ht(Wt(Wt(W,T(e)),T(t))),Nt=(e,t,s)=>Wt(Wt(Wt(W,T(e)),T(t)),T(s)),Lt=()=>Yt(U),Et=()=>Ht(U),Bt=e=>Wt(U,T(e)),ls=()=>!Pt(W),rs=e=>Jt(W,T(e)),ds=(e,t)=>Jt(Wt(H,T(e)),T(t)),us=(e,t)=>Jt(Wt(W,T(e)),T(t)),cs=(e,t,s)=>Jt(Wt(Wt(W,T(e)),T(t)),T(s)),ys=()=>!Pt(U),ws=e=>Jt(U,T(e)),Cs=e=>kt((()=>(e=>fe(e,Oe,gt))(e)?We(e):0)),vs=e=>kt((()=>Pe(e)?tt(e):0)),ks=e=>{try{He(we(e))}catch{}return $s},Ss=t=>kt((()=>{if((e=fe(t,(e=>fe(e,ze))))&&(Qe(t),!Pt(W))){const e=St();Ts(),Cs(e)}})),xs=e=>kt((()=>{if(t=(e=>fe(e,ze))(e)){const s=Lt();Ns(),qs(),t=!0,je(e),vs(s)}})),Ts=()=>kt((()=>We({}))),Vs=e=>kt((e=>Jt(W,e)?nt(e):0),e),Rs=(e,t)=>kt(((e,t)=>E(Wt(W,e),(s=>Jt(s,t)?at(e,s,t):0))),e,t),qs=()=>kt((()=>tt({}))),Ms=()=>kt((()=>{Qe({}),e=!1})),Ns=()=>kt((()=>{je({}),t=!1})),Ls=(e,t)=>{if(-1!=n){Es();const s=e();return zs(t),s}},Es=()=>(-1!=n&&n++,1==n&&(a[0]?.(),Ne(Re)),$s),zs=e=>(n>0&&(n--,0==n&&(n=1,ft(1),Pt(V)||Ct(1),yt(1),Pt(q)||vt(1),e?.($s)&&(Ft(V,((e,t)=>Ft(e,((e,s)=>Ft(e,(([e],l)=>Ge($s,t,s,l,e))))))),Dt(V),Ft(q,(([e],t)=>Ke($s,t,e))),Dt(q)),Ne(qe[0],void 0),n=-1,ft(0),Pt(V)||Ct(0),yt(0),Pt(q)||vt(0),a[1]?.(),Ne(qe[1],void 0),a[2]?.(),n=0,s=ls(),l=ys(),ee([r,i,h,S,x,V,M,R,q,N],Dt))),$s),$s={getContent:()=>[St(),Lt()],getTables:St,getTableIds:xt,getTable:e=>Zt(Wt(W,T(e))),getTableCellIds:Tt,getRowCount:Vt,getRowIds:Rt,getSortedRowIds:qt,getRow:(e,t)=>Yt(Wt(Wt(W,T(e)),T(t))),getCellIds:Mt,getCell:Nt,getValues:Lt,getValueIds:Et,getValue:Bt,hasTables:ls,hasTable:rs,hasTableCell:ds,hasRow:us,hasCell:cs,hasValues:ys,hasValue:ws,getTablesJson:()=>Ce(W),getValuesJson:()=>Ce(U),getJson:()=>Ce([W,U]),getTablesSchemaJson:()=>Ce(P),getValuesSchemaJson:()=>Ce(D),getSchemaJson:()=>Ce([P,D]),hasTablesSchema:()=>e,hasValuesSchema:()=>t,setContent:e=>kt((()=>{const t=$(e)?e():e;$e(t)&&(([e,t])=>{(Ie(e)?Ts:Cs)(e),(Ie(t)?qs:vs)(t)})(t)})),setTables:Cs,setTable:(e,t)=>kt((e=>Oe(t,e)?Xe(e,t):0),e),setRow:(e,t,s)=>kt(((e,t)=>Ae(e,t,s)?Ye(e,lt(e),t,s):0),e,t),addRow:(e,t,s=!0)=>Ls((()=>{let l;return Ae(e,l,t)&&(e=T(e),Ye(e,lt(e),l=((e,t)=>{const[s]=Wt(j,e);let l;do{l=s(t)}while(Jt(Wt(W,e),l));return l})(e,s?1:0),t)),l})),setPartialRow:(e,t,s)=>kt(((e,t)=>{if(Ae(e,t,s,1)){const l=lt(e);be(s,((s,n)=>_e(e,l,t,n,s)))}}),e,t),setCell:(e,t,s,l)=>kt(((e,t,s)=>E(Je(e,t,s,$(l)?l(Nt(e,t,s)):l),(l=>_e(e,lt(e),t,s,l)))),e,t,s),setValues:vs,setPartialValues:e=>kt((()=>Pe(e,1)?be(e,((e,t)=>st(t,e))):0)),setValue:(e,t)=>kt((e=>E(Be(e,$(t)?t(Bt(e)):t),(t=>st(e,t)))),e),applyChanges:e=>kt((()=>{be(e[0],((e,t)=>L(e)?Vs(t):be(e,((e,s)=>L(e)?Rs(t,s):be(e,((e,l)=>Ge($s,t,s,l,e))))))),be(e[1],((e,t)=>Ke($s,t,e)))})),setTablesJson:ks,setValuesJson:e=>{try{et(we(e))}catch{}return $s},setJson:e=>kt((()=>{try{const[t,s]=we(e);He(t),et(s)}catch{ks(e)}})),setTablesSchema:Ss,setValuesSchema:xs,setSchema:(e,t)=>kt((()=>{Ss(e),xs(t)})),delTables:Ts,delTable:Vs,delRow:Rs,delCell:(e,t,s,l)=>kt(((e,t,s)=>E(Wt(W,e),(n=>E(Wt(n,t),(a=>Jt(a,s)?rt(e,n,t,a,s,l):0))))),e,t,s),delValues:qs,delValue:e=>kt((e=>Jt(U,e)?ot(e):0),e),delTablesSchema:Ms,delValuesSchema:Ns,delSchema:()=>kt((()=>{Ms(),Ns()})),transaction:Ls,startTransaction:Es,getTransactionChanges:()=>[Yt(V,((e,t)=>-1===Wt(r,t)?void 0:Yt(e,((e,s)=>-1===Wt(Wt(S,t),s)?void 0:Yt(e,(([,e])=>e),(e=>bs(e)))),Pt,Ie)),Pt,Ie),Yt(q,(([,e])=>e),(e=>bs(e))),1],getTransactionLog:()=>[!Pt(V),!Pt(q),_t(V,ps,bs),_t(M),Yt(q,ps,bs),Yt(N),Yt(r),Zt(S),_t(x),Yt(R)],finishTransaction:zs,forEachTable:e=>Ft(W,((t,s)=>e(s,(e=>Ft(t,((t,s)=>e(s,(e=>Ut(t,e))))))))),forEachTableCell:(e,t)=>Ut(Wt(H,T(e)),t),forEachRow:(e,t)=>Ft(Wt(W,T(e)),((e,s)=>t(s,(t=>Ut(e,t))))),forEachCell:(e,t,s)=>Ut(Wt(Wt(W,T(e)),T(t)),s),forEachValue:e=>Ut(U,e),addSortedRowIdsListener:(e,t,s,l,n,a,r)=>{let o=qt(e,t,s,l,n);return Me((()=>{const r=qt(e,t,s,l,n);var i,d,u;d=o,J(i=r)===J(d)&&(u=(e,t)=>d[t]===e,i.every(u))||(o=r,a($s,e,t,s,l,n,o))}),oe[r?1:0],[e,t],[xt])},addStartTransactionListener:e=>Me(e,Re),addWillFinishTransactionListener:e=>Me(e,qe[0]),addDidFinishTransactionListener:e=>Me(e,qe[1]),callListener:e=>(Ee(e),$s),delListener:e=>(Le(e),$s),getListenerStats:()=>({hasTables:ms(G),tables:ms(K),tableIds:ms(X),hasTable:ms(Y),table:ms(Z),tableCellIds:ms(se),hasTableCell:ms(ne,Ot),rowCount:ms(ae),rowIds:ms(re),sortedRowIds:ms(oe),hasRow:ms(ie,Ot),row:ms(de,Ot),cellIds:ms(ue,Ot),hasCell:ms(he,At),cell:ms(pe,At),invalidCell:ms(ye,At),hasValues:ms(ke),values:ms(Se),valueIds:ms(xe),hasValue:ms(Te),value:ms(Ve),invalidValue:ms(ve),transaction:$t(Re)+ms(qe)}),isMergeable:()=>!1,createStore:fs,addListener:Me,callListeners:Ne,setInternalListeners:(e,t,s,l,n)=>a=[e,t,s,l,n]};return be({[c+g]:[0,G,[],()=>[ls()]],[g]:[0,K],[p]:[0,X],[c+m]:[1,Y,[xt],e=>[rs(...e)]],[m]:[1,Z,[xt]],[m+w]:[1,se,[xt]],[c+m+y]:[2,ne,[xt,Tt],e=>[ds(...e)]],[I]:[1,ae,[xt]],[f]:[1,re,[xt]],[c+b]:[2,ie,[xt,Rt],e=>[us(...e)]],[b]:[2,de,[xt,Rt]],[w]:[2,ue,[xt,Rt]],[c+y]:[3,he,[xt,Rt,Mt],e=>[cs(...e)]],[y]:[3,pe,[xt,Rt,Mt],e=>hs(Nt(...e))],InvalidCell:[3,ye],[c+v]:[0,ke,[],()=>[ys()]],[v]:[0,Se],[k]:[0,xe],[c+C]:[1,Te,[Et],e=>[ws(...e)]],[C]:[1,Ve,[Et],e=>hs(Bt(e[0]))],InvalidValue:[1,ve]},(([e,t,s,l],n)=>{$s["add"+n+"Listener"]=(...n)=>Me(n[e],t[n[e+1]?1:0],e>0?A(n,0,e):void 0,s,l)})),ce($s)};e.Inspector=({position:e="right",open:t=!1})=>{const l=s.useCreateStore(fs),n=Se.indexOf(e);return s.useCreatePersister(l,(e=>{return t=ve,s=sessionStorage,((e,t,s,l,n,a,r,o={},i=0,d=[])=>{let u,c,h,m=0,g=0,p=0;Kt(ds,d,(()=>0)),Kt(us,d,(()=>[]));const b=jt(),[I,f,y,w,C]=((e=1,t,s)=>1!=e&&t.isMergeable()?[1,t.getMergeableContent,()=>t.getTransactionMergeableChanges(!s),([[e],[t]])=>!Ie(e)||!Ie(t),t.setDefaultContent]:2!=e?[0,t.getContent,t.getTransactionChanges,([e,t])=>!Ie(e)||!Ie(t),t.setContent]:P("Store type not supported by this Persister"))(r,e,i),[v,k,S]=is((()=>E)),x=e=>{e!=m&&(m=e,k(b,void 0,m))},T=t=>{(I&&O(t?.[0])?1===t?.[2]?e.applyMergeableChanges:e.setMergeableContent:1===t?.[2]?e.applyChanges:e.setContent)(t)},V=async e=>(2!=m&&(x(1),g++,await N((async()=>{try{const s=await t();O(s)?T(s):e?C(e):P("Content is not an array: "+s)}catch(t){e&&C(e)}x(0)}))),E),R=()=>(c&&(n(c),c=void 0),E),q=async e=>(1!=m&&(x(2),p++,await N((async()=>{try{await s(f,e)}catch(e){}x(0)}))),E),M=()=>(h&&(e.delListener(h),h=void 0),E),N=async(...e)=>(le(Wt(us,d),...e),await(async()=>{if(!Wt(ds,d)){for(Gt(ds,d,1);!L(u=ne(Wt(us,d)));)try{await u()}catch(e){}Gt(ds,d,0)}})(),E),E={load:V,startAutoLoad:async e=>{R(),await V(e);try{c=await l((async(e,t)=>{t||e?2!=m&&(x(1),g++,T(t??e),x(0)):await V()}))}catch(e){}return E},stopAutoLoad:R,isAutoLoading:()=>!L(c),save:q,startAutoSave:async()=>(M(),await q(),h=e.addDidFinishTransactionListener((()=>{const e=y();w(e)&&q(e)})),E),stopAutoSave:M,isAutoSaving:()=>!L(h),getStatus:()=>m,addStatusListener:e=>v(e,b),delListener:t=>(S(t),e),schedule:N,getStore:()=>e,destroy:()=>(Wt(us,d).splice(0,void 0),R().stopAutoSave()),getStats:()=>({loads:g,saves:p}),...o};return ce(E)})(e,(async()=>{return e=s.getItem(t),we(e,((e,t)=>"￼"===t?void 0:t));var e}),(async e=>{return s.setItem(t,(l=e(),ye(l,((e,t)=>void 0===t?"￼":t))));var l}),(e=>{const l=l=>{if(l.storageArea===s&&l.key===t)try{e(we(l.newValue))}catch{e()}};return V.addEventListener(cs,l),l}),(e=>V.removeEventListener(cs,e)),0,3,{getStorageName:()=>t});var t,s}),void 0,(async e=>{await e.load([{},{position:-1==n?1:n,open:!!t}]),await e.startAutoSave()})),Q(D,null,Q("aside",{id:ve},Q(He,{s:l}),Q(Lt,{s:l})),Q("style",null,je))}},"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("../ui-react/index.js")):"function"==typeof define&&define.amd?define(["exports","react","../ui-react"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).TinyBaseUiReactInspector={},e.React,e.TinyBaseUiReact);
